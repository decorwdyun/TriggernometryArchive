<?xml version="1.0"?>
<TriggernometryExport PluginVersion="1.2.0.731">
<ExportedFolder Id="c508e5d1-cdd4-411d-bd7e-ef093999acec" Name="绝伊甸宝宝椅 v0.6.6" Enabled="true" RawEnvironmentVariables="prefix = U7a&#xD;&#xA;zone = 1238&#xD;&#xA;version = 0.6.6">
<Folders>
<Folder Id="e529ad03-6e98-4586-b43b-42df79df22c1" Name="核心（此分组不可修改）" Enabled="true">
<Folders>
<Folder Id="f29ba1c8-ae30-4bb1-a41e-bad1ebb2d543" Name=".总体控制" Enabled="true">
<Folders>
<Folder Id="b6f06367-7421-4da5-9a1c-59b23b4b5f67" Name="用户配置" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Sequential="True" Name="记录用户配置（副本内手动 /e cfg)" Id="eb1072c1-68ab-41ec-ba80-17bcf8ca9b68" RegularExpression="^.{15}\S+ 00:0038:: *(?i)cfg *$">
<Actions>
<Action OrderNumber="1" LogMessageText="${env:prefix}_cfg" LogProcess="True" ActionType="LogMessage" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_ffxivzoneid}" ExpressionTypeL="String" ExpressionR="${env:zone}" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="[F] 注册并打开配置" Id="73c6f3a3-c3d5-46a3-96da-52fe2faa1cad" RegularExpression="^(?&lt;prefix&gt;[^[:_]+)_cfg$" PeriodRefire="Deny" RefirePeriodExpression="5000">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="正在开启配置" ActionType="UseTTS" />
<Action OrderNumber="2" ExecScriptExpression="using System;&#xD;&#xA;using System.Collections;&#xD;&#xA;using System.Collections.Generic;&#xD;&#xA;using System.Linq;&#xD;&#xA;using System.Threading;&#xD;&#xA;using System.Windows.Forms;&#xD;&#xA;using Triggernometry;&#xD;&#xA;using Triggernometry.CustomControls;&#xD;&#xA;using Triggernometry.Forms;&#xD;&#xA;using Triggernometry.PluginBridges;&#xD;&#xA;using static Triggernometry.Forms.GameConfigForm;&#xD;&#xA;using static Triggernometry.Interpreter;&#xD;&#xA;&#xD;&#xA;RealPlugin.plug.RegisterNamedCallback(U7aEntry.Info.ConfigName, new Action&lt;object, string&gt;((_, __) =&gt; U7aEntry.Start()), null);&#xD;&#xA;&#xD;&#xA;public static class U7aEntry&#xD;&#xA;{&#xD;&#xA;    public static ConfigInfo Info = new ConfigInfo(&quot;绝伊甸宝宝椅&quot;, &quot;${env:version}&quot;, &quot;阿洛 MnFeN&quot;, &quot;${env:prefix}_cfg&quot;);&#xD;&#xA;    public static void RunConfigForm()&#xD;&#xA;    {&#xD;&#xA;        GameConfigForm configForm = new GameConfigForm(Info);&#xD;&#xA;        configForm.Shown += (sender, e) =&gt; RealPlugin.plug.InvokeNamedCallback(&quot;command&quot;, &quot;/e &lt;se.9&gt;&quot;);&#xD;&#xA;&#xD;&#xA;        BijectDictionary&lt;string, string&gt; cbxItems;&#xD;&#xA;        Option optionCtrl;&#xD;&#xA;        string hint = &quot;&quot;;&#xD;&#xA;        // 在下面倒序添加各个选项组（组内的选项正序）&#xD;&#xA;&#xD;&#xA;        #region 配置：实体缩放&#xD;&#xA;        OptionsTableLayoutPanel tableScaling = configForm.AddOptionGroup(&quot; 实体缩放倍率（1 代表原始大小）&quot;);&#xD;&#xA;        configForm.AddOption(new OptionTxt(&quot;[未适配] 桑克瑞德本体&quot;, &quot;Scaling桑&quot;, &quot;1&quot;), tableScaling);&#xD;&#xA;        configForm.AddOption(new OptionTxt(&quot;[未适配] 桑克瑞德分身（雾龙阶段）&quot;, &quot;Scaling桑2&quot;, &quot;1&quot;), tableScaling);&#xD;&#xA;        configForm.AddOption(new OptionTxt(&quot;[未适配] 琳（P2）&quot;, &quot;Scaling琳&quot;, &quot;1&quot;), tableScaling);&#xD;&#xA;        configForm.AddOption(new OptionTxt(&quot;[未适配] 盖娅（P3）&quot;, &quot;Scaling盖&quot;, &quot;1&quot;), tableScaling);&#xD;&#xA;        configForm.AddOption(new OptionTxt(&quot;[未适配] 琳（P4）&quot;, &quot;Scaling琳2&quot;, &quot;1&quot;), tableScaling);&#xD;&#xA;        configForm.AddOption(new OptionTxt(&quot;[未适配] 盖娅（P4）&quot;, &quot;Scaling盖2&quot;, &quot;1&quot;), tableScaling);&#xD;&#xA;        configForm.AddOption(new OptionTxt(&quot;[未适配] 潘多拉&quot;, &quot;Scaling潘&quot;, &quot;1&quot;), tableScaling);&#xD;&#xA;        #endregion 配置：实体缩放&#xD;&#xA;&#xD;&#xA;        #region 配置：输出设置&#xD;&#xA;        OptionsTableLayoutPanel tableOutputs = configForm.AddOptionGroup(&quot; 输出设置 &quot;);&#xD;&#xA;&#xD;&#xA;        // P1 光轮缩放&#xD;&#xA;        hint = &quot;· 改变特效：八个光轮初始缩小且半透明，以便观察站位；后续判定时放大到实际判定范围&quot;;&#xD;&#xA;        optionCtrl = new OptionChk(&quot;P1 光轮缩放&quot;, &quot;P1光轮缩放on&quot;, true, hint);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableOutputs);&#xD;&#xA;&#xD;&#xA;        // P2 DD 连线背对&#xD;&#xA;        hint = &quot;· 调用特效：钻石星尘阶段，背对判定前，将自身与释放背对的分身连线&quot;;&#xD;&#xA;        optionCtrl = new OptionChk(&quot;P2 背对连线&quot;, &quot;P2背对连线on&quot;, true, hint);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableOutputs);&#xD;&#xA;&#xD;&#xA;        // P2 红镜子变白&#xD;&#xA;        hint = &quot;· 调用特效：在白镜子判定后，将剩余的两个红镜子变为白镜子，以防巨大的红色特效影响观察站位&quot;;&#xD;&#xA;        optionCtrl = new OptionChk(&quot;P2 红镜子变白&quot;, &quot;P2镜子变白on&quot;, true, hint);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableOutputs);&#xD;&#xA;&#xD;&#xA;        // P2.5 消除冰地板&#xD;&#xA;        hint = &quot;· 调用特效：在地板冻结后立刻解除冰冻，此功能用于避免冰地板导致扇形看不见的 bug。\n目前 SE 已修复此 bug，但开启此选项可降低光污染。\n\n· 注：开启此选项会导致水晶被实际打碎前可以走进其目标圈。\n  （这意味着可以去正中间打 15 米 AoE 贪四个伤害）&quot;;&#xD;&#xA;        optionCtrl = new OptionChk(&quot;P2.5 消除冰地板&quot;, &quot;P2碎冰on&quot;, true, hint);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableOutputs);&#xD;&#xA;&#xD;&#xA;        // P2.5 暗水晶不可选中&#xD;&#xA;        hint = &quot;· 将四个暗水晶实体设置为无法选中的状态&quot;;&#xD;&#xA;        optionCtrl = new OptionChk(&quot;P2.5 暗水晶不可选中&quot;, &quot;P2不可选暗on&quot;, true, hint);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableOutputs);&#xD;&#xA;&#xD;&#xA;        // P3 一运镜子指北&#xD;&#xA;        hint = &quot;· 调用特效：一运阶段，在连线的 12 点方向生成 P2 的白镜子，指示相对北&quot;;&#xD;&#xA;        optionCtrl = new OptionChk(&quot;P3 一运镜子指北&quot;, &quot;P3一运镜子on&quot;, true, hint);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableOutputs);&#xD;&#xA;&#xD;&#xA;        #endregion 配置：输出设置&#xD;&#xA;&#xD;&#xA;        #region 配置：实体标点&#xD;&#xA;&#xD;&#xA;        OptionsTableLayoutPanel tableTargetMarkers = configForm.AddOptionGroup(&quot; 实体标点（未出现在此处的均为本地标点） &quot;);&#xD;&#xA;&#xD;&#xA;        // P2 光暴指挥模式&#xD;&#xA;        cbxItems = new BijectDictionary&lt;string, string&gt;(&#xD;&#xA;            (&quot;2&quot;, &quot; 为全队标点（标点逻辑由打法决定）&quot;),&#xD;&#xA;            (&quot;0&quot;, &quot; 不开启标点（去哪依然由打法决定）&quot;)&#xD;&#xA;        );&#xD;&#xA;        hint = &quot;· 为连线的六人标点指示踩哪个塔：\n    攻击 1 2 3 4 去对应场地标点 1-4 方向；\n    锁链 1 2 去 A C&quot;;&#xD;&#xA;        optionCtrl = new OptionCbx(&quot;P2 光暴指挥模式（任意攻略下有效）&quot;, &quot;P2光暴标点mode&quot;, cbxItems, &quot;0&quot;, hint);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableTargetMarkers);&#xD;&#xA;&#xD;&#xA;        // P3 二运指挥模式&#xD;&#xA;        cbxItems = new BijectDictionary&lt;string, string&gt;(&#xD;&#xA;            (&quot;1&quot;, &quot; 为全队标点&quot;),&#xD;&#xA;            (&quot;0&quot;, &quot; 由别人为自己标点&quot;)&#xD;&#xA;        );&#xD;&#xA;        hint = &quot;· 一组 攻击 1 2 3 4\n&quot; +&#xD;&#xA;               &quot;· 二组 锁链 1 2 3 方块\n&quot; +&#xD;&#xA;               &quot; MT 固定为攻击 1（去一组引导位）&quot;;&#xD;&#xA;        optionCtrl = new OptionCbx(&quot;P3 二运指挥模式（仅选择科技打法时有效）&quot;, &quot;P3二运isCmd&quot;, cbxItems, &quot;0&quot;, hint);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableTargetMarkers);&#xD;&#xA;&#xD;&#xA;        // P4 二运吃圈摇号&#xD;&#xA;        cbxItems = new BijectDictionary&lt;string, string&gt;(&#xD;&#xA;            (&quot;自身&quot;, &quot; 自动为自己摇号&quot;),&#xD;&#xA;            (&quot;全队优先&quot;, &quot; 自动为全队按 THD 全队优先级摇号&quot;),&#xD;&#xA;            (&quot;全队点名&quot;, &quot; 自动为全队按点名摇号（配合前面的设置）&quot;),&#xD;&#xA;            (&quot;被动&quot;, &quot; 手动或由别人为自己摇号&quot;)&#xD;&#xA;        );&#xD;&#xA;        hint = &quot;待定&quot;;&#xD;&#xA;        optionCtrl = new OptionCbx(&quot;[未适配] P4 二运摇号吃圈时摇号方式&quot;, &quot;P4二运自动摇号&quot;, cbxItems, &quot;自身&quot;, hint);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableTargetMarkers);&#xD;&#xA;&#xD;&#xA;        #endregion 配置：实体标点&#xD;&#xA;&#xD;&#xA;        #region 配置：解法&#xD;&#xA;        OptionsTableLayoutPanel tableStrats = configForm.AddOptionGroup(&quot; 攻略解法 &quot;);&#xD;&#xA;&#xD;&#xA;        // P1 雾龙连线两人去的位置&#xD;&#xA;        cbxItems = new BijectDictionary&lt;string, string&gt;(&#xD;&#xA;            (&quot;THD&quot;, &quot; 高优先级去北、低优先级去南（THD）（国服）&quot;),&#xD;&#xA;            (&quot;HTD&quot;, &quot; 高优先级去北、低优先级去南（HTD）（日服）&quot;),&#xD;&#xA;            (&quot;长短&quot;, &quot; 长线去北、短线去南（美服）&quot;),&#xD;&#xA;            (&quot;短长&quot;, &quot; 短线去北、长线去南&quot;),&#xD;&#xA;            (&quot;左右&quot;, &quot; 左下分身连线去北、右下分身连线去南&quot;),&#xD;&#xA;            (&quot;右左&quot;, &quot; 右下分身连线去北、左下分身连线去南&quot;)&#xD;&#xA;        );&#xD;&#xA;        optionCtrl = new OptionCbx(&quot;P1 雾龙连线两人去的位置&quot;, &quot;P1雾龙线&quot;, cbxItems, &quot;THD&quot;);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableStrats);&#xD;&#xA;&#xD;&#xA;        // P1 雷火线优先级&#xD;&#xA;        cbxItems = new BijectDictionary&lt;string, string&gt;(&#xD;&#xA;            (&quot;HTD&quot;, &quot; H &gt; T &gt; D（国服）&quot;), (&quot;THD&quot;, &quot; T &gt; H &gt; D（日服）&quot;), (&quot;HTDH&quot;, &quot; H1 &gt; T &gt; D &gt; H2&quot;),&#xD;&#xA;            (&quot;TMHR&quot;, &quot; D3 H1 D1 MT ST D2 H2 D4（美服）&quot;), (&quot;TMRH&quot;, &quot; H1 D3 D1 MT ST D2 D4 H2&quot;),&#xD;&#xA;            (&quot;MTHR&quot;, &quot; D3 H1 MT D1 D2 ST H2 D4&quot;), (&quot;MTRH&quot;, &quot; H1 D3 MT D1 D2 ST D4 H2&quot;)&#xD;&#xA;        );&#xD;&#xA;        optionCtrl = new OptionCbx(&quot;P1 雷火线全队优先级&quot;, &quot;P1线Prio&quot;, cbxItems, &quot;HTD&quot;);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableStrats);&#xD;&#xA;&#xD;&#xA;        // P1 雷火线谁固定站位&#xD;&#xA;        cbxItems = new BijectDictionary&lt;string, string&gt;(&#xD;&#xA;            (&quot;1&quot;, &quot; 连线组固定、闲人调整&quot;), (&quot;0&quot;, &quot; 闲人固定、连线者调整&quot;)&#xD;&#xA;        );&#xD;&#xA;        hint = &quot;· 连线组固定：\n    连线者固定前后站位\n    闲人根据线去左右或正后\n\n&quot; +&#xD;&#xA;               &quot;· 闲人组固定：\n    闲人固定左右站位\n    连线者根据线去中间或左前\n\n&quot; +&#xD;&#xA;               &quot;· 注：单排双排与优先级完全无关，爱站哪站哪&quot;;&#xD;&#xA;        optionCtrl = new OptionCbx(&quot;P1 雷火线谁固定站位&quot;, &quot;P1is线固定&quot;, cbxItems, &quot;1&quot;, hint);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableStrats);&#xD;&#xA;&#xD;&#xA;        // P1 雷火线南北/东西&#xD;&#xA;        cbxItems = new BijectDictionary&lt;string, string&gt;(&#xD;&#xA;            (&quot;1&quot;, &quot; 1/3 线北、2/4 线南（国服/日服）&quot;), (&quot;0&quot;, &quot; 1/3 线西、2/4 线东（美服）&quot;)&#xD;&#xA;        );&#xD;&#xA;        optionCtrl = new OptionCbx(&quot;P1 雷火线去南北 / 东西&quot;, &quot;P1线is南北&quot;, cbxItems, &quot;1&quot;);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableStrats);&#xD;&#xA;&#xD;&#xA;        // P1 六人踩塔解法&#xD;&#xA;        cbxItems = new BijectDictionary&lt;string, string&gt;(&#xD;&#xA;            (&quot;固定HHD&quot;, &quot; 3 固定 3 换位：H1 D1 | H2 D2 | D4 D3（MMW 视频）&quot;),&#xD;&#xA;            (&quot;固定HDH&quot;, &quot; 3 固定 3 换位：H1 D1 | D4 D3 | H2 D2（MMW 文档）&quot;),&#xD;&#xA;            (&quot;结合HHD&quot;, &quot; 3 固定 3 优先级：H1 | H2 | D4&quot;),&#xD;&#xA;            (&quot;结合HDH&quot;, &quot; 3 固定 3 优先级：H1 | D4 | H2（美服）&quot;),&#xD;&#xA;            (&quot;优先&quot;, &quot; 6 人优先级（日服）&quot;)&#xD;&#xA;        );&#xD;&#xA;        hint = &quot;· 三人固定、三人换位：\n    法系从上到下固定、D1-3 按需补位（类似龙诗 P3）\n\n&quot;&#xD;&#xA;             + &quot;· 三人固定、三人优先级：\n    法系从上到下固定、D1-3 按优先级从上到下补塔\n\n&quot;&#xD;&#xA;             + &quot;· 六人优先级：\n    H1 H2 D1-4 优先级从上到下踩塔&quot;;&#xD;&#xA;        optionCtrl = new OptionCbx(&quot;P1 六人踩塔解法&quot;, &quot;P1塔&quot;, cbxItems, &quot;固定&quot;, hint);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableStrats);&#xD;&#xA;&#xD;&#xA;        // P2 钻石星尘需要逆时针起跑时是否均逆时针&#xD;&#xA;        cbxItems = new BijectDictionary&lt;string, string&gt;(&#xD;&#xA;            (&quot;1&quot;, &quot; 两组均逆时针反向起跑&quot;), (&quot;0&quot;, &quot; 仅分身边上的一组逆时针起跑&quot;)&#xD;&#xA;        );&#xD;&#xA;        optionCtrl = new OptionCbx(&quot;P2 钻石星尘 需要反向起跑时：&quot;, &quot;P2DD冰is双逆&quot;, cbxItems, &quot;1&quot;);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableStrats);&#xD;&#xA;&#xD;&#xA;        // P2 光之暴走&#xD;&#xA;        cbxItems = new BijectDictionary&lt;string, string&gt;(&#xD;&#xA;            (&quot;灰九&quot;, &quot; 灰九式（MMW）&quot;),&#xD;&#xA;            (&quot;翻绳THD&quot;, &quot; 翻花绳（THD，莫古力）&quot;),&#xD;&#xA;            (&quot;翻绳HTD&quot;, &quot; 翻花绳（HTD，日野）&quot;),&#xD;&#xA;            (&quot;翻绳美&quot;, &quot; 翻花绳（美服）&quot;)&#xD;&#xA;        );&#xD;&#xA;        hint = &quot;· 灰九：\n    正北开始 顺时针 正八方站位确定优先级：\n    MT D4 ST D2 H2 D1 H1 D3\n    六人根据优先级分别去 C1243A\n    正东西拉线\n\n&quot;&#xD;&#xA;             + &quot;· 翻绳（莫古力/日野）：\n    正西开始 顺时针 斜八方站位确定优先级：\n    THD：MT ST H1 H2 D4 D3 D2 D1\n    HTD：H1 H2 MT ST D4 D3 D2 D1\n    六人根据优先级分别去 1C24A3\n    正南北偏顺 30° 拉线\n\n&quot;&#xD;&#xA;             + &quot;· 翻绳（美服）：\n    正西开始 顺时针 斜八方站位：\n    H1 H2 MT ST D2 D1 D4 D3\n    南北两侧为 2/4 时，多的一侧最偏顺时针的人顺时针旋转补位（无法等效于单一优先级）\n    六边形所去占位同上\n    正南北偏顺 30° 拉线&quot;;&#xD;&#xA;        optionCtrl = new OptionCbx(&quot;P2 光暴解法&quot;, &quot;P2光暴&quot;, cbxItems, &quot;灰九&quot;, hint);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableStrats);&#xD;&#xA;&#xD;&#xA;        // P3 一运解法&#xD;&#xA;        cbxItems = new BijectDictionary&lt;string, string&gt;(&#xD;&#xA;            (&quot;国&quot;, &quot; 国服&quot;),&#xD;&#xA;            (&quot;美&quot;, &quot; 美服&quot;)&#xD;&#xA;        );&#xD;&#xA;        hint = &quot;· 国服：\n    优先级 MT-H2 | D1-D4 \n    同组高左低右、D 北 TH 南、中火左 TH 右 D\n    详见 MMW 文档\n\n&quot;&#xD;&#xA;             + &quot;· 美服：\n    优先级 ST MT H1 H2 | D2134 \n    同组高左低右、D 北 TH 南、中火左 D 右 TH\n    详见 LesBin / naurffxiv&quot;;&#xD;&#xA;        optionCtrl = new OptionCbx(&quot;P3 一运解法&quot;, &quot;P3一运&quot;, cbxItems, &quot;双分组&quot;, hint);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableStrats);&#xD;&#xA;&#xD;&#xA;        // P3 二运分组方式&#xD;&#xA;        cbxItems = new BijectDictionary&lt;string, string&gt;(&#xD;&#xA;            (&quot;双分国&quot;, &quot; 双分组：优先级 H12 T12 D1-4（MMW）&quot;),&#xD;&#xA;            (&quot;双分美&quot;, &quot; 双分组：优先级 H21 T21 D1-4（美服）&quot;),&#xD;&#xA;            (&quot;单分THD&quot;, &quot; 单分组：优先级 T12 H12 D1-4（正常优先级）&quot;),&#xD;&#xA;            (&quot;单分日&quot;,  &quot; 单分组：优先级 H21 T21 D1-4（日服换位）&quot;),&#xD;&#xA;            (&quot;单分莫&quot;,  &quot; 单分组：优先级 T12 H12 D4-1（莫古力换位）&quot;),&#xD;&#xA;            (&quot;单分科&quot;,  &quot; 单分组：根据科技标点（自动分配每组双近双远）&quot;)&#xD;&#xA;        );&#xD;&#xA;        hint = &quot;· 双分组：\n    分摊分组按优先级确定\n    分散分组按职能固定 1/2 组\n    每人分散分摊都去固定位置\n    详见 MMW 文档\n\n&quot;&#xD;&#xA;             + &quot;· 单分组：\n    分摊分组按指定优先级确定\n    分散时按分摊的分组\n\n&quot;&#xD;&#xA;             + &quot;· 科技解法：\n    按照指定规则，确保每组双近双远\n    按头顶标记去指定位置&quot;;&#xD;&#xA;        optionCtrl = new OptionCbx(&quot;P3 二运分散与分摊的分组方式&quot;, &quot;P3二运&quot;, cbxItems, &quot;双分组&quot;, hint);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableStrats);&#xD;&#xA;&#xD;&#xA;        // P3 二运分散找半场&#xD;&#xA;        cbxItems = new BijectDictionary&lt;string, string&gt;(&#xD;&#xA;            (&quot;地火&quot;, &quot; 出去的初始地火，反向去安全区（美服/日服）&quot;),&#xD;&#xA;            (&quot;地火-&quot;, &quot; 地火逆时针 45° 的三火安全区&quot;),&#xD;&#xA;            (&quot;地火--&quot;, &quot; 地火垂直 90° 的安全区&quot;)&#xD;&#xA;        );&#xD;&#xA;        optionCtrl = new OptionCbx(&quot;P3 二运以什么的方向划分所属半场&quot;, &quot;P3二运分半场&quot;, cbxItems, &quot;1&quot;);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableStrats);&#xD;&#xA;&#xD;&#xA;        // P4 一运&#xD;&#xA;        cbxItems = new BijectDictionary&lt;string, string&gt;(&#xD;&#xA;            (&quot;翻绳THD&quot;, &quot; 翻绳 - THD&quot;), (&quot;翻绳HTD&quot;, &quot; 翻绳 - HTD&quot;), (&quot;分摊基准&quot;, &quot; 分摊基准&quot;)&#xD;&#xA;        );&#xD;&#xA;        hint = &quot;待定&quot;;&#xD;&#xA;        optionCtrl = new OptionCbx(&quot;[未适配] P4 一运解法&quot;, &quot;P4一运&quot;, cbxItems, &quot;翻绳正&quot;, hint);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableStrats);&#xD;&#xA;&#xD;&#xA;        // P4 二运击退&#xD;&#xA;        cbxItems = new BijectDictionary&lt;string, string&gt;(&#xD;&#xA;            (&quot;击退&quot;, &quot; 正常击退&quot;), (&quot;防击退&quot;, &quot; 防击退&quot;)&#xD;&#xA;        );&#xD;&#xA;        hint = &quot;待定&quot;;&#xD;&#xA;        optionCtrl = new OptionCbx(&quot;[未适配] P4 二运击退解法&quot;, &quot;P4二运击退&quot;, cbxItems, &quot;击退&quot;, hint);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableStrats);&#xD;&#xA;&#xD;&#xA;        // P4 二运吃圈&#xD;&#xA;        cbxItems = new BijectDictionary&lt;string, string&gt;(&#xD;&#xA;            (&quot;优先&quot;, &quot; 按 THD 全队优先级&quot;),&#xD;&#xA;            (&quot;摇号&quot;, &quot; 按摇号 1-4&quot;),&#xD;&#xA;            (&quot;点名&quot;, &quot; 按点名固定（配合下方设置）&quot;)&#xD;&#xA;        );&#xD;&#xA;&#xD;&#xA;        hint = &quot;待定&quot;;&#xD;&#xA;        optionCtrl = new OptionCbx(&quot;[未适配] P4 二运蓝点名吃圈顺序（面向 C 从左到右）&quot;, &quot;P4二运吃圈&quot;, cbxItems, &quot;摇号&quot;, hint);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableStrats);&#xD;&#xA;&#xD;&#xA;        // P4 二运吃圈：点名&#xD;&#xA;        cbxItems = new BijectDictionary&lt;string, string&gt;((&quot;冰&quot;, &quot; 黑暗冰封&quot;), (&quot;水&quot;, &quot; 黑暗狂水&quot;), (&quot;圣&quot;, &quot; 黑暗神圣&quot;), (&quot;暗&quot;, &quot; 暗炎喷发&quot;));&#xD;&#xA;        hint = &quot;仅在上方选项选择了根据点名摇号相关的选项时生效，否则可无视&quot;;&#xD;&#xA;        configForm.AddOption(new OptionCbx(&quot;[未适配] P4 二运点名 1 号（正东）&quot;, &quot;P4二运点名1&quot;, cbxItems, 0, hint), tableStrats);&#xD;&#xA;        configForm.AddOption(new OptionCbx(&quot;[未适配] P4 二运点名 2 号（东南）&quot;, &quot;P4二运点名2&quot;, cbxItems, 1, hint), tableStrats);&#xD;&#xA;        configForm.AddOption(new OptionCbx(&quot;[未适配] P4 二运点名 3 号（西南）&quot;, &quot;P4二运点名3&quot;, cbxItems, 2, hint), tableStrats);&#xD;&#xA;        configForm.AddOption(new OptionCbx(&quot;[未适配] P4 二运点名 4 号（正西）&quot;, &quot;P4二运点名4&quot;, cbxItems, 3, hint), tableStrats);&#xD;&#xA;&#xD;&#xA;        // P5 挡枪顺序&#xD;&#xA;        cbxItems = new BijectDictionary&lt;string, string&gt;(&#xD;&#xA;            (&quot;TMRH&quot;, &quot; T 近 远 H（国服/美服）&quot;),&#xD;&#xA;            (&quot;THMR&quot;, &quot; T H 近 远&quot;),&#xD;&#xA;            (&quot;TMRT&quot;, &quot; T 近 远 T&quot;)&#xD;&#xA;        );&#xD;&#xA;        optionCtrl = new OptionCbx(&quot;P5 职能挡枪顺序&quot;, &quot;P5挡枪&quot;, cbxItems, &quot;TMRH&quot;, hint);&#xD;&#xA;        configForm.AddOption(optionCtrl, tableStrats);&#xD;&#xA;&#xD;&#xA;        #endregion 配置：解法&#xD;&#xA;&#xD;&#xA;        #region 配置：文本频道&#xD;&#xA;        OptionsTableLayoutPanel tableChannel = configForm.AddOptionGroup(&quot; 文本频道 &quot;);&#xD;&#xA;        var cnlPublicItems = new BijectDictionary&lt;string, string&gt;(&#xD;&#xA;            (&quot;&quot;, &quot; （禁用）&quot;), (&quot;p&quot;, &quot; 小队&quot;), (&quot;e&quot;, &quot; 默语&quot;), (&quot;fc&quot;, &quot; 部队&quot;),&#xD;&#xA;            (&quot;l1&quot;, &quot; 通讯贝1&quot;), (&quot;l2&quot;, &quot; 通讯贝2&quot;), (&quot;l3&quot;, &quot; 通讯贝3&quot;), (&quot;l4&quot;, &quot; 通讯贝4&quot;),&#xD;&#xA;            (&quot;l5&quot;, &quot; 通讯贝5&quot;), (&quot;l6&quot;, &quot; 通讯贝6&quot;), (&quot;l7&quot;, &quot; 通讯贝7&quot;), (&quot;l8&quot;, &quot; 通讯贝8&quot;),&#xD;&#xA;            (&quot;cwl1&quot;, &quot; 跨服通讯贝1&quot;), (&quot;cwl2&quot;, &quot; 跨服通讯贝2&quot;), (&quot;cwl3&quot;, &quot; 跨服通讯贝3&quot;), (&quot;cwl4&quot;, &quot; 跨服通讯贝4&quot;),&#xD;&#xA;            (&quot;cwl5&quot;, &quot; 跨服通讯贝5&quot;), (&quot;cwl6&quot;, &quot; 跨服通讯贝6&quot;), (&quot;cwl7&quot;, &quot; 跨服通讯贝7&quot;), (&quot;cwl8&quot;, &quot; 跨服通讯贝8&quot;)&#xD;&#xA;        );&#xD;&#xA;        var cnlDebugItems = cnlPublicItems.ShallowCopy();&#xD;&#xA;        cnlDebugItems.RemoveKey(&quot;p&quot;);&#xD;&#xA;        var cnlPrivateItems = cnlDebugItems.ShallowCopy();&#xD;&#xA;        cnlPrivateItems.RemoveKey(&quot;&quot;);&#xD;&#xA;&#xD;&#xA;        OptionCbx cnlPublic = new OptionCbx(&quot;公共频道&quot;, &quot;publicChannel&quot;, cnlPublicItems, &quot;e&quot;,&#xD;&#xA;            hint: &quot;本频道用于播报部分机制、示意图、复盘信息等机制相关内容。\n\n默认设为自己可见的默语频道，\n如有需要可设为小队等。&quot;);&#xD;&#xA;        OptionCbx cnlPrivate = new OptionCbx(&quot;个人频道&quot;, &quot;privateChannel&quot;, cnlPrivateItems, &quot;e&quot;,&#xD;&#xA;            hint: &quot;本频道用于发送仅应自己可见的系统提示消息。\n\n本项设置不应选择任何其他人可见的频道。&quot;);&#xD;&#xA;        OptionCbx cnlDebug = new OptionCbx(&quot;调试频道&quot;, &quot;debugChannel&quot;, /*cnlDebugItems*/ cnlPrivateItems, &quot;&quot;,&#xD;&#xA;            hint: &quot;本频道用于发送额外调试信息。\n\n请设置为仅自己可见的频道，或将其关闭。（测试版暂不提供关闭选项）&quot;);&#xD;&#xA;        configForm.AddOption(cnlPublic, tableChannel);&#xD;&#xA;        configForm.AddOption(cnlPrivate, tableChannel);&#xD;&#xA;        configForm.AddOption(cnlDebug, tableChannel);&#xD;&#xA;&#xD;&#xA;        #endregion 配置：文本频道&#xD;&#xA;&#xD;&#xA;        #region 配置：队员顺序&#xD;&#xA;        if (BridgeFFXIV.ZoneID == int.Parse(&quot;${env:zone}&quot;) &amp;&amp; Triggernometry.FFXIV.Entity.GetEntities().Count(e =&gt; e.InParty) &gt; 1)&#xD;&#xA;        {&#xD;&#xA;            string[] playerDescriptions = { &quot;MT&quot;, &quot;ST&quot;, &quot;H1&quot;, &quot;H2&quot;, &quot;D1&quot;, &quot;D2&quot;, &quot;D3&quot;, &quot;D4&quot; };&#xD;&#xA;            var pListPanel = new PartyListPanel(playerDescriptions);&#xD;&#xA;            configForm.AddPartyGroup(&quot; 队员顺序（拖拽调整） &quot;, pListPanel);&#xD;&#xA;        }&#xD;&#xA;        #endregion 配置：队员顺序&#xD;&#xA;&#xD;&#xA;        Application.OpenForms.OfType&lt;GameConfigForm&gt;().ToList().ForEach(f =&gt; f.Close());&#xD;&#xA;        configForm.Run();&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    [STAThread]&#xD;&#xA;    public static void Start()&#xD;&#xA;    {&#xD;&#xA;        try&#xD;&#xA;        {&#xD;&#xA;            Application.OpenForms.OfType&lt;GameConfigForm&gt;().ToList().ForEach(f =&gt; f.Close()); &#xD;&#xA;            Thread staThread = new Thread(new ThreadStart(RunConfigForm));&#xD;&#xA;            staThread.SetApartmentState(ApartmentState.STA);&#xD;&#xA;            staThread.Start();&#xD;&#xA;            staThread.Join();&#xD;&#xA;        }&#xD;&#xA;        catch (Exception ex)&#xD;&#xA;        {&#xD;&#xA;            MessageBox.Show(&quot;用户配置表单运行错误：\n&quot; + ex, Info.Name, MessageBoxButtons.OK, MessageBoxIcon.Error);&#xD;&#xA;        }&#xD;&#xA;    }&#xD;&#xA;}" ActionType="ExecuteScript">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ecallback:${env:prefix}_cfg}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" NamedCallbackName="${env:prefix}_cfg" ActionType="NamedCallback" />
<Action OrderNumber="4" LogMessageText="PartyList:MyIdx8:${v:myIdx}" LogProcess="True" ActionType="LogMessage">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:myIdx}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${prefix}" ExpressionTypeL="String" ExpressionR="${env:prefix}" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="记录用户配置（副本外手动 /e cfg 伊甸）" Id="839088a9-1812-42cc-a049-f2cb23cc285c" RegularExpression="^.{15}\S+ 00:0038:: *(?i)cfg +(fru|eden|伊甸|yidian|U7a) *$">
<Actions>
<Action OrderNumber="1" LogMessageText="${env:prefix}_cfg" LogProcess="True" ActionType="LogMessage" />
</Actions>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="记录用户配置（自动）" Id="a2e4e0bf-7b95-4bdd-baf0-b8fde34ebbd2" RegularExpression="^.{15}\S+ 01:(?&lt;zoneId&gt;[^:]*):">
<Actions>
<Action OrderNumber="1" LogMessageText="${env:prefix}_cfg" LogProcess="True" ActionType="LogMessage" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="0x${zoneId}" ExpressionTypeL="Numeric" ExpressionR="${env:zone}" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers>
<Trigger Enabled="false" Name="导入提示" Id="81c76b52-1559-4e1f-9fed-13c1bba7e69c" RegularExpression="^." PrevActionsRefire="Deny" PeriodRefire="Deny" RefirePeriodExpression="30000">
<Actions>
<Action OrderNumber="1" MessageBoxIconType="Warning" MessageBoxText="已更新绝伊甸测试版 v${env:version}&#xD;&#xA;&#xD;&#xA;v0.6 已增加新版配置界面&#xD;&#xA;需要查看远程触发器 - 绝伊甸 - 使用说明&#xD;&#xA;&#xD;&#xA;目前正在重构优化 + 适配不同解法&#xD;&#xA;不确保触发器可正常使用 / 播报无误&#xD;&#xA;如果遇到任何问题请加测试群：839232516" ActionType="MessageBox" />
<Action OrderNumber="2" TriggerOp="DisableTrigger" TriggerId="81c76b52-1559-4e1f-9fed-13c1bba7e69c" ActionType="Trigger" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder FFXIVZoneFilterEnabled="True" FfxivZoneFilterRegularExpression="^1238$" Id="1b8aa27b-4c76-4e3a-8dcc-ebca27a95915" DisableRemoteExpand="True" DisableRemoteToggle="True" Name="区域限制" Enabled="true">
<Folders>
<Folder Id="a4d07223-25f6-4a16-aa1f-e8cb06be49a2" Name=".控制" Enabled="true">
<Folders>
<Folder Id="f743eca6-4472-451e-be83-0f6dfd49db55" Name="标点" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="标点保存" Id="d1b7ad1c-1357-4e95-9d03-2e15bac516dd" RegularExpression="^.{15}\S+ 1C:">
<Actions>
<Action OrderNumber="1" NamedCallbackName="place" NamedCallbackParam="save" ActionType="NamedCallback" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="标点重载" Id="fdc2881d-5537-41e3-a57d-d90603083728" RegularExpression="^.{15}\S+ 21:.{8}:40000006|^.{15}\S+ 104:1:1">
<Actions>
<Action OrderNumber="1" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" />
<Action OrderNumber="2" NamedCallbackName="place" NamedCallbackParam="save" ActionType="NamedCallback" ExecutionDelayExpression="2000" />
</Actions>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers>
<Trigger Enabled="true" Sequential="True" Name="团灭中断动作 + 重置战斗" Id="7308b726-4e45-4a64-a185-bbe5e8c2ebf5" RegularExpression="^.{15}\S+ 21:.{8}:40000011">
<Actions>
<Action OrderNumber="1" FolderId="0ce40102-dbad-4ebf-b5d1-c50aa2bd41d4" ActionType="ActInteraction" />
<Action OrderNumber="2" VariableName="U7a2_滑冰_loop" ActionType="Variable" />
<Action OrderNumber="3" FolderOp="CancelFolder" FolderId="7ee6cd5e-abcd-4dc0-99c7-da526ccfbb3a" ActionType="Folder" />
</Actions>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="0. 初始化" Id="04f474ce-e494-4da0-b3ca-182ad6e70a1e" RegularExpression="^.{15}\S+ 104:.:1:.:1">
<Actions>
<Action OrderNumber="1" VariableOp="UnsetRegexUniversal" VariableName="^U7a\d*_|^tmp_" ActionType="Variable" />
<Action OrderNumber="2" ListVariableOp="Build" ListVariableExpression=",ＭＴ,ＳＴ,Ｈ１,Ｈ２,Ｄ１,Ｄ２,Ｄ３,Ｄ４" ListVariableTarget="roleDesc" ActionType="ListVariable" />
</Actions>
</Trigger>
<Trigger Enabled="false" Name="小队列表注册区域" Id="9f11f103-46c8-45e1-96d8-b61eeb847f4c" RegularExpression="^.{15}\S+ 01:">
<Actions>
<Action OrderNumber="1" LogMessageText="PartyList:Register:${_ffxivzoneid}:MT, ST, H1, H2, D1, D2, D3, D4" LogProcess="True" ActionType="LogMessage" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="[F] 注册回调（机制）" Id="be7ace66-0669-48f3-96e8-2e8ba502b244" RegularExpression="^.{15}\S+ 01">
<Actions>
<Action OrderNumber="1" ExecScriptExpression="using System;&#xD;&#xA;using System.Globalization;&#xD;&#xA;using static System.Math;&#xD;&#xA;using static Triggernometry.PluginBridges.BridgeFFXIV;&#xD;&#xA;using static Triggernometry.Interpreter.StaticHelpers;&#xD;&#xA;using Triggernometry;&#xD;&#xA;&#xD;&#xA;RealPlugin.plug.RegisterNamedCallback(&#xD;&#xA;    &quot;U7a2_IceSkatingSolver&quot;, &#xD;&#xA;    new Action&lt;object, string&gt;(U7a2_IceSkatingSolver.Callback), &#xD;&#xA;    null, &#xD;&#xA;    registrant: &quot;绝伊甸宝宝椅&quot;&#xD;&#xA;);&#xD;&#xA;&#xD;&#xA;public static class U7a2_IceSkatingSolver&#xD;&#xA;{&#xD;&#xA;    static int ShivaDir8;&#xD;&#xA;    static double Shivaθ;&#xD;&#xA;&#xD;&#xA;    public static void Callback(object _, string command)&#xD;&#xA;    {&#xD;&#xA;        switch (command.ToLower().Trim())&#xD;&#xA;        {&#xD;&#xA;            case &quot;init&quot;: Init(); break;&#xD;&#xA;            case &quot;solve&quot;: Solve(); break;&#xD;&#xA;            default: throw new ArgumentException(&quot;U7a2_IceSkatingSolver: Invalid command. Expecting \&quot;init\&quot; or \&quot;solve\&quot;.&quot;);&#xD;&#xA;        }&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    static void Init()&#xD;&#xA;    {&#xD;&#xA;        ShivaDir8 = (int)ParseDouble(GetScalarVariable(false, &quot;U7a2_滑冰_冰dir8&quot;));&#xD;&#xA;        Shivaθ = (ShivaDir8 - 4) * PI / 4;&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    static void Solve()&#xD;&#xA;    {&#xD;&#xA;        var me = GetIdEntity(PlayerHexId);&#xD;&#xA;        var absPos = new Point { X = ParseDouble(me.GetValue(&quot;x&quot;)), Y = ParseDouble(me.GetValue(&quot;y&quot;)) };&#xD;&#xA;        var relPos = absPos.AbsToRel();&#xD;&#xA;        if (relPos.Y &lt; -Abs(relPos.X) - 10) // 背面&#xD;&#xA;        {&#xD;&#xA;            RecordState(PositionStateEnum.Back);&#xD;&#xA;            return;&#xD;&#xA;        }&#xD;&#xA;        if (relPos.X * relPos.X + relPos.Y * relPos.Y &lt;= 12 * 12) // 中心&#xD;&#xA;        {&#xD;&#xA;            RecordState(PositionStateEnum.Center);&#xD;&#xA;            return;&#xD;&#xA;        }&#xD;&#xA;        if (!CanSkateToShivaBack(relPos.X, relPos.Y))&#xD;&#xA;        {&#xD;&#xA;            RecordState(PositionStateEnum.Side);&#xD;&#xA;            return;&#xD;&#xA;        }&#xD;&#xA;        var safestRelθ = SolveSafestAngle(relPos.X, relPos.Y);&#xD;&#xA;        var safestAbsθ = safestRelθ + (Shivaθ - PI);&#xD;&#xA;        RecordState(PositionStateEnum.Front, safestAbsθ);&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    enum PositionStateEnum { &#xD;&#xA;        /// &lt;summary&gt; 希瓦身后 &lt;/summary&gt;&#xD;&#xA;        Back,&#xD;&#xA;        /// &lt;summary&gt; 希瓦前方，可一次滑冰到背后的区域 &lt;/summary&gt;&#xD;&#xA;        Front,&#xD;&#xA;        /// &lt;summary&gt; 场中 12 米内且不在身后，无解&lt;/summary&gt;&#xD;&#xA;        Center,&#xD;&#xA;        /// &lt;summary&gt; 希瓦侧面，不可一次滑冰到背后的区域 &lt;/summary&gt;&#xD;&#xA;        Side&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    static void RecordState(PositionStateEnum state, double θ = 0)&#xD;&#xA;    { &#xD;&#xA;        SetScalarVariable(false, &quot;U7a2_滑冰_PositionState&quot;, state);&#xD;&#xA;        SetScalarVariable(false, &quot;U7a2_滑冰_Safestθ&quot;, θ.ToString(CultureInfo.InvariantCulture));&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    /// &lt;summary&gt; &#xD;&#xA;    /// 判断是否可以从指定位置滑向希瓦背后。&lt;br /&gt;&#xD;&#xA;    /// 判据为希瓦背后的场地边缘上所有点为圆心、半径 32 的圆周在南侧场地形成的包络线，&lt;br /&gt;&#xD;&#xA;    /// 以抛物线近似计算（留有一定容错）。&#xD;&#xA;    /// &lt;/summary&gt;&#xD;&#xA;    static bool CanSkateToShivaBack(double relX, double relY) =&gt; -relY &lt; 0.03 * relX * relX - 12.1;&#xD;&#xA;&#xD;&#xA;    /// &lt;summary&gt; 根据指定位置， &lt;/summary&gt;&#xD;&#xA;    static double SolveSafestAngle(double relX, double relY)&#xD;&#xA;    {&#xD;&#xA;        // 希瓦处于相对北 (0, -10)&#xD;&#xA;        // 若当前处于左半场：对称到右半场计算&#xD;&#xA;        if (relX &lt; 0)  &#xD;&#xA;            return -SolveSafestAngle(-relX, relY);&#xD;&#xA;        // 希瓦处于相对北，身后有三条边缘：上方场地圆周、左侧 y = x - 10，右侧 y = -x - 10&#xD;&#xA;        // 若当前处于以身后区域右侧尖端为圆心、32 为半径的圆形区域内：&#xD;&#xA;        //   滑冰角度范围由当前所处位置为圆心、半径 32 的圆周 与 左侧边缘、上方圆周的两个交点确定.&#xD;&#xA;        // 若当前处于以身后区域右侧尖端为圆心、32 为半径的圆形区域外：&#xD;&#xA;        //   滑冰角度范围由当前所处位置为圆心、半径 32 的圆周 与 左右两边缘的交点确定.&#xD;&#xA;        bool isInside = (relX - 8.23) * (relX - 8.23) + (relY + 18.23) * (relY + 18.23) &lt;= 32 * 32;&#xD;&#xA;        Point left = 滑冰圆与左边界交点(relX, relY);&#xD;&#xA;        Point right = isInside ? 滑冰圆与场地交点(relX, relY) : 滑冰圆与右边界交点(relX, relY);&#xD;&#xA;        var leftθ = Atan2(left.X - relX, left.Y - relY);&#xD;&#xA;        var rightθ = Atan2(right.X - relX, right.Y - relY);&#xD;&#xA;        var diff = (rightθ - leftθ + 4 * PI) % (2 * PI);&#xD;&#xA;        if (diff &gt; PI) diff -= 2 * PI;&#xD;&#xA;        return leftθ + diff / 2;&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    static Point 滑冰圆与左边界交点(double x0, double y0)&#xD;&#xA;    {&#xD;&#xA;        // (x-x0)^2 + (y-y0)^2 = 32^2 与 y = x - 10 的交点（靠上的）&#xD;&#xA;        var a = 2.0;&#xD;&#xA;        var b = 2 * (10 - x0 - y0);&#xD;&#xA;        var c = y0 * y0 + (x0 - 10) * (x0 - 10) - 1024;&#xD;&#xA;        var y = (-b - Sqrt(b * b - 4 * a * c)) / (2 * a);&#xD;&#xA;        var x = y + 10;&#xD;&#xA;        return new Point { X = x, Y = y };&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    static Point 滑冰圆与右边界交点(double x0, double y0)&#xD;&#xA;    {&#xD;&#xA;        // (x-x0)^2 + (y-y0)^2 = 32^2 与 y = x + 10 的交点（靠上的）&#xD;&#xA;        var symPoint = 滑冰圆与左边界交点(-x0, y0);&#xD;&#xA;        return new Point { X = -symPoint.X, Y = symPoint.Y };&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    static Point 滑冰圆与场地交点(double x0, double y0)&#xD;&#xA;    {&#xD;&#xA;        // (x-x0)^2 + (y-y0)^2 = 32^2 与 x^2 + y^2 = 20^2 的交点（靠上的）&#xD;&#xA;        var squareSum = x0 * x0 + y0 * y0;&#xD;&#xA;        var a = 4 * squareSum;&#xD;&#xA;        var b = -4 * x0 * (squareSum - 624);&#xD;&#xA;        var c = (squareSum - 624) * (squareSum - 624) - 1600 * y0 * y0;&#xD;&#xA;        var x = (-b + Sqrt(b * b - 4 * a * c)) / (2 * a);&#xD;&#xA;        var y = -Sqrt(400 - x * x);&#xD;&#xA;        return new Point { X = x, Y = y };&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    struct Point&#xD;&#xA;    {&#xD;&#xA;        public double X;&#xD;&#xA;        public double Y;&#xD;&#xA;&#xD;&#xA;        /// &lt;summary&gt; 以场中为中心、希瓦为相对北，将场地坐标转换为相对坐标。&lt;/summary&gt;&#xD;&#xA;        public Point AbsToRel()&#xD;&#xA;        {&#xD;&#xA;            var sin = Sin(Shivaθ);&#xD;&#xA;            var cos = Cos(Shivaθ);&#xD;&#xA;            return new Point { &#xD;&#xA;                X = -(X - 100) * cos + (Y - 100) * sin,&#xD;&#xA;                Y = -(X - 100) * sin - (Y - 100) * cos,&#xD;&#xA;            };&#xD;&#xA;        }&#xD;&#xA;&#xD;&#xA;        /// &lt;summary&gt; 以场中为中心、希瓦为相对北，将相对坐标转换为场地坐标。&lt;/summary&gt;&#xD;&#xA;        public Point RelToAbs()&#xD;&#xA;        {&#xD;&#xA;            var sin = Sin(Shivaθ);&#xD;&#xA;            var cos = Cos(Shivaθ);&#xD;&#xA;            return new Point&#xD;&#xA;            {&#xD;&#xA;                X = -X * cos - Y * sin + 100,&#xD;&#xA;                Y =  X * sin - Y * cos + 100,&#xD;&#xA;            };&#xD;&#xA;        }&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    static double ParseDouble(object s) =&gt; double.Parse(s.ToString(), NumberStyles.Float, CultureInfo.InvariantCulture);&#xD;&#xA;}" ActionType="ExecuteScript" Asynchronous="False" Description="U7a2_IceSkatingSolver　　　P2 滑冰指示方向" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ecallback:U7a2_IceSkatingSolver}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="2" ExecScriptExpression="using System;&#xD;&#xA;using System.Collections.Generic;&#xD;&#xA;using System.Linq;&#xD;&#xA;using System.Numerics;&#xD;&#xA;using System.Globalization;&#xD;&#xA;using Triggernometry;&#xD;&#xA;using Triggernometry.FFXIV;&#xD;&#xA;using static Triggernometry.Debug;&#xD;&#xA;using static System.Math;&#xD;&#xA;using static Triggernometry.Interpreter.StaticHelpers;&#xD;&#xA;using static Triggernometry.PluginBridges.BridgeFFXIV;&#xD;&#xA;using System.Data;&#xD;&#xA;&#xD;&#xA;RealPlugin.plug.RegisterNamedCallback(&#xD;&#xA;    &quot;U7a3_一运_Analyzer&quot;,&#xD;&#xA;    new Action&lt;object, string&gt;(U7a3_一运_Analyzer.Callback),&#xD;&#xA;    null,&#xD;&#xA;    registrant: &quot;绝伊甸警察&quot;&#xD;&#xA;);&#xD;&#xA;&#xD;&#xA;public class U7a3_一运_Analyzer&#xD;&#xA;{&#xD;&#xA;    public static bool Debug = true;&#xD;&#xA;&#xD;&#xA;    public static U7a3_一运_Analyzer Instance;&#xD;&#xA;    public static void Callback(object _, string data)&#xD;&#xA;    {&#xD;&#xA;        var args = data.Split('\n')&#xD;&#xA;            .Select(line =&gt; line.Split(new[] { '=' }, 2))&#xD;&#xA;            .Where(parts =&gt; parts.Length == 2)&#xD;&#xA;            .ToDictionary(&#xD;&#xA;                parts =&gt; parts[0].Trim().ToLower(),&#xD;&#xA;                parts =&gt; parts[1].Trim()&#xD;&#xA;            );&#xD;&#xA;        if (Debug)&#xD;&#xA;        {&#xD;&#xA;            Command($&quot;/e [Debug] {string.Join(&quot; | &quot;, args.Select(kv =&gt; kv.Key + &quot; = &quot; + kv.Value))}&quot;);&#xD;&#xA;        }&#xD;&#xA;        switch (args[&quot;command&quot;].ToLower())&#xD;&#xA;        {&#xD;&#xA;            case &quot;init&quot;: Instance = new U7a3_一运_Analyzer(); break;&#xD;&#xA;            case &quot;rotate&quot;: Instance.ParseRotate(args); break;&#xD;&#xA;            case &quot;ability&quot;: Instance.ParseAbility(args); break;&#xD;&#xA;            case &quot;return&quot;: Instance.ParseReturn(args); break;&#xD;&#xA;        }&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    /// &lt;summary&gt; 是否为国际服客户端，影响播报简繁体。 &lt;/summary&gt;&#xD;&#xA;    bool IsGlobal;&#xD;&#xA;    /// &lt;summary&gt; 按照 MT-D4 排序的八个玩家。 &lt;/summary&gt;&#xD;&#xA;    List&lt;Player&gt; Party;&#xD;&#xA;    /// &lt;summary&gt; 按照绝对 Dir8 排序的八个玩家。 &lt;/summary&gt;&#xD;&#xA;    List&lt;Player&gt; PlayersByDir8;&#xD;&#xA;    /// &lt;summary&gt; 按照绝对 Dir8 排序的八个沙漏 ID。 &lt;/summary&gt;&#xD;&#xA;    List&lt;HourGlass&gt; HourGlassesByDir8;&#xD;&#xA;&#xD;&#xA;    Dictionary&lt;string, Player&gt; PlayersById = new Dictionary&lt;string, Player&gt;();&#xD;&#xA;    Dictionary&lt;string, HourGlass&gt; HourGlassesById = new Dictionary&lt;string, HourGlass&gt;();&#xD;&#xA;    Dictionary&lt;Debuff, Player&gt; PlayersByDebuff = Enum.GetValues(typeof(Debuff)).Cast&lt;Debuff&gt;().ToDictionary(d =&gt; d, d =&gt; (Player)null);&#xD;&#xA;&#xD;&#xA;    /// &lt;summary&gt; 连线的相对正北沙漏所处的绝对 Dir8。 &lt;/summary&gt;&#xD;&#xA;    int NorthDir8;&#xD;&#xA;&#xD;&#xA;    /// &lt;summary&gt; 每次技能应判定到的 ID &lt;/summary&gt;&#xD;&#xA;    HashSet&lt;string&gt; Stack1, Stack2, Stack3, Stack4, Laser1, Laser2, Laser3;&#xD;&#xA;&#xD;&#xA;    enum AbilityEnum&#xD;&#xA;    {&#xD;&#xA;        黑暗神圣 = 0x9D55,&#xD;&#xA;        初始激光 = 0x9D2B,&#xD;&#xA;        旋转激光 = 0x9D64,&#xD;&#xA;        黑暗狂水 = 0x9D4F,&#xD;&#xA;        暗炎喷发 = 0x9D52,&#xD;&#xA;        黑暗爆炎 = 0x9D54,&#xD;&#xA;        黑暗冰封 = 0x9D57,&#xD;&#xA;        记录回返,&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    /// &lt;summary&gt; 沙漏连线后，根据触发器存储的变量初始化全部状态（除旋转方向）。 &lt;/summary&gt;&#xD;&#xA;    U7a3_一运_Analyzer()&#xD;&#xA;    {&#xD;&#xA;        IsGlobal = GetMyself().GetValue(&quot;name&quot;).ToString().Contains(&quot; &quot;);&#xD;&#xA;        NorthDir8 = int.Parse(GetScalarVariable(false, &quot;U7a3_一运_dir8&quot;));&#xD;&#xA;        var partyIdxToId = GetListVariable(false, &quot;party&quot;).Values.Select(v =&gt; $&quot;{v}&quot;).ToList();&#xD;&#xA;        var partyIdxToDebuff = GetListVariable(false, &quot;U7a3_一运_全队点名&quot;).Values&#xD;&#xA;            .Select(v =&gt; (Debuff)int.Parse($&quot;{v}&quot;))&#xD;&#xA;            .ToList();&#xD;&#xA;        var 沙漏ByDir8 = GetDictVariable(false, &quot;U7a3_一运_沙漏dir8&quot;).Values&#xD;&#xA;            .OrderBy(v =&gt; $&quot;{v.Value}&quot;) // 按 Dir8 排序&#xD;&#xA;            .Select(v =&gt; $&quot;{v.Key}&quot;) // 取 ID&#xD;&#xA;            .ToList();&#xD;&#xA;&#xD;&#xA;        List&lt;Player&gt; players = new List&lt;Player&gt;();&#xD;&#xA;        List&lt;HourGlass&gt; hourGlasses = new List&lt;HourGlass&gt;();&#xD;&#xA;&#xD;&#xA;        for (int idx = 0; idx &lt; 8; idx++)&#xD;&#xA;        {&#xD;&#xA;            var playerID = partyIdxToId[idx];&#xD;&#xA;            var debuff = partyIdxToDebuff[idx];&#xD;&#xA;            var relDir8 = DebuffToRelDir8[debuff];&#xD;&#xA;            var dir8 = (relDir8 + NorthDir8) % 8;&#xD;&#xA;            var vdPlayer = GetIdEntity(playerID);&#xD;&#xA;            var name = vdPlayer.GetValue(&quot;name&quot;).ToString();&#xD;&#xA;            var job = Job.GetJob(vdPlayer.GetValue(&quot;jobEN3&quot;).ToString());&#xD;&#xA;            Player player = new Player&#xD;&#xA;            {&#xD;&#xA;                HexID = playerID,&#xD;&#xA;                Dir8 = dir8,&#xD;&#xA;                Debuff = debuff,&#xD;&#xA;                Role = (RoleEnum)idx,&#xD;&#xA;                Name = name,&#xD;&#xA;                Job = IsGlobal ? job.NameTCN2 : job.NameCN2&#xD;&#xA;            };&#xD;&#xA;            HourGlass hourGlass = new HourGlass&#xD;&#xA;            {&#xD;&#xA;                Dir8 = dir8,&#xD;&#xA;                HexID = 沙漏ByDir8[dir8],&#xD;&#xA;                Speed = RelDir8ToSpeed[relDir8],&#xD;&#xA;                Player = player,&#xD;&#xA;            };&#xD;&#xA;            player.HourGlass = hourGlass;&#xD;&#xA;            players.Add(player);&#xD;&#xA;            hourGlasses.Add(hourGlass);&#xD;&#xA;            PlayersByDebuff[debuff] = player;&#xD;&#xA;            PlayersById[playerID] = player;&#xD;&#xA;            HourGlassesById[沙漏ByDir8[dir8]] = hourGlass;&#xD;&#xA;        }&#xD;&#xA;&#xD;&#xA;        PlayersByDebuff[Debuff.短或冰TH] = PlayersByDebuff[Debuff.短TH] ?? PlayersByDebuff[Debuff.冰TH];&#xD;&#xA;        PlayersByDebuff[Debuff.长或冰D] = PlayersByDebuff[Debuff.长D] ?? PlayersByDebuff[Debuff.冰D];&#xD;&#xA;&#xD;&#xA;        Party = players.OrderBy(p =&gt; p.Role).ToList();&#xD;&#xA;        PlayersByDir8 = players.OrderBy(p =&gt; p.Dir8).ToList();&#xD;&#xA;        HourGlassesByDir8 = hourGlasses.OrderBy(h =&gt; h.Dir8).ToList();&#xD;&#xA;&#xD;&#xA;        Stack1 = new HashSet&lt;string&gt;(new Debuff[] { Debuff.冰TH, Debuff.中TH, Debuff.长高TH, Debuff.长低TH, Debuff.中D, Debuff.长或冰D }&#xD;&#xA;            .Select(d =&gt; PlayersByDebuff[d]?.HexID).Where(id =&gt; id != null));&#xD;&#xA;        Stack2 = new HashSet&lt;string&gt;(new Debuff[] { Debuff.短或冰TH, Debuff.长高TH, Debuff.长低TH, Debuff.短高D, Debuff.短低D, Debuff.长或冰D }&#xD;&#xA;            .Select(d =&gt; PlayersByDebuff[d]?.HexID).Where(id =&gt; id != null));&#xD;&#xA;        Stack3 = new HashSet&lt;string&gt;(new Debuff[] { Debuff.短或冰TH, Debuff.中TH, Debuff.短高D, Debuff.短低D, Debuff.中D, Debuff.冰D }.&#xD;&#xA;            Select(d =&gt; PlayersByDebuff[d]?.HexID).Where(id =&gt; id != null));&#xD;&#xA;        Stack4 = new HashSet&lt;string&gt;(new Debuff[] { Debuff.长高TH, Debuff.长低TH, Debuff.中D, Debuff.长或冰D }&#xD;&#xA;            .Select(d =&gt; PlayersByDebuff[d]?.HexID).Where(id =&gt; id != null));&#xD;&#xA;        Laser1 = new HashSet&lt;string&gt;(new Debuff[] { Debuff.长高TH, Debuff.长低TH, Debuff.长或冰D }&#xD;&#xA;            .Select(d =&gt; PlayersByDebuff[d]?.HexID).Where(id =&gt; id != null));&#xD;&#xA;        Laser2 = new HashSet&lt;string&gt;(new Debuff[] { Debuff.短或冰TH, Debuff.短高D, Debuff.短低D }&#xD;&#xA;            .Select(d =&gt; PlayersByDebuff[d]?.HexID).Where(id =&gt; id != null));&#xD;&#xA;        Laser3 = new HashSet&lt;string&gt;(new Debuff[] { Debuff.中TH, Debuff.中D }&#xD;&#xA;            .Select(d =&gt; PlayersByDebuff[d]?.HexID).Where(id =&gt; id != null));&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    /// &lt;summary&gt; 技能的第几次释放。 &lt;/summary&gt;&#xD;&#xA;    Dictionary&lt;AbilityEnum, int&gt; AbilityCount = Enum.GetValues(typeof(AbilityEnum)).Cast&lt;AbilityEnum&gt;().ToDictionary(ability =&gt; ability, ability =&gt; 0);&#xD;&#xA;&#xD;&#xA;    void ParseAbility(Dictionary&lt;string, string&gt; args)&#xD;&#xA;    {&#xD;&#xA;        var ability = (AbilityEnum)int.Parse(args[&quot;ability&quot;], NumberStyles.HexNumber);&#xD;&#xA;        AbilityCount[ability]++;&#xD;&#xA;        var targetCount = int.Parse(args[&quot;count&quot;]);&#xD;&#xA;        // if (Debug) Command($&quot;/e [Debug] {ability} #{AbilityCount[ability]}, count = {targetCount}&quot;);&#xD;&#xA;        if (targetCount == 0) return;&#xD;&#xA;&#xD;&#xA;        var target = PlayersById[args[&quot;target&quot;]];&#xD;&#xA;        var others = Context.SplitArguments(args[&quot;others&quot;]).Select(pid =&gt; PlayersById[pid]).ToList();&#xD;&#xA;        List&lt;Player&gt; targets = new List&lt;Player&gt; { target }.Concat(others).ToList();&#xD;&#xA;&#xD;&#xA;        try&#xD;&#xA;        {&#xD;&#xA;            string error;&#xD;&#xA;            switch (ability)&#xD;&#xA;            {&#xD;&#xA;                case AbilityEnum.初始激光:&#xD;&#xA;                    {&#xD;&#xA;                        var turn = new int[] { 0, 1, 1, 1, 2, 2, 2, 3, 3 }[AbilityCount[ability]];&#xD;&#xA;                        var correctPlayers = new HashSet&lt;string&gt;[] { null, Laser1, Laser2, Laser3 }[turn]; // 以防打法不同&#xD;&#xA;                        var srcPos = GetCurrentRelPos(args[&quot;source&quot;]);&#xD;&#xA;                        var hourglass = HourGlassesByDir8[(int)Round(Atan2(srcPos.X, srcPos.Y) / PI * 4 + 4) % 8];&#xD;&#xA;                        var correctPlayer = hourglass.Player;&#xD;&#xA;                        targets.ForEach(p =&gt; p.UpdatePos());&#xD;&#xA;                        correctPlayer.UpdatePos();&#xD;&#xA;&#xD;&#xA;                        hourglass.BaitPlayer = target;&#xD;&#xA;                        hourglass.BaitDistance = Vector2.Distance(target.TempRelPos, hourglass.RelPos);&#xD;&#xA;                        var vec = target.TempRelPos - hourglass.RelPos;&#xD;&#xA;                        hourglass.Baitθ = ((Atan2(vec.X, vec.Y) - (hourglass.Dir8 / 4 * PI)) % (2 * PI) + 2 * PI) % (2 * PI) - PI;&#xD;&#xA;&#xD;&#xA;                        List&lt;string&gt; errors = new List&lt;string&gt;();&#xD;&#xA;                        bool isDirCorrect = (hourglass.Baitθ * (hourglass.Is顺 ? 1 : -1)) &gt;= 60 / 180 * PI &amp;&amp; (hourglass.Baitθ * (hourglass.Is顺 ? 1 : -1)) &lt;= 90 / 180 * PI;&#xD;&#xA;                        bool isTargetCorrect = correctPlayers.Contains(target.HexID);&#xD;&#xA;                        // if (Debug) Command($&quot;/e [Laser1] isDirCorrect = {isDirCorrect}; isTargetCorrect = {isTargetCorrect}; targetCount = {targetCount}&quot;);&#xD;&#xA;                        if (isDirCorrect &amp;&amp; isTargetCorrect &amp;&amp; targetCount == 1) return;&#xD;&#xA;&#xD;&#xA;                        if (!isDirCorrect)&#xD;&#xA;                        {&#xD;&#xA;                            if (Abs(hourglass.Baitθ) &gt; PI / 2)&#xD;&#xA;                                errors.Add($&quot;方向错误：射向场中&quot;);&#xD;&#xA;                            else if (hourglass.Baitθ * (hourglass.Is顺 ? 1 : -1) &lt; 0)&#xD;&#xA;                                errors.Add($&quot;方向错误：引导反向&quot;);&#xD;&#xA;                            else&#xD;&#xA;                                errors.Add($&quot;方向错误：应偏 ~80°，实偏 {Abs(hourglass.Baitθ):0}°&quot;);&#xD;&#xA;                            hourglass.BaitDirectionErrorDesc = errors[0];&#xD;&#xA;                        }&#xD;&#xA;&#xD;&#xA;                        if (!isTargetCorrect)&#xD;&#xA;                        {&#xD;&#xA;                            if (correctPlayer.TempR &lt; 9.5 || Abs(correctPlayer.TempRelθ) &gt; PI / 8)&#xD;&#xA;                                errors.Add($&quot;引导者错误：{correctPlayer.Role}（{correctPlayer.Job}）没去引导或距离过远&quot;);&#xD;&#xA;                            else if (hourglass.BaitDistance &lt;= 4.3)&#xD;&#xA;                                errors.Add($&quot;引导者错误：{target.Role}（{target.Job}）距沙漏 {hourglass.BaitDistance:0.0} m，不应引导&quot;);&#xD;&#xA;                            else&#xD;&#xA;                                errors.Add($&quot;引导者错误：情况复杂，无法判断&quot;);&#xD;&#xA;&#xD;&#xA;                        }&#xD;&#xA;&#xD;&#xA;                        if (targetCount &gt; 1 &amp;&amp; targetCount &lt;= 3)&#xD;&#xA;                        {&#xD;&#xA;                            errors.Add($&quot;命中目标 × {targetCount}：\n　 {string.Join(&quot;\n　》 &quot;, targets.Select(p =&gt; p.TempDesc))}&quot;);&#xD;&#xA;                        }&#xD;&#xA;                        else if (targetCount &gt; 3)&#xD;&#xA;                        {&#xD;&#xA;                            errors.Add($&quot;命中目标 × {targetCount}：\n　》 {string.Join(&quot;　&quot;, targets.Select(p =&gt; p.Role))}&quot;);&#xD;&#xA;                        }&#xD;&#xA;&#xD;&#xA;                        error = $&quot;【{ability}】错误（{Dir8Desc[hourglass.Dir8]}）\n{string.Join(&quot;\n&quot;, errors)}&quot;;&#xD;&#xA;                    }&#xD;&#xA;                    break;&#xD;&#xA;                case AbilityEnum.旋转激光:&#xD;&#xA;                    {&#xD;&#xA;                        var turn = new int[] { 0, 1, 1, 1, 2, 2, 2, 3, 3 }[(int)Ceiling(AbilityCount[ability] / 8.0)];&#xD;&#xA;                        var subturn = new int[] { 0, 2, 2, 2, 3, 3, 3, 4, 4, 4, 5, 5, 5, 6, 6, 6, 7, 7, 7, 8, 8, 8, 2, 2, 2, 3, 3, 3, 4, 4, 4, 5, 5, 5, 6, 6, 6, 7, 7, 7, 8, 8, 8, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8 }[AbilityCount[ability]];&#xD;&#xA;                        var correctPlayers = new HashSet&lt;string&gt;[] { null, Laser1, Laser2, Laser3 }[turn];&#xD;&#xA;                        var srcPos = GetCurrentRelPos(args[&quot;source&quot;]);&#xD;&#xA;                        var hourglass = HourGlassesByDir8[(int)Round(Atan2(srcPos.X, srcPos.Y) / PI * 4 + 4) % 8];&#xD;&#xA;                        targets.ForEach(p =&gt; p.UpdatePos());&#xD;&#xA;&#xD;&#xA;                        error = $&quot;【{ability}】 {new string[] { null, &quot;短&quot;, &quot;中&quot;, &quot;长&quot; }[turn]} #{subturn} 》 {targetCount} 人&quot;;&#xD;&#xA;&#xD;&#xA;                        bool isDirCorrect = (hourglass.Baitθ * (hourglass.Is顺 ? 1 : -1)) &gt;= 60 / 180 * PI &amp;&amp; (hourglass.Baitθ * (hourglass.Is顺 ? 1 : -1)) &lt;= 90 / 180 * PI;&#xD;&#xA;                        if (hourglass.BaitDirectionErrorDesc != null)&#xD;&#xA;                            error += $&quot;引导{hourglass.BaitDirectionErrorDesc}&quot;;&#xD;&#xA;                        if (targetCount == 1 &amp;&amp; target == hourglass.BaitPlayer &amp;&amp; hourglass.BaitDistance &lt;= 4.3)&#xD;&#xA;                            error += $&quot;\n　》 {target.Role}（{target.Job}）引导后没躲开&quot;;&#xD;&#xA;                        else if (targetCount &lt;= 2)&#xD;&#xA;                            error += $&quot;\n　》 {string.Join(&quot;\n　》 &quot;, targets.Select(p =&gt; p.TempDesc))}&quot;;&#xD;&#xA;                        else&#xD;&#xA;                            error += $&quot;\n　》 {string.Join(&quot;　&quot;, targets.Select(p =&gt; p.Role))}&quot;;&#xD;&#xA;                    }&#xD;&#xA;                    break;&#xD;&#xA;                case AbilityEnum.黑暗冰封:&#xD;&#xA;                    {&#xD;&#xA;                        var centerPlayerIds = Stack2;&#xD;&#xA;                        var ice = PlayersByDebuff[Debuff.冰D] ?? PlayersByDebuff[Debuff.冰TH];&#xD;&#xA;                        ice.UpdatePos();&#xD;&#xA;                        targets.ForEach(p =&gt; p.UpdatePos());&#xD;&#xA;&#xD;&#xA;                        error = $&quot;【{ability}】》 {targetCount} 人&quot;;&#xD;&#xA;                        error += $&quot;\n点名 {ice.TempDesc}&quot;;&#xD;&#xA;&#xD;&#xA;                        error += targets.Count &gt;= 3&#xD;&#xA;                            ? $&quot;\n　》 {string.Join(&quot;　&quot;, targets.Select(p =&gt; p.Role))}&quot;&#xD;&#xA;                            : $&quot;\n　》 {string.Join(&quot;\n　》 &quot;, targets.Select(p =&gt; p.TempDesc))}&quot;;&#xD;&#xA;&#xD;&#xA;                        var targetsShouldClose = targets.Where(p =&gt; p.TempR &gt;= 2 &amp;&amp; centerPlayerIds.Contains(p.HexID));&#xD;&#xA;                        var targetsShouldFar = targets.Where(p =&gt; p.TempR &lt;= 12 &amp;&amp; !centerPlayerIds.Contains(p.HexID));&#xD;&#xA;                        error += $&quot;\n参考原因：&quot;;&#xD;&#xA;                        if (ice.TempR &gt;= 3)&#xD;&#xA;                            error += $&quot;\n　　 {ice.Role} 月环点名站位过远&quot;;&#xD;&#xA;                        if (targetsShouldClose.Count() &gt; 0)&#xD;&#xA;                            error += $&quot;\n　　 {string.Join(&quot;　&quot;, targetsShouldClose.Select(p =&gt; p.Role))} 分摊站位过远&quot;;&#xD;&#xA;                        if (targetsShouldFar.Count() &gt; 0)&#xD;&#xA;                            error += $&quot;\n　　 {string.Join(&quot;　&quot;, targetsShouldFar.Select(p =&gt; p.Role))} 分散站位过近&quot;;&#xD;&#xA;                    }&#xD;&#xA;                    break;&#xD;&#xA;                case AbilityEnum.黑暗神圣:&#xD;&#xA;                case AbilityEnum.黑暗狂水:&#xD;&#xA;                    {&#xD;&#xA;                        var turn = ability == AbilityEnum.黑暗狂水 ? 4 : AbilityCount[ability];&#xD;&#xA;                        var correctTargets = new HashSet&lt;string&gt;[] { null, Stack1, Stack2, Stack3, Stack4 }[turn];&#xD;&#xA;                        var extraPlayers = targets.Where(p =&gt; !correctTargets.Contains(p.HexID)).ToList();&#xD;&#xA;                        var absentPlayers = correctTargets.Select(id =&gt; PlayersById[id]).Where(p =&gt; !targets.Contains(p)).ToList();&#xD;&#xA;                        if (Debug) Command($&quot;/e [Stack]\nturn: {turn}\nextra: {string.Join(&quot; &quot;, extraPlayers.Select(p =&gt; p.HexID))}\nabsent: {string.Join(&quot; &quot;, absentPlayers.Select(p =&gt; p.HexID))}&quot;);&#xD;&#xA;                        if (extraPlayers.Count == 0 &amp;&amp; absentPlayers.Count == 0 || extraPlayers.Count == 0 &amp;&amp; absentPlayers.Count == 1 &amp;&amp; correctTargets.Count == 6) return;&#xD;&#xA;&#xD;&#xA;                        targets.Concat(absentPlayers).ToList().ForEach(p =&gt; p.UpdatePos());&#xD;&#xA;                        error = $&quot;【{ability}】》 {targetCount} 人 （应有 {correctTargets.Count} 人）&quot;;&#xD;&#xA;                        error += $&quot;\n点名 {target.TempDesc}&quot;;&#xD;&#xA;                        if (extraPlayers.Count &gt; 0)&#xD;&#xA;                            error += $&quot;\n多余：\n　》 {string.Join(&quot;\n　》 &quot;, extraPlayers.Select(p =&gt; p.TempDesc))}&quot;;&#xD;&#xA;                        if (absentPlayers.Count &gt; 0)&#xD;&#xA;                            error += $&quot;\n缺少：&quot; + (absentPlayers.Count &gt;= 3&#xD;&#xA;                                ? $&quot;\n　－ {string.Join(&quot;　&quot;, absentPlayers.Select(p =&gt; p.Role))}&quot;&#xD;&#xA;                                : $&quot;\n　－ {string.Join(&quot;\n　－ &quot;, absentPlayers.Select(p =&gt; p.TempDesc))}&quot;);&#xD;&#xA;&#xD;&#xA;                        var extraPlayersClose = extraPlayers.Where(p =&gt; p.TempR &lt;= 8);&#xD;&#xA;                        var absentPlayersFar = absentPlayers.Where(p =&gt; p.TempR &gt;= 3);&#xD;&#xA;                        error += $&quot;\n参考原因：&quot;;&#xD;&#xA;                        if (target.TempR &gt;= 3)&#xD;&#xA;                            error += $&quot;\n　　 {target.Role} 分摊点名站位过远&quot;;&#xD;&#xA;                        if (extraPlayersClose.Count() &gt; 0)&#xD;&#xA;                            error += $&quot;\n　　 {string.Join(&quot;　&quot;, extraPlayersClose.Select(p =&gt; p.Role))} 分散站位过近&quot;;&#xD;&#xA;                        if (absentPlayersFar.Count() &gt; 0)&#xD;&#xA;                            error += $&quot;\n　　 {string.Join(&quot;　&quot;, absentPlayersFar.Select(p =&gt; p.Role))} 分摊站位过远&quot;;&#xD;&#xA;                    }&#xD;&#xA;                    break;&#xD;&#xA;                case AbilityEnum.黑暗爆炎:&#xD;&#xA;                    {&#xD;&#xA;                        var turn = PlayersByDebuff[Debuff.冰TH] == null&#xD;&#xA;                            ? new int[] { 0, 1, 1, 1, 2, 2, 3, 3 }[AbilityCount[ability]]&#xD;&#xA;                            : new int[] { 0, 1, 1, 2, 2, 3, 3, 3 }[AbilityCount[ability]];&#xD;&#xA;                        var wrongTargets = new HashSet&lt;string&gt;[] { null, Stack1, Stack2, Stack3 }[turn];&#xD;&#xA;                        if (targetCount == 1) return;&#xD;&#xA;&#xD;&#xA;                        targets.ForEach(p =&gt; p.UpdatePos());&#xD;&#xA;                        string reason;&#xD;&#xA;                        if (wrongTargets.Contains(target.HexID)) // 第一目标没有点名&#xD;&#xA;                            reason = &quot;乱点名&quot;;&#xD;&#xA;                        else if (target.TempR &lt; 12) // 点名者太近&#xD;&#xA;                            reason = target.TempR &gt; 6 ? $&quot;{target.Role} 出慢了&quot; : $&quot;{target.Role} 未出人群&quot;;&#xD;&#xA;                        else&#xD;&#xA;                        {&#xD;&#xA;                            var furthestPerson = others.OrderByDescending(p =&gt; p.TempR).FirstOrDefault();&#xD;&#xA;                            if (Abs(target.TempRelθ) &lt; PI / 10) // 点名者站位没错&#xD;&#xA;                                reason = furthestPerson.TempR &gt; 9.5 ? $&quot;{furthestPerson.Role}方向错误&quot; : furthestPerson.TempR &gt; 3 ? $&quot;{furthestPerson.Role}未贴近中心&quot; : &quot;情况复杂，无法判断&quot;;&#xD;&#xA;                            else if (furthestPerson.TempR &gt; 9.5)&#xD;&#xA;                                reason = $&quot;{target.Role}方向错误，误伤 {furthestPerson.Role}&quot;;&#xD;&#xA;                            else&#xD;&#xA;                                reason = $&quot;{target.Role}方向错误、{furthestPerson.Role}站位错误&quot;;&#xD;&#xA;                        }&#xD;&#xA;                        error = $&quot;【{ability}】》 {targetCount} 人&quot;;&#xD;&#xA;                        error += $&quot;\n点名 {target.TempDesc}&quot;;&#xD;&#xA;                        error += targetCount &gt;= 4&#xD;&#xA;                            ? $&quot;\n　》 {string.Join(&quot;　&quot;, others.Select(p =&gt; p.Role))}&quot;&#xD;&#xA;                            : $&quot;\n　》 {string.Join(&quot;\n　》 &quot;, others.Select(p =&gt; p.TempDesc))}&quot;;&#xD;&#xA;                        error += $&quot;\n参考原因：\n　　 {reason}&quot;;&#xD;&#xA;                    }&#xD;&#xA;                    break;&#xD;&#xA;                case AbilityEnum.暗炎喷发:&#xD;&#xA;                    {&#xD;&#xA;                        var wrongTargets = Stack4;&#xD;&#xA;                        if (targetCount == 1) return;&#xD;&#xA;&#xD;&#xA;                        targets.ForEach(p =&gt; p.UpdatePos());&#xD;&#xA;                        string reason;&#xD;&#xA;                        if (wrongTargets.Contains(target.HexID)) // 第一目标没有点名&#xD;&#xA;                            reason = &quot;乱点名&quot;;&#xD;&#xA;                        else if (target.TempR &lt; 8) // 点名者太近&#xD;&#xA;                            reason = target.TempR &gt; 6 ? $&quot;{target.Role} 记录分散位置过近&quot; : $&quot;{target.Role} 未出人群记录分散&quot;;&#xD;&#xA;                        else&#xD;&#xA;                        {&#xD;&#xA;                            var furthestPerson = others.OrderByDescending(p =&gt; p.TempR).FirstOrDefault();&#xD;&#xA;                            if (Abs(target.TempRelθ) &lt; PI / 10) // 点名者站位没错&#xD;&#xA;                                reason = furthestPerson.TempR &gt; 8 ? $&quot;{furthestPerson.Role}方向错误&quot; : furthestPerson.TempR &gt; 3 ? $&quot;{furthestPerson.Role}未贴近中心&quot; : &quot;情况复杂，无法判断&quot;;&#xD;&#xA;                            else if (furthestPerson.TempR &gt; 8)&#xD;&#xA;                                reason = $&quot;{target.Role}方向错误，误伤 {furthestPerson.Role}&quot;;&#xD;&#xA;                            else&#xD;&#xA;                                reason = $&quot;{target.Role}方向错误、{furthestPerson.Role}站位错误&quot;;&#xD;&#xA;                        }&#xD;&#xA;                        error = $&quot;【{ability}】》 {targetCount} 人&quot;;&#xD;&#xA;                        error += $&quot;\n点名 {target.TempDesc}&quot;;&#xD;&#xA;                        if (targetCount &gt;= 4)&#xD;&#xA;                            error += $&quot;\n　》 {string.Join(&quot;　&quot;, others.Select(p =&gt; p.Role))}&quot;;&#xD;&#xA;                        else&#xD;&#xA;                            error += $&quot;\n　》 {string.Join(&quot;\n　》 &quot;, others.Select(p =&gt; p.TempDesc))}&quot;;&#xD;&#xA;                        error += $&quot;\n参考原因：\n　　 {reason}&quot;;&#xD;&#xA;                    }&#xD;&#xA;                    break;&#xD;&#xA;                default:&#xD;&#xA;                    throw new Exception(&quot;未处理的技能&quot;);&#xD;&#xA;            }&#xD;&#xA;            RecordError(ability, error);&#xD;&#xA;        }&#xD;&#xA;        catch (Exception e)&#xD;&#xA;        {&#xD;&#xA;            throw new Exception($&quot;处理技能 {ability} #{AbilityCount[ability]} 时错误：\n{string.Join(&quot; | &quot;, args.Select(kv =&gt; kv.Key + &quot; = &quot; + kv.Value))}\n{e}&quot;);&#xD;&#xA;        }&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    void ParseReturn(Dictionary&lt;string, string&gt; args)&#xD;&#xA;    {&#xD;&#xA;        Player target = PlayersById[args[&quot;target&quot;]];&#xD;&#xA;        target.UpdatePos();&#xD;&#xA;        string errorType = null;&#xD;&#xA;        if (Stack4.Contains(target.HexID))&#xD;&#xA;        {&#xD;&#xA;            if (target.TempR &gt; 2)&#xD;&#xA;                errorType = &quot;分摊组站位过远&quot;;&#xD;&#xA;            else if (Abs(target.TempRelθ) &gt; PI / 8)&#xD;&#xA;                errorType = &quot;方向错误&quot;;&#xD;&#xA;        }&#xD;&#xA;        else&#xD;&#xA;        {&#xD;&#xA;            if (target.TempR &lt; 8)&#xD;&#xA;                errorType = target.TempR &gt; 6 ? &quot;分散组站位过近&quot; : &quot;分散组没出人群&quot;;&#xD;&#xA;            else if (Abs(target.TempRelθ) &gt; PI / 10)&#xD;&#xA;                errorType = &quot;方向错误&quot;;&#xD;&#xA;        }&#xD;&#xA;        if (errorType != null)&#xD;&#xA;            RecordError(AbilityEnum.记录回返, $&quot;【记录回返】：{errorType}\n　》 {target.TempDesc}&quot;);&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    void ParseRotate(Dictionary&lt;string, string&gt; args)&#xD;&#xA;    {&#xD;&#xA;        HourGlass hourglass = HourGlassesById[args[&quot;id&quot;]];&#xD;&#xA;        bool isCW = MathParser.Parse(args[&quot;cw&quot;]) != 0;&#xD;&#xA;        hourglass._is顺 = isCW;&#xD;&#xA;        return;&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    List&lt;string&gt; Errors = new List&lt;string&gt;();&#xD;&#xA;    Dictionary&lt;AbilityEnum, int&gt; ErrorCounts = Enum.GetValues(typeof(AbilityEnum)).Cast&lt;AbilityEnum&gt;().ToDictionary(a =&gt; a, a =&gt; 0);&#xD;&#xA;    void RecordError(AbilityEnum ability, string data)&#xD;&#xA;    {&#xD;&#xA;        ErrorCounts[ability]++;&#xD;&#xA;        Errors.Add(data);&#xD;&#xA;        if (ErrorCounts[ability] &lt;= 3 &amp;&amp; Errors.Count &lt;= 5)&#xD;&#xA;        {&#xD;&#xA;            Command(&quot;/e \n&quot; + data);&#xD;&#xA;        }&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    static void Command(string data)&#xD;&#xA;    {&#xD;&#xA;        var chars = data.Select(ch =&gt; SimpToTrad.TryGetValue(ch.ToString(), out var t) ? t : ch.ToString());&#xD;&#xA;        RealPlugin.plug.InvokeNamedCallback(&quot;command&quot;, string.Concat(chars));&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    static Dictionary&lt;string, string&gt; SimpToTrad = new Dictionary&lt;string, string&gt;&#xD;&#xA;    {&#xD;&#xA;        {&quot;圣&quot;, &quot;聖&quot;}, {&quot;转&quot;, &quot;轉&quot;}, {&quot;喷&quot;, &quot;噴&quot;}, {&quot;发&quot;, &quot;發&quot;}, {&quot;长&quot;, &quot;長&quot;}, {&quot;标&quot;, &quot;標&quot;},&#xD;&#xA;        {&quot;运&quot;, &quot;運&quot;}, {&quot;队&quot;, &quot;隊&quot;}, {&quot;环&quot;, &quot;環&quot;}, {&quot;过&quot;, &quot;過&quot;}, {&quot;远&quot;, &quot;遠&quot;}, {&quot;摊&quot;, &quot;攤&quot;},&#xD;&#xA;        {&quot;应&quot;, &quot;應&quot;}, {&quot;错&quot;, &quot;錯&quot;}, {&quot;误&quot;, &quot;誤&quot;}, {&quot;贴&quot;, &quot;貼&quot;}, {&quot;复&quot;, &quot;複&quot;}, {&quot;杂&quot;, &quot;雜&quot;},&#xD;&#xA;        {&quot;伤&quot;, &quot;傷&quot;}, {&quot;记&quot;, &quot;記&quot;}, {&quot;录&quot;, &quot;録&quot;}, {&quot;顺&quot;, &quot;順&quot;}, {&quot;调&quot;, &quot;調&quot;}, {&quot;试&quot;, &quot;試&quot;},&#xD;&#xA;        {&quot;黑&quot;, &quot;黒&quot;},&#xD;&#xA;    };&#xD;&#xA;&#xD;&#xA;    static string[] Dir8Desc = new string[] { &quot;上北&quot;, &quot;左上&quot;, &quot;左西&quot;, &quot;左下&quot;, &quot;下南&quot;, &quot;右下&quot;, &quot;右东&quot;, &quot;右上&quot; };&#xD;&#xA;&#xD;&#xA;    class Player&#xD;&#xA;    {&#xD;&#xA;        public string HexID;&#xD;&#xA;        public string Name;&#xD;&#xA;        public string Job;&#xD;&#xA;        public int Dir8;&#xD;&#xA;        public Debuff Debuff;&#xD;&#xA;        public HourGlass HourGlass;&#xD;&#xA;        public RoleEnum Role;&#xD;&#xA;        public Vector2 TempRelPos;&#xD;&#xA;        public double TempR, TempRelθ;&#xD;&#xA;        public string TempDesc;&#xD;&#xA;        public void UpdatePos()&#xD;&#xA;        {&#xD;&#xA;            //ＭＴ（战士）长高Ｔ　@ 6.5 m, 偏 +10°&#xD;&#xA;            TempRelPos = GetCurrentRelPos(HexID);&#xD;&#xA;            var rotatedPolarCoord = new PolarCoord(TempRelPos).RotateTo(Dir8);&#xD;&#xA;            TempR = rotatedPolarCoord.R;&#xD;&#xA;            TempRelθ = rotatedPolarCoord.θ;&#xD;&#xA;            TempDesc = $&quot;{Role}（{Job}）{Desc(Debuff, Role)} {rotatedPolarCoord}&quot;;&#xD;&#xA;        }&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    class HourGlass&#xD;&#xA;    {&#xD;&#xA;        public string HexID;&#xD;&#xA;        public int Dir8;&#xD;&#xA;        public SpeedEnum Speed;&#xD;&#xA;        public Player Player;&#xD;&#xA;        public bool? _is顺;&#xD;&#xA;        public Player BaitPlayer;&#xD;&#xA;        public double BaitDistance;&#xD;&#xA;        public double Baitθ;&#xD;&#xA;        public string BaitDirectionErrorDesc;&#xD;&#xA;        public bool Is顺&#xD;&#xA;        {&#xD;&#xA;            get&#xD;&#xA;            {&#xD;&#xA;                if (_is顺 == null)&#xD;&#xA;                {&#xD;&#xA;                    string err = $&quot;程序错误：沙漏 {HexID} (Dir8 = {Dir8}) 未记录旋转方向。&quot;;&#xD;&#xA;                    if (Debug)&#xD;&#xA;                    {&#xD;&#xA;                        Log(RealPlugin.DebugLevelEnum.Error, $&quot;调试：&quot; + err + &quot;使用默认值（顺时针）。&quot;);&#xD;&#xA;                        _is顺 = true;&#xD;&#xA;                    }&#xD;&#xA;                    else throw new Exception(err);&#xD;&#xA;                }&#xD;&#xA;                return _is顺.Value;&#xD;&#xA;            }&#xD;&#xA;        }&#xD;&#xA;        public Vector2 RelPos&#xD;&#xA;        {&#xD;&#xA;            get&#xD;&#xA;            {&#xD;&#xA;                var θ = (Dir8 - 4) * PI / 4;&#xD;&#xA;                return 9.5f * new Vector2((float)Sin(θ), (float)Cos(θ));&#xD;&#xA;            }&#xD;&#xA;        }&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    static Random rnd = new Random();&#xD;&#xA;    static Vector2 GetCurrentRelPos(string hexId)&#xD;&#xA;    {&#xD;&#xA;        var player = GetIdEntity(hexId);&#xD;&#xA;        if (Debug &amp;&amp; player.GetValue(&quot;name&quot;).ToString() == &quot;&quot;)&#xD;&#xA;        {&#xD;&#xA;            var v = new Vector2(rnd.Next(300) / 10.0f - 15, rnd.Next(300) / 10.0f - 15);&#xD;&#xA;            Log(RealPlugin.DebugLevelEnum.Warning, $&quot;调试模式，生成随机坐标：{hexId} @ {v}&quot;);&#xD;&#xA;            return v;&#xD;&#xA;        }&#xD;&#xA;        var x = float.Parse(player.GetValue(&quot;x&quot;).ToString());&#xD;&#xA;        var y = float.Parse(player.GetValue(&quot;y&quot;).ToString());&#xD;&#xA;        return new Vector2(x - 100, y - 100);&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    public enum Debuff&#xD;&#xA;    {&#xD;&#xA;        短TH = 0, 冰TH = 1, 中TH = 2, 长高TH = 3, 长低TH = 4,&#xD;&#xA;        短高D = 5, 短低D = 6, 中D = 7, 长D = 8, 冰D = 9,&#xD;&#xA;        短或冰TH, 长或冰D,&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    public static string Desc(Debuff debuff, RoleEnum role)&#xD;&#xA;    {&#xD;&#xA;        var debuffDesc = debuff.ToString().TrimEnd('T', 'H', 'D');&#xD;&#xA;        var roleDesc = new string[] { &quot;Ｔ&quot;, &quot;Ｈ&quot;, &quot;Ｄ&quot;, &quot;Ｄ&quot; }[(int)role / 2];&#xD;&#xA;        return (debuffDesc + roleDesc).PadRight(3, '　');&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;    static Dictionary&lt;Debuff, int&gt; DebuffToRelDir8 = new Dictionary&lt;Debuff, int&gt;&#xD;&#xA;    {&#xD;&#xA;        { Debuff.短TH, 4 }, { Debuff.冰TH, 4 },&#xD;&#xA;        { Debuff.中TH, 2 },&#xD;&#xA;        { Debuff.长高TH, 3 }, { Debuff.长低TH, 5 },&#xD;&#xA;        { Debuff.短高D, 1 }, { Debuff.短低D, 7 },&#xD;&#xA;        { Debuff.中D, 6 },&#xD;&#xA;        { Debuff.长D, 0 }, { Debuff.冰D, 0 },&#xD;&#xA;    };&#xD;&#xA;&#xD;&#xA;    public enum RoleEnum { ＭＴ = 0, ＳＴ = 1, Ｈ１ = 2, Ｈ２ = 3, Ｄ１ = 4, Ｄ２ = 5, Ｄ３ = 6, Ｄ４ = 7 }&#xD;&#xA;&#xD;&#xA;    public enum SpeedEnum { 短, 中, 长 }&#xD;&#xA;    static Dictionary&lt;int, SpeedEnum&gt; RelDir8ToSpeed = new Dictionary&lt;int, SpeedEnum&gt;&#xD;&#xA;    {&#xD;&#xA;        { 0, SpeedEnum.短 }, { 1, SpeedEnum.中 }, { 2, SpeedEnum.长 }, { 3, SpeedEnum.短 },&#xD;&#xA;        { 4, SpeedEnum.中 }, { 5, SpeedEnum.短 }, { 6, SpeedEnum.长 }, { 7, SpeedEnum.中 },&#xD;&#xA;    };&#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;public class PolarCoord&#xD;&#xA;{&#xD;&#xA;    public double R;&#xD;&#xA;    public double θ;&#xD;&#xA;    public PolarCoord(double R, double θ)&#xD;&#xA;    {&#xD;&#xA;        this.R = R;&#xD;&#xA;        this.θ = θ;&#xD;&#xA;    }&#xD;&#xA;    public PolarCoord(Vector2 vec)&#xD;&#xA;    {&#xD;&#xA;        R = Sqrt(vec.X * vec.X + vec.Y * vec.Y);&#xD;&#xA;        θ = Atan2(vec.X, vec.Y);&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    public PolarCoord RotateTo(int dir8)&#xD;&#xA;    {&#xD;&#xA;        var newθ = θ - dir8 * PI / 4;&#xD;&#xA;        return new PolarCoord(R, newθ);&#xD;&#xA;    }&#xD;&#xA;&#xD;&#xA;    public override string ToString()&#xD;&#xA;    {&#xD;&#xA;        var degree = θ / PI * 180;&#xD;&#xA;        degree = (degree % 360 + 360) % 360;&#xD;&#xA;        if (degree &gt;= 180) degree -= 360;&#xD;&#xA;        return $&quot;距中心 {R:0.0} m, 偏{(degree &gt;= 0 ? &quot;逆&quot; : &quot;顺&quot;)} {Abs(degree):0}°&quot;;&#xD;&#xA;    }&#xD;&#xA;}" ActionType="ExecuteScript" Asynchronous="False" Description="U7a3_一运_Analyzer      P3 一运警察" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ecallback:U7a3_一运_Analyzer}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" NamedCallbackName="U7a3_一运_Analyzer" NamedCallbackParam="Command = Init" Enabled="False" ActionType="NamedCallback" />
<Action OrderNumber="4" NamedCallbackName="U7a3_一运_Analyzer" NamedCallbackParam="Command = Parse&#xD;&#xA;Ability = 9D55&#xD;&#xA;Source = 4000439A&#xD;&#xA;Target = 109012A8&#xD;&#xA;Others = 106D8992,106C2E8F,1078AB54&#xD;&#xA;Count = 4" Enabled="False" ActionType="NamedCallback" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="d43539ab-4667-422d-a0d0-77c9e01d4beb" Name="P1" Enabled="true">
<Folders>
<Folder Id="43280643-f837-4bc2-9a94-71fae22619d6" Name="A. 雾龙" Enabled="true" RawEnvironmentVariables="phase = P1雾龙">
<Folders />
<Triggers>
<Trigger Enabled="true" Sequential="True" Name="1. 储存雷火 Utopian Sky" Id="4a49e984-db67-46a5-bac9-5d59d78fb42a" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9CD(?&lt;type&gt;A|B):">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="U7a_phase" VariableExpression="${env:phase}" ActionType="Variable" />
<Action OrderNumber="2" VariableOp="UnsetRegexUniversal" VariableName="^U7a1_雾龙" ActionType="Variable" />
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="U7a1_雾龙_is散" VariableExpression="${type} == B" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 获取三个分身 =&gt; O1" Id="0631e9cf-e201-431d-a853-c0052b51f5f9" RegularExpression="^.{15}\S+ AAA:202:4:4.{7}:[^:]*:9708:17820:[^:]*:[^:]*:[^:]*:(?&lt;h&gt;[^:]+)$">
<Actions>
<Action OrderNumber="1" ListVariableOp="Push" ListVariableExpressionType="Numeric" ListVariableName="U7a1_雾龙_dir8" ListVariableExpression="roundir(${h}, 8) % 4" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="U7a1_雾龙_dir8:safe:${n: 6 - ${l:U7a1_雾龙_dir8.sum}}:originalData:${l:U7a1_雾龙_dir8.join(:)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a1_雾龙_dir8.size}" ExpressionTypeL="String" ExpressionR="3" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="false" Source="None" Name="Debug Log 2024-11-27 02:46" Id="3204b268-b058-432e-805f-199e5d220710">
<Actions>
<Action OrderNumber="1" LogMessageText="[01:20:11.273] StartsCasting 14:400058DA:Fatebreaker:9CDB:Utopian Sky:400058DA:Fatebreaker:3.700:99.99:99.99:0.00:-3.03" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="2" ActionType="Placeholder" ExecutionDelayExpression="3.05 * 1000" />
<Action OrderNumber="3" LogMessageText="[01:20:20.418] _WeaponId AAA:202:4:400058CB:Fatebreaker's Image:9708:17820:85.85786:85.85786:-0.00000000000000000001294991:0.7853622" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="4" LogMessageText="[01:20:20.418] _WeaponId AAA:202:4:400058CD:Fatebreaker's Image:9708:17820:80:100:0:1.570772" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="5" LogMessageText="[01:20:20.418] _WeaponId AAA:202:4:400058D7:Fatebreaker's Image:9708:17820:114.1421:85.85786:0:-0.7854581" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="05313019-47ae-4f19-9f5c-fc12ac5b5dba" Name="B. 光轮" Enabled="true" RawEnvironmentVariables="phase = P1光轮">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="1. 储存雷火 光轮召唤" Id="82e10484-4e6e-4e1d-bbe1-3c8addfb5d28" RegularExpression="^.{15}\S+ 14:(?&lt;sid&gt;4.{7}):[^:]+:9CD(?&lt;type&gt;6|7):">
<Actions>
<Action OrderNumber="1" VariableOp="UnsetRegexUniversal" VariableName="^U7a1_光轮" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="SetString" VariableName="U7a_phase" VariableExpression="${env:phase}" ActionType="Variable" />
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="U7a1_光轮_is火safe" VariableExpression="${type} == 7" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 光轮位置" Id="1de4051f-2f52-4c4c-a7b7-95ecb5d81ed5" RegularExpression="^.{15}\S+ 03:4.{7}:([^:]*:){7}17821:([^:]*:){6}(?&lt;x&gt;(8|11)[45][^:]*):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="17821火 17822雷 正北逆四个固定同色，所以只需要看正左右哪个是火" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="U7a1_光轮_is右safe" VariableExpression="(${x} &gt; 100) = ${v:U7a1_光轮_is火safe}" ActionType="Variable" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="4. 处理换位 =&gt; O1" Id="67aa4706-5175-430a-ae78-ee1d2ebfbc1a" RegularExpression="^_U7a1_光轮_连线">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="目前列表如 3_4000000C, 7_4000000D，分身 id 小的在左" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" Description="应用不同排序规则" DescriptionOverride="True" />
<Action OrderNumber="3" TableVariableOp="SortLine" TableVariableName="U7a1_光轮_连线idx_sid" TableVariableY="n+: ${_row[1]}" ActionType="TableVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1雾龙线]}" ExpressionTypeL="String" ExpressionR="THD" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="4" TableVariableOp="SortLine" TableVariableName="U7a1_光轮_连线idx_sid" TableVariableY="n+: ${?l: 3,4,1,2,5,6,7,8 [${_row[1]}]}" ActionType="TableVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1雾龙线]}" ExpressionTypeL="String" ExpressionR="HTD" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="5" TableVariableOp="SortLine" TableVariableName="U7a1_光轮_连线idx_sid" TableVariableY="n+: 0x${_row[2]}" ActionType="TableVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1雾龙线]}" ExpressionTypeL="String" ExpressionR="左右" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="6" TableVariableOp="SortLine" TableVariableName="U7a1_光轮_连线idx_sid" TableVariableY="n-: 0x${_row[2]}" ActionType="TableVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1雾龙线]}" ExpressionTypeL="String" ExpressionR="右左" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="7" TableVariableOp="SortLine" TableVariableName="U7a1_光轮_连线idx_sid" TableVariableY="n+: 0x${_row[2]} * (${v:U7a1_光轮_is右safe} ? 1 : -1)" ActionType="TableVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1雾龙线]}" ExpressionTypeL="String" ExpressionR="长短" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="8" TableVariableOp="SortLine" TableVariableName="U7a1_光轮_连线idx_sid" TableVariableY="n-: 0x${_row[2]} * (${v:U7a1_光轮_is右safe} ? 1 : -1)" ActionType="TableVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1雾龙线]}" ExpressionTypeL="String" ExpressionR="短长" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="9" ActionType="Placeholder" Description="此时表格两行首位为北侧和南侧两个连线者 idx" DescriptionOverride="True" />
<Action OrderNumber="10" ActionType="Placeholder" Description="确定换位者" DescriptionOverride="True" />
<Action OrderNumber="11" VariableOp="SetString" VariableName="U7a1_光轮_swapIdx" VariableExpression="0" ActionType="Variable" />
<Action OrderNumber="12" VariableOp="SetString" VariableName="U7a1_光轮_swapIdx" VariableExpression="1" ActionType="Variable">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${t:U7a1_光轮_连线idx_sid[1][1]}" ExpressionTypeL="Numeric" ExpressionR="4" ExpressionTypeR="String" ConditionType="NumericGreater" />
<ConditionSingle Enabled="true" ExpressionL="${t:U7a1_光轮_连线idx_sid[1][2]}" ExpressionTypeL="Numeric" ExpressionR="4" ExpressionTypeR="String" ConditionType="NumericGreater" />
</Condition>
</Action>
<Action OrderNumber="13" VariableOp="SetString" VariableName="U7a1_光轮_swapIdx" VariableExpression="5" ActionType="Variable">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${t:U7a1_光轮_连线idx_sid[1][1]}" ExpressionTypeL="Numeric" ExpressionR="4" ExpressionTypeR="String" ConditionType="NumericLessEqual" />
<ConditionSingle Enabled="true" ExpressionL="${t:U7a1_光轮_连线idx_sid[1][2]}" ExpressionTypeL="Numeric" ExpressionR="4" ExpressionTypeR="String" ConditionType="NumericLessEqual" />
</Condition>
</Action>
<Action OrderNumber="14" ActionType="Placeholder" Description="=&gt; O1" DescriptionOverride="True" />
<Action OrderNumber="15" LogMessageText="U7a1_光轮_连线:北:${t:U7a1_光轮_连线idx_sid[1][1]}:南:${t:U7a1_光轮_连线idx_sid[1][2]}:换:${v:U7a1_光轮_swapIdx}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="3. 火分摊连线 * 2 =&gt; 4" Id="bff6b36c-5332-4de4-bc8a-e561198025ce" RegularExpression="^.{15}\S+ 23:(?&lt;sid&gt;4.{7}):[^:]*:(?&lt;tid&gt;1.{7}):[^:]*:[^:]*:[^:]*:00F9:">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="cond phase" DescriptionOverride="True" />
<Action OrderNumber="2" TableVariableOp="InsertLine" TableVariableName="U7a1_光轮_连线idx_sid" TableVariableExpression=",${l:party.indexof(${tid})},${sid}" TableVariableY="1" ActionType="TableVariable" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="_U7a1_光轮_连线" LogProcess="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${t:U7a1_光轮_连线idx_sid.height}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${env:phase}" ExpressionTypeL="String" ExpressionR="${v:U7a_phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="false" Source="None" Name="Debug Log 2025-02-28 06:23" Id="33c96e08-c438-4091-b31d-b6b9dba860d6" RegularExpression="">
<Actions>
<Action OrderNumber="1" LogMessageText="[22:38:23.978] StartsCasting 14:40002A22:Fatebreaker's Image:9CD6:Turn of the Heavens:40002A22:Fatebreaker's Image:6.700:100.00:92.50:0.00:0.00" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="2" ActionType="Placeholder" ExecutionDelayExpression="6800" />
<Action OrderNumber="3" LogMessageText="[22:38:24.767] AddCombatant 03:40002A55:Halo of Flame:00:64:0000:00::9710:17821:188300:188300:10000:10000:::85.00:100.00:0.00:1.57" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="4" ActionType="Placeholder" ExecutionDelayExpression="1.21 * 1000" />
<Action OrderNumber="5" LogMessageText="[22:38:25.978] Tether 23:40002A20:Fatebreaker's Image:${_me.id}:自身:0000:0000:00F9:${_me.id}:000F:0000" LogProcess="True" LogProcessACT="True" Enabled="False" ActionType="LogMessage" />
<Action OrderNumber="6" LogMessageText="[22:38:25.978] Tether 23:40002A20:Fatebreaker's Image:${l:party[7]}:队员7:0000:0000:00F9:${l:party[7]}:000F:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="7" LogMessageText="[22:38:25.978] Tether 23:40002A21:Fatebreaker's Image:${l:party[2]}:队员2:0000:0000:00F9:${l:party[2]}:000F:0000" LogProcess="True" LogProcessACT="True" Enabled="False" ActionType="LogMessage" />
<Action OrderNumber="8" LogMessageText="[22:38:25.978] Tether 23:40002A21:Fatebreaker's Image:${l:party[5]}:队员5:0000:0000:00F9:${l:party[5]}:000F:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="463382ec-cca8-4868-98e9-5928ecd39399" Name="C. 四线" Enabled="true" RawEnvironmentVariables="phase = P1四线">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="0. 落地" Id="3eef4603-fa8b-40e0-93c7-e39817501d2c" RegularExpression="^.{15}\S+ AAA:10F:4.{7}:[^:]*:9707:17819:100">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="U7a_phase" VariableExpression="${env:phase}" ActionType="Variable" />
<Action OrderNumber="2" VariableOp="UnsetRegexUniversal" VariableName="^U7a1_四线" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="2. 处理数据 =&gt; O2 / O3" Id="817bcb32-8543-4aad-90df-3579b62e4532" RegularExpression="^_U7a1_四线_处理">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="无点名四人的小队顺序：" DescriptionOverride="True" />
<Action OrderNumber="2" ListVariableOp="Build" ListVariableExpression=",1,2,3,4,5,6,7,8" ListVariableTarget="U7a1_四线_无点名idx" ActionType="ListVariable" />
<Action OrderNumber="3" ListVariableOp="Filter" ListVariableExpressionType="Numeric" ListVariableName="U7a1_四线_无点名idx" ListVariableExpression="!${l:U7a1_四线_点名idx.contain(${_this})}" ListVariableTarget="U7a1_四线_无点名idx" ActionType="ListVariable" />
<Action OrderNumber="4" ActionType="Placeholder" Description="读取配置的优先级" DescriptionOverride="True" />
<Action OrderNumber="5" VariableOp="SetString" VariableName="tmp_prio" VariableExpression="${?d:&#xD;&#xA;  THD  = 12345678,&#xD;&#xA;  HTD  = 34125678,&#xD;&#xA;  HTDH = 31256784,&#xD;&#xA;  TMHR = 73512648,&#xD;&#xA;  TMRH = 37512684,&#xD;&#xA;  MTHR = 73156248,&#xD;&#xA;  MTRH = 37156284&#xD;&#xA;  [${pd:U7a_cfg[P1线Prio]}]&#xD;&#xA;}" ActionType="Variable" />
<Action OrderNumber="6" ActionType="Placeholder" Description="根据优先级排序" DescriptionOverride="True" />
<Action OrderNumber="7" ListVariableOp="SortByKeys" ListVariableName="U7a1_四线_无点名idx" ListVariableExpression="n+: ${f:indexof(${_this}):${v:tmp_prio}}" ActionType="ListVariable" />
<Action OrderNumber="8" VariableName="tmp_prio" ActionType="Variable" />
<Action OrderNumber="9" VariableOp="SetString" VariableName="U7a1_四线_my无idx" VariableExpression="${l:U7a1_四线_无点名idx.indexof(${v:myIdx})}" ActionType="Variable" />
<Action OrderNumber="10" ActionType="Placeholder" Description="=&gt; O2 自身无点名信息" DescriptionOverride="True" />
<Action OrderNumber="11" LogMessageText="U7a1_四线_无:my无:${v:U7a1_四线_my无idx}:is雷1:${l:U7a1_四线_is雷[${n: ${v:U7a1_四线_my无idx} &lt;= 2 ? 1 : 2 }]}:is雷2:${l:U7a1_四线_is雷[${n: ${v:U7a1_四线_my无idx} &lt;= 2 ? 3 : 4 }]}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a1_四线_my无idx}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="12" ActionType="Placeholder" Description="=&gt; O3" DescriptionOverride="True" />
<Action OrderNumber="13" LogMessageText="U7a1_四线:is雷:${l:U7a1_四线_is雷.join(&quot;&quot;)}:点名:${l:U7a1_四线_点名idx.join(&quot;&quot;)}:无点名:${l:U7a1_四线_无点名idx.join(&quot;&quot;)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1. 获取连线 =&gt; O1 / * 4 =&gt; 2" Id="16d2d1d8-a5d6-4824-98fb-7baec18b9f38" RegularExpression="^.{15}\S+ 23:4.{7}:[^:]*:(?&lt;tid&gt;1.{7}):[^:]*:0000:0000:(?&lt;type&gt;011F|00F9):">
<Actions>
<Action OrderNumber="1" ListVariableOp="Push" ListVariableName="U7a1_四线_点名idx" ListVariableExpression="${l:party.indexof(${tid})}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="2" ListVariableOp="Push" ListVariableExpressionType="Numeric" ListVariableName="U7a1_四线_is雷" ListVariableExpression="${type} == 011F" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="3" NamedCallbackName="command" NamedCallbackParam="/${pd:U7a_cfg[publicChannel]} ${f:toxivchar:${l:U7a1_四线_is雷.size}} ${if: ${l:U7a1_四线_is雷[-1]} ? 雷 : 火} 》 ${l:roleDesc[${l:party.indexof(${tid})}]}" ActionType="NamedCallback" Asynchronous="False" />
<Action OrderNumber="4" ActionType="Placeholder" Asynchronous="False" Description="是自身：" DescriptionOverride="True" />
<Action OrderNumber="5" LogMessageText="U7a1_四线_线:my线:${l:U7a1_四线_is雷.size}:is雷:${l:U7a1_四线_is雷[-1]}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="6" ActionType="Placeholder" Asynchronous="False" Description="是4：" DescriptionOverride="True" />
<Action OrderNumber="7" LogMessageText="_U7a1_四线_处理" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a1_四线_is雷.size}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="false" Source="None" Name="Debug Log 2025-02-28 06:59" Id="3d7d0be1-6590-4080-8d56-d2a71deea4b8" RegularExpression="">
<Actions>
<Action OrderNumber="1" LogMessageText="[22:38:20.978] A AAA:10F:40000000:aaa:9707:17819:100" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="2" ActionType="Placeholder" ExecutionDelayExpression="5.00 * 1000" />
<Action OrderNumber="3" LogMessageText="[22:38:54.048] Tether 23:40002A36:Fatebreaker:${l:party[2]}:队员2:0000:0000:00F9:${l:party[2]}:000F:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="4" ActionType="Placeholder" ExecutionDelayExpression="3.17 * 1000" />
<Action OrderNumber="5" LogMessageText="[22:38:57.222] Tether 23:40002A21:Fatebreaker's Image:${l:party[3]}:队员3:0000:0000:00F9:${l:party[3]}:000F:0000" LogProcess="True" LogProcessACT="True" Enabled="False" ActionType="LogMessage" />
<Action OrderNumber="6" LogMessageText="[22:38:57.222] Tether 23:40002A21:Fatebreaker's Image:${l:party[1]}:队员1:0000:0000:00F9:${l:party[1]}:000F:0000" LogProcess="True" ActionType="LogMessage" />
<Action OrderNumber="7" ActionType="Placeholder" ExecutionDelayExpression="2.51 * 1000" />
<Action OrderNumber="8" LogMessageText="[22:38:59.725] Tether 23:40002A20:Fatebreaker's Image:${l:party[4]}:队员4:0000:0000:011F:${l:party[4]}:000F:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="9" ActionType="Placeholder" ExecutionDelayExpression="2.50 * 1000" />
<Action OrderNumber="10" LogMessageText="[22:39:02.231] Tether 23:40002A1F:Fatebreaker's Image:${l:party[5]}:队员5:0000:0000:011F:${l:party[5]}:000F:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="53a53982-fc54-4ac4-a603-77183f699e80" Name="D. 六人塔" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="1. 获取塔 * 3 =&gt; 2" Id="bdc88deb-9642-49e1-b3b9-de2845577760" RegularExpression="^.{15}\S+ 107:4.{7}:(?&lt;aid&gt;9CC[37]|9CB[ABCDEF]):(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" ListVariableOp="Set" ListVariableName="U7a1_塔_人数" ListVariableExpression="${?d: 9CC3 = 1, 9CC7 = 1, 9CBA = 2, 9CBB = 3, 9CBC = 4, 9CBD = 2, 9CBE = 3, 9CBF = 4 [${aid}]}" ListVariableIndex="round(${y} / 10) - 8" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="U7a1_塔_is火" VariableExpression="${aid} == 9CC3 || ${aid} == 9CBA || ${aid} == 9CBB || ${aid} == 9CBC" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="U7a1_塔_is右" VariableExpression="${x} &gt; 100" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" VariableOp="Increment" VariableName="U7a1_塔_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="5" LogMessageText="_U7a1_塔:${l:U7a1_塔_人数.join(&quot;&quot;)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a1_塔_n}" ExpressionTypeL="String" ExpressionR="3" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="2. 处理数据 =&gt; O1" Id="51ce0681-67d6-422d-b987-38ef8681d4b1" RegularExpression="^_U7a1_塔:(?&lt;cnt&gt;[1234]{3})">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="T = 0，从上到下 = 1 2 3" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" Description="- H1 D4 H2 固定，D1 D3 D2 补位" DescriptionOverride="True" />
<Action OrderNumber="3" VariableOp="SetString" VariableName="U7a1_塔_自己补塔" VariableExpression="${f:slice(${v:myIdx}):00013${?d: 114 = 333, 141 = 222, 411 = 111, 123 = 332, 132 = 232, 213 = 133, 231 = 122, 312 = 131, 321 = 112, 222 = 222 [${cnt}]}2}" ActionType="Variable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1塔]}" ExpressionTypeL="String" ExpressionR="固定HDH" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" ActionType="Placeholder" Description="- H1 H2 D4 固定，D1 D2 D3 补位" DescriptionOverride="True" />
<Action OrderNumber="5" VariableOp="SetString" VariableName="U7a1_塔_自己补塔" VariableExpression="${f:slice(${v:myIdx}):00012${?d: 114 = 333, 141 = 222, 411 = 111, 123 = 323, 132 = 223, 213 = 133, 231 = 122, 312 = 113, 321 = 121, 222 = 222 [${cnt}]}3}" ActionType="Variable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1塔]}" ExpressionTypeL="String" ExpressionR="固定HHD" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" ActionType="Placeholder" Description="- H1 D4 H2 固定，D1 D2 D3 优先级" DescriptionOverride="True" />
<Action OrderNumber="7" VariableOp="SetString" VariableName="U7a1_塔_自己补塔" VariableExpression="${f:slice(${v:myIdx}):00013${?d: 114 = 333, 141 = 222, 411 = 111, 123 = 233, 132 = 223, 213 = 133, 231 = 122, 312 = 113, 321 = 112, 222 = 222 [${cnt}]}2}" ActionType="Variable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1塔]}" ExpressionTypeL="String" ExpressionR="结合HDH" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="8" ActionType="Placeholder" Description="- H1 H2 D4 固定，D1 D2 D3 优先级" DescriptionOverride="True" />
<Action OrderNumber="9" VariableOp="SetString" VariableName="U7a1_塔_自己补塔" VariableExpression="${f:slice(${v:myIdx}):00012${?d: 114 = 333, 141 = 222, 411 = 111, 123 = 233, 132 = 223, 213 = 133, 231 = 122, 312 = 113, 321 = 112, 222 = 222 [${cnt}]}3}" ActionType="Variable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1塔]}" ExpressionTypeL="String" ExpressionR="结合HHD" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="10" ActionType="Placeholder" Description="- 六人优先级" DescriptionOverride="True" />
<Action OrderNumber="11" VariableOp="SetString" VariableName="U7a1_塔_自己补塔" VariableExpression="${f:slice(${v:myIdx}):0001${?d: 114 = 2333, 141 = 2222, 411 = 1112, 123 = 2233, 132 = 2223, 213 = 1233, 231 = 1222, 312 = 1123, 321 = 1122, 222 = 1223 [${cnt}]}3}" ActionType="Variable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1塔]}" ExpressionTypeL="String" ExpressionR="优先" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="12" LogMessageText="U7a1_塔:myTower:${v:U7a1_塔_自己补塔}:is右:${v:U7a1_塔_is右}:is火:${v:U7a1_塔_is火}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="13" NamedCallbackName="command" NamedCallbackParam="/${pd:U7a_cfg[debugChannel]} ${_event}" ActionType="NamedCallback" DescBgColor="fdd" />
</Actions>
</Trigger>
<Trigger Enabled="false" Source="None" Name="Debug Log 2025-02-28 07:54" Id="8f602ff1-9546-4af8-917b-f2ebe38d167b" RegularExpression="">
<Actions>
<Action OrderNumber="1" VariableOp="UnsetRegexUniversal" VariableName="^U7a1_塔" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="[22:39:36.526] 263 107:40002A4D:9CBD:113.102:90.823:0.000:0.000" LogProcess="True" LogProcessACT="True" Enabled="False" ActionType="LogMessage" />
<Action OrderNumber="3" LogMessageText="[22:39:36.526] 263 107:40002A4C:9CBE:116.001:100.009:0.000:0.000" LogProcess="True" LogProcessACT="True" Enabled="False" ActionType="LogMessage" />
<Action OrderNumber="4" LogMessageText="[22:39:36.526] 263 107:40002A4B:9CC7:113.102:109.165:0.000:0.000" LogProcess="True" LogProcessACT="True" Enabled="False" ActionType="LogMessage" />
<Action OrderNumber="5" LogMessageText="[22:39:36.526] 263 107:40002A4D:9CBE:113.102:90.823:0.000:0.000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="6" LogMessageText="[22:39:36.526] 263 107:40002A4C:9CC7:116.001:100.009:0.000:0.000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="7" LogMessageText="[22:39:36.526] 263 107:40002A4B:9CBD:113.102:109.165:0.000:0.000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers />
</Folder>
<Folder Id="7c1dc055-3a1d-4653-8545-4c59164ee113" Name="P2" Enabled="true">
<Folders>
<Folder Id="af64e3db-82b2-4dfa-a0f3-dd5b6b9113b4" Name="A. 钻石星尘" Enabled="true" RawEnvironmentVariables="phase = P2DD">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="1.1 获取初始冰圈 =&gt; O1" Id="1ce11162-8bff-4766-946e-66684899f0d9" RegularExpression="^.{15}\S+ 107:4.{7}:9D06:(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):(?&lt;z&gt;[^:]+):(?&lt;h&gt;[^:]+)" PrevActionsRefire="Deny" PeriodRefire="Deny" RefirePeriodExpression="1000">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="U7a2_DD_dir8" VariableExpression="roundvec(${x} - 100, ${y} - 100, 8) % 4" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="U7a2_DD:dir8:${v:U7a2_DD_dir8}:is钢:${v:U7a2_DD_is钢}:id:${l:U7a2_DD_点名id.join(:)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:U7a2_DD_dir8}${ev:U7a2_DD_is钢}${l:U7a2_DD_点名id.size}" ExpressionTypeL="String" ExpressionR="114" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:U7a2_DD_dir8}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="1.2 获取钢铁月环 =&gt; O1" Id="c1a95a4c-2f18-4347-acca-832ecf3e6d8f" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9D0(?&lt;type&gt;[AB]):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="phase" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or" />
</Action>
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="U7a2_DD_is钢" VariableExpression="${type} == A" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="U7a2_DD:dir8:${v:U7a2_DD_dir8}:is钢:${v:U7a2_DD_is钢}:id:${l:U7a2_DD_点名id.join(:)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:U7a2_DD_dir8}${ev:U7a2_DD_is钢}${l:U7a2_DD_点名id.size}" ExpressionTypeL="String" ExpressionR="114" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="1.3 获取点名 * 4 =&gt; O1" Id="2277285f-9106-4ef8-a191-70fc9813f910" RegularExpression="^.{15}\S+ 1B:(?&lt;id&gt;1.{7}):[^:]*:[^:]*:[^:]*:0159">
<Actions>
<Action OrderNumber="1" ListVariableOp="Push" ListVariableName="U7a2_DD_点名id" ListVariableExpression="${id}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="U7a2_DD:dir8:${v:U7a2_DD_dir8}:is钢:${v:U7a2_DD_is钢}:id:${l:U7a2_DD_点名id.join(:)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:U7a2_DD_dir8}${ev:U7a2_DD_is钢}${l:U7a2_DD_点名id.size}" ExpressionTypeL="String" ExpressionR="114" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="false" Source="None" Name="Debug Log 前半" Id="6f54a4c6-f192-4372-9be4-be7f3f1ea5eb" RegularExpression="">
<Actions>
<Action OrderNumber="1" LogMessageText="[04:18:58.116] StartsCasting 14:4002C3C9:Usurper of Frost:9CF4:Mirror Image:4002C3C9:Usurper of Frost:2.700:99.99:105.00:0.00:-0.52" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="2" ActionType="Placeholder" ExecutionDelayExpression="2000" />
<Action OrderNumber="3" LogMessageText="[04:19:10.930] 263 107:4002C3A2:9D06:88.687:111.301:0.000:-3.142" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="4" LogMessageText="[04:19:10.930] 263 107:4002C3A3:9D06:111.301:88.687:0.000:-3.142" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="5" ActionType="Placeholder" ExecutionDelayExpression="0.27 * 1000" />
<Action OrderNumber="6" LogMessageText="[04:19:11.198] StartsCasting 14:4002C3C8:Oracle's Reflection:9D0A:Axe Kick:4002C3C8:Oracle's Reflection:5.700:99.99:99.99:0.00:0.52" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="7" ActionType="Placeholder" ExecutionDelayExpression="0.18 * 1000" />
<Action OrderNumber="8" LogMessageText="[04:19:11.377] TargetIcon 1B:10860D24:Maple Leaf:0000:0000:0159:10860D24:0000:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="9" LogMessageText="[04:19:11.377] TargetIcon 1B:107A182B:Chickenstew Delicious:0000:0000:0159:107A182B:0000:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="10" LogMessageText="[04:19:11.377] TargetIcon 1B:10844F86:Dyvinell Dark:0000:0000:0159:10844F86:0000:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="11" LogMessageText="[04:19:11.377] TargetIcon 1B:10934AAA:Deep Trouble:0000:0000:0159:10934AAA:0000:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="0. 开始 读条镜像" Id="c2aede99-eae4-4176-afd5-7f1f32534786" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9CF4:">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="U7a_phase" VariableExpression="${env:phase}" ActionType="Variable" />
<Action OrderNumber="2" VariableOp="UnsetRegexUniversal" VariableName="^U7a2_DD" ActionType="Variable" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="fd2703d7-a7f5-424e-b811-e6c6989a08b1" Name="C. 镜之国" Enabled="true" RawEnvironmentVariables="phase = P2镜子">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="0. 开始" Id="de1554c0-2ae5-4f59-be35-87c46ba396d0" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9CF3:">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="U7a_phase" VariableExpression="${env:phase}" ActionType="Variable" />
<Action OrderNumber="2" VariableOp="UnsetRegexUniversal" VariableName="^U7a2_镜子" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1. 获取白镜子" Id="acb846c9-638a-493f-813a-7331773ad69d" RegularExpression="^.{15}\S+ 101:.{8}:00020001:0(?&lt;pos&gt;[1-8])">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="6.1 读条月环 | 11.8 第一轮月环 | 21.8 第二轮月环" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="U7a2_镜子_白dir8" VariableExpression="(9 - 0${pos}) % 8" ActionType="Variable" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 获取红镜子" Id="6024f200-970d-4e04-9dda-1d6d287b2ced" RegularExpression="^.{15}\S+ 101:.{8}:02000100:0(?&lt;pos&gt;[1-8])">
<Actions>
<Action OrderNumber="1" ListVariableOp="Push" ListVariableExpressionType="Numeric" ListVariableName="U7a2_镜子_红dir8" ListVariableExpression="(9 - ${pos}) % 8" ActionType="ListVariable" />
</Actions>
</Trigger>
<Trigger Enabled="false" Source="None" Name="Debug Log 2025-03-01 03:43" Id="7706cf0f-e1e3-428c-a703-1151ae1f46f3">
<Actions>
<Action OrderNumber="1" LogMessageText="[22:17:31.089] StartsCasting 14:40002912:Usurper of Frost:9CF3:Mirror, Mirror:40002912:Usurper of Frost:2.700:99.99:99.99:0.00:1.54" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="2" ActionType="Placeholder" ExecutionDelayExpression="5.05 * 1000" />
<Action OrderNumber="3" LogMessageText="[22:17:36.139] 257 101:800375BF:02000100:06:00:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="4" LogMessageText="[22:17:36.139] 257 101:800375BF:02000100:08:00:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="5" LogMessageText="[22:17:36.139] 257 101:800375BF:00020001:04:00:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="8291c397-cbcd-48ee-b3a5-0cfdea9602d8" Name="B. 滑冰" Enabled="true" RawEnvironmentVariables="phase = P2滑冰">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="1. 获取光 → 冰分身（读条分摊）" Id="e22378de-531f-45ad-8a81-a411af85f301" RegularExpression="^.{15}\S+ 107:4.{7}:9D10:(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):(?&lt;z&gt;[^:]+):(?&lt;h&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="3.5 击退结束 | 4.5 冰花判定 | 6.1 冰→光分身出现 | 6.1-7.6-9.1-10.6 四连分摊 | 14.2 背对+冰冻" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetString" VariableName="U7a_phase" VariableExpression="${env:phase}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="UnsetRegexUniversal" VariableName="^U7a2_滑冰" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" VariableOp="SetNumeric" VariableName="U7a2_滑冰_冰dir8" VariableExpression="roundir(${h} + π, 8)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="5" VariableOp="SetNumeric" VariableName="U7a2_滑冰_自身dir8" VariableExpression="${v:U7a2_DD_dir8} + (${v:myIdx_isG1} ? 0 : 4)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="6" VariableOp="SetNumeric" VariableName="U7a2_滑冰_rel冰dir8" VariableExpression="(${v:U7a2_滑冰_冰dir8} - ${v:U7a2_滑冰_自身dir8}) %% 8" ActionType="Variable" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 获取冰 → 光分身" Id="a2e38b06-b385-4e69-ab44-e49247f49fc0" RegularExpression="^.{15}\S+ AAA:10F:(?&lt;id&gt;.{8}):[^:]*:12809:17823:(?!100[^:]*:100)(?&lt;x&gt;[^:]*):(?&lt;y&gt;[^:]*):(?&lt;z&gt;[^:]*):(?&lt;h&gt;[^:]*)">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="U7a2_滑冰_光dir8" VariableExpression="roundir(${h} + π, 8)" ActionType="Variable" />
<Action OrderNumber="2" VariableOp="SetString" VariableName="U7a2_滑冰_光id" VariableExpression="${id}" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="false" Source="None" Name="Debug Log 2025-03-01 03:21" Id="69fc929e-adba-4b25-82be-563fb9126710">
<Actions>
<Action OrderNumber="1" LogMessageText="[22:37:24.430] 263 107:40006376:9D10:109.989:100.009:0.031:-1.571" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="2" ActionType="Placeholder" ExecutionDelayExpression="7.01 * 1000" />
<Action OrderNumber="3" LogMessageText="[22:37:31.442] _ActorSetPos AAA:10F:40006377:Usurper of Frost:12809:17823:114.1421:114.1421:0.0000:-2.3563" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="4" ActionType="Placeholder" ExecutionDelayExpression="7.24 * 1000" />
<Action OrderNumber="5" LogMessageText="[22:37:38.677] 264 108:4000439A:9CF9:000088D1:1:0.000:0.000:0.000:-2.356" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="6" ActionType="Placeholder" ExecutionDelayExpression="3.08 * 1000" />
<Action OrderNumber="7" LogMessageText="[22:37:41.760] StartsCasting 14:400043BD:Oracle's Reflection:9D02:Twin Silence:400043BD:Oracle's Reflection:3.200:109.97:99.99:0.00:-1.57" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="42994988-073c-4938-9784-99cccc11f9ff" Name="D. 光之暴走" Enabled="true" RawEnvironmentVariables="phase = P2光暴">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="0. 开始" Id="bcb03661-425f-425f-9b88-6d5312073f0d" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9D14:">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="U7a_phase" VariableExpression="${env:phase}" ActionType="Variable" />
<Action OrderNumber="2" VariableOp="UnsetRegexUniversal" VariableName="^U7a2_光暴" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 获取连线 =&gt; 3" Id="d377912a-eae5-4d26-b152-5a4aa33870a6" RegularExpression="^.{15}\S+ 23:(?&lt;sid&gt;1.{7}):[^:]*:(?&lt;tid&gt;1.{7}):[^:]*:[^:]*:[^:]*:006E">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="phase" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or" />
</Action>
<Action OrderNumber="2" DictVariableOp="Set" DictVariableName="U7a2_光暴_环_pIdx" DictVariableKey="${l:party.indexof(${sid})}" DictVariableValue="${l:party.indexof(${tid})}" ActionType="DictVariable" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="_U7a2_光暴_环:${d:U7a2_光暴_环_pIdx.joinall}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${d:U7a2_光暴_环_pIdx.size}" ExpressionTypeL="String" ExpressionR="6" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="1. 过量光层数 for O2" Id="e2518d56-4790-49f7-9c66-9a9ffa3c02eb" RegularExpression="^.{15}\S+ 1A:8D1:[^:]*:[^:]*:.{8}:[^:]*:(?&lt;tid&gt;.{8}):[^:]*:(?&lt;stack&gt;[^:]+):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="phase" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or" />
</Action>
<Action OrderNumber="2" DictVariableOp="Set" DictVariableValueType="Numeric" DictVariableName="U7a2_光暴_初始光" DictVariableKey="${tid}" DictVariableValue="${stack}" ActionType="DictVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${d:U7a2_光暴_初始光.sum}" ExpressionTypeL="String" ExpressionR="6" ExpressionTypeR="String" ConditionType="NumericLess" />
</Condition>
</Action>
<Action OrderNumber="3" DictVariableOp="Set" DictVariableValueType="Numeric" DictVariableName="U7a2_光暴_当前光" DictVariableKey="${tid}" DictVariableValue="${stack}" ActionType="DictVariable" Asynchronous="False" />
</Actions>
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="3. 验证顺序 + 计算 =&gt; O1" Id="de65178e-2239-49ad-8622-694b73aaeca8" RegularExpression="^_U7a2_光暴_环">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="灰九：    正北开始顺时针正八方站位：MT D4 ST D2 H2 D1 H1 D3，六人根据优先级分别去 C1243A，正东西拉线" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" Description="翻绳 THD：正西开始顺时针斜八方站位：MT ST H1 H2 D4 D3 D2 D1，六人根据优先级分别去 1C24A3，正南北偏顺 30° 拉线" DescriptionOverride="True" />
<Action OrderNumber="3" ActionType="Placeholder" Description="翻绳 HTD：正西开始顺时针斜八方站位：H1 H2 MT ST D4 D3 D2 D1，六人根据优先级分别去 1C24A3，正南北偏顺 30° 拉线" DescriptionOverride="True" />
<Action OrderNumber="4" ActionType="Placeholder" Description="翻绳美服：正西开始顺时针斜八方站位：H1 H2 MT ST D2 D1 D4 D3，ST 或 D3 顺时针补位为正六边形，此时正西顺六人分别去 2C13A4，正南北偏顺 30° 拉线" DescriptionOverride="True" />
<Action OrderNumber="5" ActionType="Placeholder" Description="反正不是决速步，滥用点临时字典 who cares （x" DescriptionOverride="True" />
<Action OrderNumber="6" ActionType="Placeholder" Description="将字典中的键与值（小队优先级）1-8 转换为不同打法下环状顺时针排队的优先级 1-8" DescriptionOverride="True" />
<Action OrderNumber="7" DictVariableOp="Merge" DictVariableName="U7a2_光暴_环_pIdx" DictVariableTarget="U7a2_光暴_环_prio" ActionType="DictVariable" />
<Action OrderNumber="8" DictVariableOp="SetAll" DictVariableName="U7a2_光暴_环_prio" DictVariableKey="${?d: 1=1, 2=3, 3=7, 4=5, 5=6, 6=4, 7=8, 8=2 [${_key}]}" DictVariableValue="${?d: 1=1, 2=3, 3=7, 4=5, 5=6, 6=4, 7=8, 8=2 [${_val}]}" ActionType="DictVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="灰九" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="9" DictVariableOp="SetAll" DictVariableName="U7a2_光暴_环_prio" DictVariableKey="${?d: 1=1, 2=2, 3=3, 4=4, 5=8, 6=7, 7=6, 8=5 [${_key}]}" DictVariableValue="${?d: 1=1, 2=2, 3=3, 4=4, 5=8, 6=7, 7=6, 8=5 [${_val}]}" ActionType="DictVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="翻绳THD" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="10" DictVariableOp="SetAll" DictVariableName="U7a2_光暴_环_prio" DictVariableKey="${?d: 1=3, 2=4, 3=1, 4=2, 5=8, 6=7, 7=6, 8=5 [${_key}]}" DictVariableValue="${?d: 1=3, 2=4, 3=1, 4=2, 5=8, 6=7, 7=6, 8=5 [${_val}]}" ActionType="DictVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="翻绳HTD" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="11" ActionType="Placeholder" Description="　　美服的四人侧顺时针补位要根据南侧是否四人均连线 分为两种不同优先级" DescriptionOverride="True" />
<Action OrderNumber="12" DictVariableOp="SetAll" DictVariableName="U7a2_光暴_环_prio" DictVariableKey="${?d: 1=3, 2=4, 3=1, 4=2, 5=6, 6=5, 7=8, 8=7 [${_key}]}" DictVariableValue="${?d: 1=3, 2=4, 3=1, 4=2, 5=6, 6=5, 7=8, 8=7 [${_val}]}" ActionType="DictVariable">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="翻绳美" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${d:U7a2_光暴_环_pIdx.ekey(5)} &amp;&amp; ${d:U7a2_光暴_环_pIdx.ekey(6)} &amp;&amp; ${d:U7a2_光暴_环_pIdx.ekey(7)} &amp;&amp; ${d:U7a2_光暴_环_pIdx.ekey(8)}" ExpressionTypeL="Numeric" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="13" DictVariableOp="SetAll" DictVariableName="U7a2_光暴_环_prio" DictVariableKey="${?d: 1=4, 2=5, 3=2, 4=3, 5=7, 6=6, 7=1, 8=8 [${_key}]}" DictVariableValue="${?d: 1=4, 2=5, 3=2, 4=3, 5=7, 6=6, 7=1, 8=8 [${_val}]}" ActionType="DictVariable">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="翻绳美" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${d:U7a2_光暴_环_pIdx.ekey(5)} &amp;&amp; ${d:U7a2_光暴_环_pIdx.ekey(6)} &amp;&amp; ${d:U7a2_光暴_环_pIdx.ekey(7)} &amp;&amp; ${d:U7a2_光暴_环_pIdx.ekey(8)}" ExpressionTypeL="Numeric" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="14" ActionType="Placeholder" Description="从优先级最高的起始，将字典的数据按顺序提取为一个列表，代表六人连接顺序" DescriptionOverride="True" />
<Action OrderNumber="15" ListVariableOp="Push" ListVariableName="U7a2_光暴_环_prio" ListVariableExpression="${d:U7a2_光暴_环_prio.minkey}" ActionType="ListVariable" />
<Action OrderNumber="16" ListVariableOp="Push" ListVariableName="U7a2_光暴_环_prio" ListVariableExpression="${d:U7a2_光暴_环_prio[${l:U7a2_光暴_环_prio[-1]}]}" ActionType="ListVariable" />
<Action OrderNumber="17" ListVariableOp="Push" ListVariableName="U7a2_光暴_环_prio" ListVariableExpression="${d:U7a2_光暴_环_prio[${l:U7a2_光暴_环_prio[-1]}]}" ActionType="ListVariable" />
<Action OrderNumber="18" ListVariableOp="Push" ListVariableName="U7a2_光暴_环_prio" ListVariableExpression="${d:U7a2_光暴_环_prio[${l:U7a2_光暴_环_prio[-1]}]}" ActionType="ListVariable" />
<Action OrderNumber="19" ListVariableOp="Push" ListVariableName="U7a2_光暴_环_prio" ListVariableExpression="${d:U7a2_光暴_环_prio[${l:U7a2_光暴_环_prio[-1]}]}" ActionType="ListVariable" />
<Action OrderNumber="20" ListVariableOp="Push" ListVariableName="U7a2_光暴_环_prio" ListVariableExpression="${d:U7a2_光暴_环_prio[${l:U7a2_光暴_环_prio[-1]}]}" ActionType="ListVariable" />
<Action OrderNumber="21" ActionType="Placeholder" Description="检查是否是顺序的，否则倒转环" DescriptionOverride="True" />
<Action OrderNumber="22" ListVariableOp="Build" ListVariableExpression=":${l:U7a2_光暴_环_prio.join(:, &quot;1,6,5,4,3,2&quot;)}" ListVariableTarget="U7a2_光暴_环_prio" ActionType="ListVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="(${l:U7a2_光暴_环_prio[2]} - ${l:U7a2_光暴_环_prio[1]}) %% 8" ExpressionTypeL="Numeric" ExpressionR="3" ExpressionTypeR="String" ConditionType="NumericGreater" />
</Condition>
</Action>
<Action OrderNumber="23" ActionType="Placeholder" Description="转换回 partyIndex" DescriptionOverride="True" />
<Action OrderNumber="24" ListVariableOp="Copy" ListVariableName="U7a2_光暴_环_prio" ListVariableTarget="U7a2_光暴_环_pIdx" ActionType="ListVariable" />
<Action OrderNumber="25" ListVariableOp="SetAll" ListVariableName="U7a2_光暴_环_pIdx" ListVariableExpression="${?d: 1=1, 3=2, 7=3, 5=4, 6=5, 4=6, 8=7, 2=8 [${_this}]}" ActionType="ListVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="灰九" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="26" ListVariableOp="SetAll" ListVariableName="U7a2_光暴_环_pIdx" ListVariableExpression="${?d: 1=1, 2=2, 3=3, 4=4, 8=5, 7=6, 6=7, 5=8 [${_this}]}" ActionType="ListVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="翻绳THD" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="27" ListVariableOp="SetAll" ListVariableName="U7a2_光暴_环_pIdx" ListVariableExpression="${?d: 3=1, 4=2, 1=3, 2=4, 8=5, 7=6, 6=7, 5=8 [${_this}]}" ActionType="ListVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="翻绳HTD" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="28" ListVariableOp="SetAll" ListVariableName="U7a2_光暴_环_pIdx" ListVariableExpression="${?d: 3=1, 4=2, 1=3, 2=4, 6=5, 5=6, 8=7, 7=8 [${_this}]}" ActionType="ListVariable">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="翻绳美" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${d:U7a2_光暴_环_pIdx.ekey(5)} &amp;&amp; ${d:U7a2_光暴_环_pIdx.ekey(6)} &amp;&amp; ${d:U7a2_光暴_环_pIdx.ekey(7)} &amp;&amp; ${d:U7a2_光暴_环_pIdx.ekey(8)}" ExpressionTypeL="Numeric" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="29" ListVariableOp="SetAll" ListVariableName="U7a2_光暴_环_pIdx" ListVariableExpression="${?d: 4=1, 5=2, 2=3, 3=4, 7=5, 6=6, 1=7, 8=8 [${_this}]}" ActionType="ListVariable">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="翻绳美" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${d:U7a2_光暴_环_pIdx.ekey(5)} &amp;&amp; ${d:U7a2_光暴_环_pIdx.ekey(6)} &amp;&amp; ${d:U7a2_光暴_环_pIdx.ekey(7)} &amp;&amp; ${d:U7a2_光暴_环_pIdx.ekey(8)}" ExpressionTypeL="Numeric" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="30" ActionType="Placeholder" Description="将按环顺序的六人小队 idx 转换为最终踩塔 dir6 顺序的六人小队 idx" DescriptionOverride="True" />
<Action OrderNumber="31" ListVariableOp="Build" ListVariableExpression=":${l:U7a2_光暴_环_pIdx.join(:, &quot;6,2,4,1,5,3&quot;)}" ListVariableTarget="U7a2_光暴_dir6_pIdx" ActionType="ListVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="灰九" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="32" ListVariableOp="Build" ListVariableExpression=":${l:U7a2_光暴_环_pIdx.join(:, &quot;5,1,4,2,6,3&quot;)}" ListVariableTarget="U7a2_光暴_dir6_pIdx" ActionType="ListVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="翻绳THD" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="33" ListVariableOp="Build" ListVariableExpression=":${l:U7a2_光暴_环_pIdx.join(:, &quot;5,1,4,2,6,3&quot;)}" ListVariableTarget="U7a2_光暴_dir6_pIdx" ActionType="ListVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="翻绳HTD" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="34" ListVariableOp="Build" ListVariableExpression=":${l:U7a2_光暴_环_pIdx.join(:, &quot;5,3,6,2,4,1&quot;)}" ListVariableTarget="U7a2_光暴_dir6_pIdx" ActionType="ListVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="翻绳美" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="35" VariableOp="SetNumeric" VariableName="U7a2_光暴_myDir6" VariableExpression="${l:U7a2_光暴_dir6_pIdx.indexof(${v:myIdx})} - 1" ActionType="Variable" />
<Action OrderNumber="36" ActionType="Placeholder" Description="无点名" DescriptionOverride="True" />
<Action OrderNumber="37" ListVariableOp="Build" ListVariableExpression=",1,2,3,4,5,6,7,8" ListVariableTarget="U7a2_光暴_无_pIdx" ActionType="ListVariable" />
<Action OrderNumber="38" ListVariableOp="Filter" ListVariableExpressionType="Numeric" ListVariableName="U7a2_光暴_无_pIdx" ListVariableExpression="!${l:U7a2_光暴_环_pIdx.contain(${_this})}" ListVariableTarget="U7a2_光暴_无_pIdx" ActionType="ListVariable" />
<Action OrderNumber="39" ActionType="Placeholder" Description="输出" DescriptionOverride="True" />
<Action OrderNumber="40" LogMessageText="U7a2_光暴:${l:U7a2_光暴_dir6_pIdx.join(&quot;&quot;)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="[D] 模拟连线" Id="e1b7c585-7817-4d3a-b029-9f82628f31f2" RegularExpression="^D_U7a2_光暴:(.)(.)(.)(.)(.)(.)">
<Actions>
<Action OrderNumber="1" LogMessageText="[00:00:00.000] Tether 23:${l:party[$1]}:队员:${l:party[$2]}:队员:0000:0000:006E:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="2" LogMessageText="[00:00:00.000] Tether 23:${l:party[$2]}:队员:${l:party[$3]}:队员:0000:0000:006E:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="3" LogMessageText="[00:00:00.000] Tether 23:${l:party[$3]}:队员:${l:party[$4]}:队员:0000:0000:006E:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="4" LogMessageText="[00:00:00.000] Tether 23:${l:party[$4]}:队员:${l:party[$5]}:队员:0000:0000:006E:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="5" LogMessageText="[00:00:00.000] Tether 23:${l:party[$5]}:队员:${l:party[$6]}:队员:0000:0000:006E:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="6" LogMessageText="[00:00:00.000] Tether 23:${l:party[$6]}:队员:${l:party[$1]}:队员:0000:0000:006E:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="7" TriggerOp="CancelAllTrigger" ActionType="Trigger" ExecutionDelayExpression="3000" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="Debug Log /e u7a dd 123456" Id="091506a7-ee15-41a8-a00c-43d4ef070d8f" RegularExpression="^.{15}\S+ 00:0038::(?i)u7a dd (?&lt;pIdx6&gt;[1-8]{6})">
<Actions>
<Action OrderNumber="1" LogMessageText="[22:18:13.907] StartsCasting 14:40002912:Usurper of Frost:9D14:Light Rampant:40002912:Usurper of Frost:4.700:99.99:99.99:0.00:1.11" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="2" ActionType="Placeholder" ExecutionDelayExpression="0.81 * 1000" />
<Action OrderNumber="3" LogMessageText="D_U7a2_光暴:${pIdx6}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
<Trigger Enabled="false" Source="None" Name="Debug Log G9（MT-D4-D2-H2-D1-D3）" Id="0fc0286f-50ad-4dc0-930c-80ee53506573" RegularExpression="">
<Actions>
<Action OrderNumber="1" LogMessageText="[22:18:08.907] StartsCasting 14:40002912:Usurper of Frost:9D14:Light Rampant:40002912:Usurper of Frost:4.700:99.99:99.99:0.00:1.11" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="2" ActionType="Placeholder" ExecutionDelayExpression="0.81 * 1000" />
<Action OrderNumber="3" LogMessageText="D_U7a2_光暴:186457" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="4" ActionType="Placeholder" ExecutionDelayExpression="13.54 * 1000" />
<Action OrderNumber="5" LogMessageText="[22:18:28.260] 263 107:4000292C:9D1B:100.009:116.001:0.000:0.000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="6" ActionType="Placeholder" ExecutionDelayExpression="3.05 * 1000" />
<Action OrderNumber="7" LogMessageText="[22:18:31.302] 263 107:40002934:9D1B:100.009:83.987:0.000:0.000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers />
</Folder>
<Folder Id="9e39f32d-4ebb-47a7-82da-20a14c883f36" Name="P3" Enabled="true">
<Folders>
<Folder Id="a0d94da7-8577-480e-b605-b0099321ab45" Name="A. 一运" Enabled="true" RawEnvironmentVariables="phase = P3一运">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="0. 初始化 时间压缩" Id="5a125505-4d23-4d12-89da-2df46529f686" RegularExpression="^.{15}\S+ 14:(?&lt;id&gt;4.{7}):[^:]+:9D4A:">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="U7a_phase" VariableExpression="${env:phase}" ActionType="Variable" />
<Action OrderNumber="2" VariableOp="UnsetRegexUniversal" VariableName="^U7a3_一运" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 处理数据          =&gt; O1" Id="bafca450-7d2c-4abd-a39f-de13badc1443" RegularExpression="^_U7a3_一运_点名">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="TH   0 短　   1 冰　   2 中　   3 长高   4 长低" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" Asynchronous="False" Description="D    5 短高   6 短低   7 中　   8 长　   9 冰　" DescriptionOverride="True" />
<Action OrderNumber="3" ActionType="Placeholder" Asynchronous="False" Description="转化为优先级顺序的小队列表" DescriptionOverride="True" />
<Action OrderNumber="4" ListVariableOp="Build" ListVariableExpression=":${l:U7a3_一运_全队点名.join(:, &quot;1,2,3,4,5,6,7,8&quot;)}" ListVariableTarget="tmp_prio2Buff" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3一运]}" ExpressionTypeL="String" ExpressionR="国" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="5" ListVariableOp="Build" ListVariableExpression=":${l:U7a3_一运_全队点名.join(:, &quot;2,1,3,4,6,5,7,8&quot;)}" ListVariableTarget="tmp_prio2Buff" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3一运]}" ExpressionTypeL="String" ExpressionR="美" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="6" ActionType="Placeholder" Asynchronous="False" Description="列表应有两个 3、两个 5，将后一个 3/5 变为 4/6 （低优先级）" DescriptionOverride="True" />
<Action OrderNumber="7" ListVariableOp="Set" ListVariableName="tmp_prio2Buff" ListVariableExpression="4" ListVariableIndex="${l:tmp_prio2Buff.lastindexof(3)}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="8" ListVariableOp="Set" ListVariableName="tmp_prio2Buff" ListVariableExpression="6" ListVariableIndex="${l:tmp_prio2Buff.lastindexof(5)}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="9" ActionType="Placeholder" Asynchronous="False" Description="转换回去" DescriptionOverride="True" />
<Action OrderNumber="10" ListVariableOp="Build" ListVariableExpression=":${l:tmp_prio2Buff.join(:, &quot;1,2,3,4,5,6,7,8&quot;)}" ListVariableTarget="U7a3_一运_全队点名" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3一运]}" ExpressionTypeL="String" ExpressionR="国" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="11" ListVariableOp="Build" ListVariableExpression=":${l:tmp_prio2Buff.join(:, &quot;2,1,3,4,6,5,7,8&quot;)}" ListVariableTarget="U7a3_一运_全队点名" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3一运]}" ExpressionTypeL="String" ExpressionR="美" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="12" ListVariableName="tmp_prio2Buff" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="13" ActionType="Placeholder" Asynchronous="False" Description="此时为小队顺序的八人对应的 buff（细分），如 [0,3,2,4,5,6,9,7]" DescriptionOverride="True" />
<Action OrderNumber="14" ListVariableOp="Build" ListVariableExpression=",${f:pick(${l:U7a3_一运_全队点名[${v:myIdx}]}): &#xD;&#xA;  &quot;散,记录外,摊,引导,摊,对侧&quot;,&#xD;&#xA;  &quot;摊,记录外,摊,引导,摊,对侧&quot;,&#xD;&#xA;  &quot;摊,记录外,散,挂机,摊,引导&quot;,&#xD;&#xA;  &quot;摊,引导,摊,记录内,散,对侧&quot;,&#xD;&#xA;  &quot;摊,引导,摊,记录内,散,对侧&quot;,&#xD;&#xA;  &#xD;&#xA;  &quot;散,记录外,摊,引导,摊,对侧&quot;,&#xD;&#xA;  &quot;散,记录外,摊,引导,摊,对侧&quot;,&#xD;&#xA;  &quot;摊,记录内,散,挂机,摊,引导&quot;,&#xD;&#xA;  &quot;摊,引导,摊,记录内,散,对侧&quot;,&#xD;&#xA;  &quot;摊,引导,摊,记录内,摊,对侧&quot;,&#xD;&#xA;}" ListVariableTarget="U7a3_一运_自身路线" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="15" LogMessageText="U7a3_一运_self:my点名:${l:U7a3_一运_全队点名[${v:myIdx}]}:点名:${l:U7a3_一运_全队点名.join(&quot;&quot;)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="3. 获取沙漏 for 4" Id="95428023-47c8-4fae-9573-b10952083f68" RegularExpression="^.{15}\S+ 03:(?&lt;id&gt;4.{7}):([^:]*:){7}17832:([^:]*:){9}(?&lt;h&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" DictVariableOp="Set" DictVariableValueType="Numeric" DictVariableName="U7a3_一运_沙漏dir8" DictVariableKey="${id}" DictVariableValue="roundir(${h} + π, 8)" ActionType="DictVariable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="5. 沙漏旋转          =&gt; O3" Id="da1ec9f9-b211-452d-91e7-ecb8e64ffdbf" RegularExpression="^.{15}\S+ 1A:B9A:[^:]*:[^:]*:.{8}:[^:]*:(?&lt;id&gt;4.{7}):[^:]*:(?&lt;type&gt;15C|10D)(:|$)">
<Actions>
<Action OrderNumber="1" LogMessageText="U7a3_一运_沙漏:${id}:is顺:${n: ${type} == 15C}:dir8:${d:U7a3_一运_沙漏dir8[${id}]}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="4. 获取加速连线 * 3  =&gt; O2" Id="d73d6349-6e5e-4c24-a6c7-b79a37e5eb5b" RegularExpression="^.{15}\S+ 23:(?&lt;sid&gt;4.{7}):[^:]*:4.{7}:[^:]*:[^:]*:[^:]*:0086:">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="phase" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or" />
</Action>
<Action OrderNumber="2" VariableOp="Increment" VariableName="U7a3_一运_短沙漏_Σx" VariableExpression="sin(dir2rad(${d:U7a3_一运_沙漏dir8[${sid}]}, 8))" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="Increment" VariableName="U7a3_一运_短沙漏_Σy" VariableExpression="cos(dir2rad(${d:U7a3_一运_沙漏dir8[${sid}]}, 8))" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" VariableOp="Increment" VariableName="U7a3_一运_短沙漏_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="5" VariableOp="SetNumeric" VariableName="U7a3_一运_dir8" VariableExpression="roundvec(-${v:U7a3_一运_短沙漏_Σx}, -${v:U7a3_一运_短沙漏_Σy}, 8)" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a3_一运_短沙漏_n}" ExpressionTypeL="String" ExpressionR="3" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" VariableOp="SetNumeric" VariableName="U7a3_一运_myDir8" VariableExpression="(${v:U7a3_一运_dir8} + ${?l: 4,4,2,3,5, 1,7,6,0,0 [${n: ${l:U7a3_一运_全队点名[${v:myIdx}]} + 1}]}) % 8" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a3_一运_短沙漏_n}" ExpressionTypeL="String" ExpressionR="3" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3一运]}" ExpressionTypeL="String" ExpressionR="国" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="7" VariableOp="SetNumeric" VariableName="U7a3_一运_myDir8" VariableExpression="(${v:U7a3_一运_dir8} + ${?l: 4,4,6,3,5, 1,7,2,0,0 [${n: ${l:U7a3_一运_全队点名[${v:myIdx}]} + 1}]}) % 8" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a3_一运_短沙漏_n}" ExpressionTypeL="String" ExpressionR="3" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3一运]}" ExpressionTypeL="String" ExpressionR="美" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="8" LogMessageText="U7a3_一运:dir8:${v:U7a3_一运_dir8}:myDir8:${v:U7a3_一运_myDir8}:my点名:${l:U7a3_一运_全队点名[${v:myIdx}]}:冰isD:${v:U7a3_一运_冰isD}:点名:${l:U7a3_一运_全队点名.join(&quot;&quot;)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a3_一运_短沙漏_n}" ExpressionTypeL="String" ExpressionR="3" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="1. 获取冰火 * 8      =&gt; 2" Id="dc6b8c9e-6552-4813-bd0f-a7753e405005" RegularExpression="^.{15}\S+ 1A:99(?&lt;type&gt;7|E):([^:]|: )+:(?&lt;t&gt;[^:]+):.{8}:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="phase" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or" />
</Action>
<Action OrderNumber="2" ActionType="Placeholder" Asynchronous="False" Description="TH   0 短　   1 冰　   2 中　   3 长高   4 长低" DescriptionOverride="True" />
<Action OrderNumber="3" ActionType="Placeholder" Asynchronous="False" Description="D    5 短高   6 短低   7 中　   8 长　   9 冰　" DescriptionOverride="True" />
<Action OrderNumber="4" ListVariableOp="Set" ListVariableName="U7a3_一运_全队点名" ListVariableExpression="${?d:&#xD;&#xA;  11 7 0 = 0,&#xD;&#xA;  21 E 0 = 1,&#xD;&#xA;  21 7 0 = 2,&#xD;&#xA;  31 7 0 = 3,&#xD;&#xA;  11 7 1 = 5,&#xD;&#xA;  21 7 1 = 7,&#xD;&#xA;  31 7 1 = 8,&#xD;&#xA;  21 E 1 = 9&#xD;&#xA;  [${n:round(${t})} ${type} ${n: ${l:party.indexof(${tid})} &gt; 4}]&#xD;&#xA;}" ListVariableIndex="${l:party.indexof(${tid})}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="5" VariableOp="SetNumeric" VariableName="U7a3_一运_冰isD" VariableExpression="${l:party.indexof(${tid})} &gt; 4" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${type}" ExpressionTypeL="String" ExpressionR="E" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="6" ActionType="Placeholder" Asynchronous="False" Description="* 8 =&gt; 2" DescriptionOverride="True" />
<Action OrderNumber="7" LogMessageText="_U7a3_一运_点名" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a3_一运_全队点名.size}" ExpressionTypeL="String" ExpressionR="8" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${l:U7a3_一运_全队点名.indexof(&quot;&quot;)}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="false" Source="None" Name="Debug Log 2025-03-01 06:28" Id="0015da4a-461c-4a1f-986c-77f5b154f3e0" RegularExpression="">
<Actions>
<Action OrderNumber="1" LogMessageText="[22:21:01.091] StartsCasting 14:40002939:Oracle of Darkness:9D4A:Ultimate Relativity:40002939:Oracle of Darkness:9.700:99.99:99.99:0.00:3.14" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="2" ActionType="Placeholder" ExecutionDelayExpression="1.00 * 1000" />
<Action OrderNumber="3" LogMessageText="[22:21:02.091] StatusAdd 1A:997:Spell-in-Waiting: Dark Fire III:31.00:E0000000::${_me.id}:自身:00:225932:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="4" LogMessageText="[22:21:02.091] StatusAdd 1A:997:Spell-in-Waiting: Dark Fire III:31.00:E0000000::${l:party[2]}:队员2:00:142359:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="5" LogMessageText="[22:21:02.091] StatusAdd 1A:997:Spell-in-Waiting: Dark Fire III:21.00:E0000000::${l:party[3]}:队员3:00:226089:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="6" LogMessageText="[22:21:02.091] StatusAdd 1A:99E:Spell-in-Waiting: Dark Blizzard III:21.00:E0000000::${l:party[4]}:队员4:00:155336:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="7" LogMessageText="[22:21:02.091] StatusAdd 1A:997:Spell-in-Waiting: Dark Fire III:31.00:E0000000::${l:party[5]}:队员5:00:157227:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="8" LogMessageText="[22:21:02.091] StatusAdd 1A:997:Spell-in-Waiting: Dark Fire III:21.00:E0000000::${l:party[6]}:队员6:00:157247:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="9" LogMessageText="[22:21:02.091] StatusAdd 1A:997:Spell-in-Waiting: Dark Fire III:11.00:E0000000::${l:party[7]}:队员7:00:156987:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="10" LogMessageText="[22:21:02.091] StatusAdd 1A:997:Spell-in-Waiting: Dark Fire III:11.00:E0000000::${l:party[8]}:队员8:00:142328:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="11" LogMessageText="[22:21:01.948] AddCombatant 03:40002956:Delight's Hourglass:00:64:0000:00::9825:17832:188300:188300:10000:10000:::93.28:93.28:0.00:0.79" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="12" LogMessageText="[22:21:01.948] AddCombatant 03:40002957:Delight's Hourglass:00:64:0000:00::9825:17832:188300:188300:10000:10000:::90.50:100.00:0.00:1.57" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="13" LogMessageText="[22:21:01.948] AddCombatant 03:40002958:Delight's Hourglass:00:64:0000:00::9825:17832:188300:188300:10000:10000:::93.28:106.72:0.00:2.36" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="14" LogMessageText="[22:21:01.948] AddCombatant 03:4000295B:Delight's Hourglass:00:64:0000:00::9825:17832:188300:188300:10000:10000:::109.50:100.00:0.00:-1.57" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="15" LogMessageText="[22:21:01.948] AddCombatant 03:40002959:Delight's Hourglass:00:64:0000:00::9825:17832:188300:188300:10000:10000:::100.00:109.50:0.00:-3.14" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="16" LogMessageText="[22:21:01.948] AddCombatant 03:4000295A:Delight's Hourglass:00:64:0000:00::9825:17832:188300:188300:10000:10000:::106.72:106.72:0.00:-2.36" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="17" LogMessageText="[22:21:01.948] AddCombatant 03:4000295D:Delight's Hourglass:00:64:0000:00::9825:17832:188300:188300:10000:10000:::100.00:90.50:0.00:0.00" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="18" LogMessageText="[22:21:01.948] AddCombatant 03:4000295C:Delight's Hourglass:00:64:0000:00::9825:17832:188300:188300:10000:10000:::106.72:93.28:0.00:-0.79" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="19" ActionType="Placeholder" ExecutionDelayExpression="3.22 * 1000" />
<Action OrderNumber="20" LogMessageText="[22:21:05.308] Tether 23:4000295C:Delight's Hourglass:40002939:Oracle of Darkness:0000:0000:0086:40002939:000F:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="21" LogMessageText="[22:21:05.308] Tether 23:40002959:Delight's Hourglass:40002939:Oracle of Darkness:0000:0000:0086:40002939:000F:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="22" LogMessageText="[22:21:05.308] Tether 23:40002957:Delight's Hourglass:40002939:Oracle of Darkness:0000:0000:0086:40002939:000F:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="23" ActionType="Placeholder" ExecutionDelayExpression="8.84 * 1000" />
<Action OrderNumber="24" LogMessageText="[22:21:14.148] StatusAdd 1A:B9A:Unknown_B9A:4.00:E0000000::40002959:Delight's Hourglass:15C:188300:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="25" LogMessageText="[22:21:14.148] StatusAdd 1A:B9A:Unknown_B9A:4.00:E0000000::4000295C:Delight's Hourglass:15C:188300:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="26" LogMessageText="[22:21:14.148] StatusAdd 1A:B9A:Unknown_B9A:4.00:E0000000::40002957:Delight's Hourglass:15C:188300:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="27" ActionType="Placeholder" ExecutionDelayExpression="10.01 * 1000" />
<Action OrderNumber="28" LogMessageText="[22:21:24.158] StatusAdd 1A:B9A:Unknown_B9A:4.00:E0000000::40002958:Delight's Hourglass:15C:188300:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="29" LogMessageText="[22:21:24.158] StatusAdd 1A:B9A:Unknown_B9A:4.00:E0000000::4000295D:Delight's Hourglass:10D:188300:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="30" LogMessageText="[22:21:24.158] StatusAdd 1A:B9A:Unknown_B9A:4.00:E0000000::4000295B:Delight's Hourglass:10D:188300:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="31" ActionType="Placeholder" ExecutionDelayExpression="11.03 * 1000" />
<Action OrderNumber="32" LogMessageText="[22:21:35.191] StatusAdd 1A:B9A:Unknown_B9A:4.00:E0000000::4000295A:Delight's Hourglass:15C:188300:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="33" LogMessageText="[22:21:35.191] StatusAdd 1A:B9A:Unknown_B9A:4.00:E0000000::40002956:Delight's Hourglass:10D:188300:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="d18b9717-8951-4c2f-8508-ace16575be6d" Name="B. 二运" Enabled="true" RawEnvironmentVariables="phase = P3二运">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="0. 初始化 深渊狂水" Id="5f7eb60c-fa7d-453c-a6f2-3c5a3a771b50" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9D4E:">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="U7a_phase" VariableExpression="${env:phase}" ActionType="Variable" />
<Action OrderNumber="2" VariableOp="UnsetRegexUniversal" VariableName="^U7a3_二运" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" ListVariableOp="SetAll" ListVariableName="U7a3_二运_idxToBuff" ListVariableExpression="0" ListVariableIndex="8" ActionType="ListVariable" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="3. 地火获取 * 2 =&gt; 4" Id="446f8a6a-8fa2-44f4-a6ef-71518cf05499" RegularExpression="^.{15}\S+ 105:Add:(?&lt;id&gt;4.{7}):.*BNpcID:1EB0FF:.*Heading:(?&lt;h&gt;[^:]*):.*PosX:(?&lt;x&gt;(99|100)[^:]+):PosY:(?&lt;y&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="只获取指向 dir8 = 0 1 2 3 的中心实体（判断起始方向），或正南的实体（判断顺逆）" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="U7a3_二运_is顺" VariableExpression="cos(${h}) * (${x} - 100) &gt; sin(${h}) * (${y} - 100)" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="round(${y}) &gt; 100" ExpressionTypeL="Numeric" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="U7a3_二运_dir8" VariableExpression="roundir(${h}, 8) % 4" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="round(${y}) = 100" ExpressionTypeL="Numeric" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" LogMessageText="_U7a3_二运_地火" LogProcess="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:U7a3_二运_dir8}${ev:U7a3_二运_is顺}" ExpressionTypeL="String" ExpressionR="11" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="round(${y}) = 100 &amp;&amp; roundir(${h}, 8) &lt; 4" ExpressionTypeL="Numeric" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="round(${y}) &gt; 100" ExpressionTypeL="Numeric" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="1. 水分摊点名 =&gt; 2" Id="27cd8f31-b33a-4cda-b6ba-6076fd0683e3" RegularExpression="^.{15}\S+ 1A:99D:(?:[^:]|: )*:(?&lt;t&gt;(10|29|38)[^:]+):.{8}:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" ListVariableOp="Set" ListVariableExpressionType="Numeric" ListVariableName="U7a3_二运_idxToBuff" ListVariableExpression="round(${t} / 13)" ListVariableIndex="${l:party.indexof(${tid})}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="_U7a3_二运_水:${l:U7a3_二运_idxToBuff.join()}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a3_二运_idxToBuff.sum}" ExpressionTypeL="String" ExpressionR="12" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2a. 初始分组（非科技）=&gt; O1" Id="a82ee512-5a32-4bdc-8038-86330863cbc2" RegularExpression="^_U7a3_二运_水:">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="条件：非科技" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" Asynchronous="False" Description="先从配置提取优先级顺序 =&gt; 八人 idx" DescriptionOverride="True" />
<Action OrderNumber="3" ListVariableOp="Build" ListVariableExpression=",${?d:&#xD;&#xA;  &quot;双分国  = 3,4,1,2,5,6,7,8&quot;,&#xD;&#xA;  &quot;双分美  = 4,3,2,1,5,6,7,8&quot;,&#xD;&#xA;  &quot;单分THD = 1,2,3,4,5,6,7,8&quot;,&#xD;&#xA;  &quot;单分日  = 4,3,2,1,5,6,7,8&quot;,&#xD;&#xA;  &quot;单分莫  = 1,2,3,4,8,7,6,5&quot;&#xD;&#xA;  [${pd:U7a_cfg[P3二运]}]&#xD;&#xA;}" ListVariableTarget="U7a3_二运_水idx" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="4" ActionType="Placeholder" Asynchronous="False" Description="然后按照点名时长排序，排序后为 无高 无低 短高 短低 中高 中低 长高 长低 顺序的八人 idx" DescriptionOverride="True" />
<Action OrderNumber="5" ListVariableOp="SortByKeys" ListVariableName="U7a3_二运_水idx" ListVariableExpression="n+: ${l:U7a3_二运_idxToBuff[${_this}]}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="6" VariableOp="SetNumeric" VariableName="U7a3_二运_my摊isG1" VariableExpression="${l:U7a3_二运_水idx.indexof(${v:myIdx})} % 2 = 1" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="7" VariableOp="SetNumeric" VariableName="U7a3_二运_my散isG1" VariableExpression="${f:startwith(双分):${pd:U7a_cfg[P3二运]}} ? ${v:myIdx_isG1} : ${v:U7a3_二运_my摊isG1}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="8" ActionType="Placeholder" Asynchronous="False" Description="暂时仅双分 / 科技使用 idx：" DescriptionOverride="True" />
<Action OrderNumber="9" VariableOp="SetNumeric" VariableName="U7a3_二运_my散Idx" VariableExpression="0" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运]}" ExpressionTypeL="String" ExpressionR="^单分" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Action>
<Action OrderNumber="10" VariableOp="SetNumeric" VariableName="U7a3_二运_my散Idx" VariableExpression="(${v:myIdx} - 1) % 4 + 1" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运]}" ExpressionTypeL="String" ExpressionR="^双分" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Action>
<Action OrderNumber="11" LogMessageText="U7a3_二运_分组:isG1:${v:U7a3_二运_my摊isG1}:${l:U7a3_二运_水idx.join(&quot;&quot;)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运]}" ExpressionTypeL="String" ExpressionR="单分科" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="4. 处理地火 =&gt; O2" Id="6772444b-c0e9-48d8-a0e7-bafa8cda2288" RegularExpression="^_U7a3_二运_地火">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="tmp_1组三火dir8" VariableExpression="(${v:U7a3_二运_dir8} % 4 + (${v:U7a3_二运_is顺} ? 1 : -1)) %% 8" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运分半场]}" ExpressionTypeL="String" ExpressionR="地火" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="tmp_1组三火dir8" VariableExpression="(${v:U7a3_二运_dir8} + (${v:U7a3_二运_is顺} ? 1 : -1)) %% 4" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运分半场]}" ExpressionTypeL="String" ExpressionR="地火-" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="tmp_1组三火dir8" VariableExpression="((${v:U7a3_二运_dir8} + 2) %% 4 + (${v:U7a3_二运_is顺} ? -1 : 1)) %% 8" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运分半场]}" ExpressionTypeL="String" ExpressionR="地火--" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" VariableOp="SetNumeric" VariableName="tmp_1组二火dir8" VariableExpression="(${v:tmp_1组三火dir8} + (${v:U7a3_二运_is顺} ? 1 : -1)) %% 8" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="5" VariableOp="SetNumeric" VariableName="tmp_2组三火dir8" VariableExpression="(${v:tmp_1组三火dir8} + 4) %% 8" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="6" VariableOp="SetNumeric" VariableName="tmp_2组二火dir8" VariableExpression="(${v:tmp_1组二火dir8} + 4) %% 8" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="7" LogMessageText="U7a3_二运_地火:is顺:${v:U7a3_二运_is顺}:dir8:${v:U7a3_二运_dir8}:1组dir8:${v:tmp_1组三火dir8}:${v:tmp_1组二火dir8}:2组dir8:${v:tmp_2组三火dir8}:${v:tmp_2组二火dir8}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
<Action OrderNumber="8" VariableOp="UnsetRegex" VariableName="^tmp_[12]组[二三]火" ActionType="Variable" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="2b. 初始分组（科技 &amp;&amp; 指挥）=&gt; O1" Id="93e13d80-bd93-417b-b90e-c3c9b9783a47" RegularExpression="^_U7a3_二运_水:">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="条件：科技" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" Description="拟定优先级：T M H R （为了使同组远程在近战后、排序后每对必然为 近近 远远 近远 之一）" DescriptionOverride="True" />
<Action OrderNumber="3" ListVariableOp="Build" ListVariableExpression=",1,2,5,6,3,4,7,8" ListVariableTarget="U7a3_二运_水idx" ActionType="ListVariable" />
<Action OrderNumber="4" ActionType="Placeholder" Description="然后按照点名时长排序，排序后为 无高 无低 短高 短低 中高 中低 长高 长低 顺序的八人 idx" DescriptionOverride="True" />
<Action OrderNumber="5" ListVariableOp="SortByKeys" ListVariableName="U7a3_二运_水idx" ListVariableExpression="n+: ${l:U7a3_二运_idxToBuff[${_this}]}" ActionType="ListVariable" />
<Action OrderNumber="6" ActionType="Placeholder" Description="检查四组中哪几组是近远（列表 2n-1 与 2n 两项只有一个是 1/2/5/6），可能有 0 2 4 组" DescriptionOverride="True" />
<Action OrderNumber="7" ListVariableOp="SetAll" ListVariableName="tmp_近远组" ListVariableExpression="${_idx}" ListVariableIndex="4" ActionType="ListVariable" />
<Action OrderNumber="8" ListVariableOp="Filter" ListVariableExpressionType="Numeric" ListVariableName="tmp_近远组" ListVariableExpression="${f:contain(${l:U7a3_二运_水idx[${n: ${_idx} * 2 - 1}]}):1256} != ${f:contain(${l:U7a3_二运_水idx[${n: ${_idx} * 2}]}):1256}" ListVariableTarget="tmp_近远组" ActionType="ListVariable" />
<Action OrderNumber="9" ActionType="Placeholder" Description="如果有 &gt;= 2 组不同，调换最后一组对应的八人列表中的两个 idx" DescriptionOverride="True" />
<Action OrderNumber="10" ListVariableOp="PopFirst" ListVariableName="U7a3_二运_水idx" ListVariableIndex="${l:tmp_近远组[-1]} * 2 - 1" ListVariableTarget="tmp_lowIdx" ActionType="ListVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:tmp_近远组.size}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="NumericGreaterEqual" />
</Condition>
</Action>
<Action OrderNumber="11" ListVariableOp="Insert" ListVariableName="U7a3_二运_水idx" ListVariableExpression="${v:tmp_lowIdx}" ListVariableIndex="${l:tmp_近远组[-1]} * 2" ActionType="ListVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:tmp_近远组.size}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="NumericGreaterEqual" />
</Condition>
</Action>
<Action OrderNumber="12" ActionType="Placeholder" Description="如果有 4 组不同，同法调换倒数第二组" DescriptionOverride="True" />
<Action OrderNumber="13" ListVariableOp="PopFirst" ListVariableName="U7a3_二运_水idx" ListVariableIndex="${l:tmp_近远组[-2]} * 2 - 1" ListVariableTarget="tmp_lowIdx" ActionType="ListVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:tmp_近远组.size}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="14" ListVariableOp="Insert" ListVariableName="U7a3_二运_水idx" ListVariableExpression="${v:tmp_lowIdx}" ListVariableIndex="${l:tmp_近远组[-2]} * 2" ActionType="ListVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:tmp_近远组.size}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="15" VariableName="tmp_lowIdx" ActionType="Variable" />
<Action OrderNumber="16" ActionType="Placeholder" Description="最后检查 MT 是否在左侧组（1357），否则调换左右" DescriptionOverride="True" />
<Action OrderNumber="17" ListVariableOp="Build" ListVariableExpression=",${l:U7a3_二运_水idx.join(&quot;,&quot;, &quot;2,1,4,3,6,5,8,7&quot;)}" ListVariableTarget="U7a3_二运_水idx" ActionType="ListVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a3_二运_水idx.contain(1, &quot;1,3,5,7&quot;)}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="18" ActionType="Placeholder" Description="此时列表为处理好的 无左 无右 短左 短右 中左 中右 长左 长右 顺序的八人 idx" DescriptionOverride="True" />
<Action OrderNumber="19" ActionType="Placeholder" Description="拆分为两组" DescriptionOverride="True" />
<Action OrderNumber="20" ListVariableOp="Build" ListVariableExpression=",${l:U7a3_二运_水idx.join(&quot;,&quot;, &quot;1,3,5,7&quot;)}" ListVariableTarget="U7a3_二运_G1idx" ActionType="ListVariable" />
<Action OrderNumber="21" ListVariableOp="Build" ListVariableExpression=",${l:U7a3_二运_水idx.join(&quot;,&quot;, &quot;2,4,6,8&quot;)}" ListVariableTarget="U7a3_二运_G2idx" ActionType="ListVariable" />
<Action OrderNumber="22" ActionType="Placeholder" Description="调整组内顺序：T M H R" DescriptionOverride="True" />
<Action OrderNumber="23" ListVariableOp="SortByKeys" ListVariableName="U7a3_二运_G1idx" ListVariableExpression="n+: ${?l: 1,2,5,6,3,4,7,8.indexof(${_this})}" ActionType="ListVariable" />
<Action OrderNumber="24" ListVariableOp="SortByKeys" ListVariableName="U7a3_二运_G2idx" ListVariableExpression="n+: ${?l: 1,2,5,6,3,4,7,8.indexof(${_this})}" ActionType="ListVariable" />
<Action OrderNumber="25" ActionType="Placeholder" Description="输出" DescriptionOverride="True" />
<Action OrderNumber="26" VariableOp="SetNumeric" VariableName="U7a3_二运_my摊isG1" VariableExpression="${l:U7a3_二运_水idx.indexof(${v:myIdx})} % 2 = 1 ? 1 : 2" ActionType="Variable" />
<Action OrderNumber="27" VariableOp="SetNumeric" VariableName="U7a3_二运_my散isG1" VariableExpression="${v:U7a3_二运_my摊isG1}" ActionType="Variable" />
<Action OrderNumber="28" VariableOp="SetNumeric" VariableName="U7a3_二运_my散Idx" VariableExpression="(${v:myIdx} - 1) % 4 + 1" ActionType="Variable" />
<Action OrderNumber="29" LogMessageText="U7a3_二运_分组:isG1:${v:U7a3_二运_my摊isG1}:${l:U7a3_二运_水idx.join(&quot;&quot;)}${l:U7a3_二运_G1idx.join(&quot;&quot;)}:${l:U7a3_二运_G2idx.join(&quot;&quot;)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运]}" ExpressionTypeL="String" ExpressionR="单分科" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运isCmd}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="false" Source="None" Name="Debug Log 正左右 逆" Id="b8d35bfc-0756-43dd-8634-a55e401fd4b6" RegularExpression="">
<Actions>
<Action OrderNumber="1" LogMessageText="[22:22:18.309] StartsCasting 14:40002939:Oracle of Darkness:9D4E:Dark Water III:40002939:Oracle of Darkness:4.700:99.99:99.99:0.00:3.13" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="2" ActionType="Placeholder" ExecutionDelayExpression="2 * 1000" />
<Action OrderNumber="3" LogMessageText="[22:22:23.888] StatusAdd 1A:99D:Spell-in-Waiting: Dark Water III:10.00:E0000000::${l:party[7]}:队员7:00:226089:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="4" LogMessageText="[22:22:23.888] StatusAdd 1A:99D:Spell-in-Waiting: Dark Water III:10.00:E0000000::${l:party[2]}:队员2:00:156987:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="5" LogMessageText="[22:22:23.888] StatusAdd 1A:99D:Spell-in-Waiting: Dark Water III:29.00:E0000000::${l:party[3]}:队员3:00:157247:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="6" LogMessageText="[22:22:23.888] StatusAdd 1A:99D:Spell-in-Waiting: Dark Water III:29.00:E0000000::${l:party[4]}:队员4:00:142359:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="7" LogMessageText="[22:22:23.888] StatusAdd 1A:99D:Spell-in-Waiting: Dark Water III:38.00:E0000000::${l:party[5]}:队员5:00:155336:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="8" LogMessageText="[22:22:23.888] StatusAdd 1A:99D:Spell-in-Waiting: Dark Water III:38.00:E0000000::${l:party[6]}:队员6:00:157227:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="9" ActionType="Placeholder" ExecutionDelayExpression="2.47 * 1000" />
<Action OrderNumber="10" LogMessageText="[22:22:26.364] 261 105:Add:4000296D:BNpcID:1EB0FF:Heading:-1.5709:PosX:100.0000:PosY:100.0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="11" LogMessageText="[22:22:26.364] 261 105:Add:4000296E:BNpcID:1EB0FF:Heading:1.5708:PosX:100.0000:PosY:100.0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="12" LogMessageText="[22:22:26.364] 261 105:Add:4000296C:BNpcID:1EB0FF:Heading:-1.5709:PosX:100.0000:PosY:86.0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="13" LogMessageText="[22:22:26.364] 261 105:Add:40002968:BNpcID:1EB0FF:Heading:1.5708:PosX:100.0000:PosY:114.0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="2c. 初始分组（科技 &amp;&amp; 非指挥）=&gt; O1" Id="279b1e6c-8421-4374-ae44-681992aa1cda" RegularExpression="^.{15}\S+ 1D:Add:(?&lt;id&gt;0|1|2|3|5|6|7|10):(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="U7a3_二运_my摊isG1" VariableExpression="${id} &lt;= 3" ActionType="Variable" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="U7a3_二运_my散isG1" VariableExpression="${v:U7a3_二运_my摊isG1}" ActionType="Variable" />
<Action OrderNumber="3" VariableOp="SetString" VariableName="U7a3_二运_my散Idx" VariableExpression="${?d: 0=1, 1=2, 2=3, 3=4, 5=1, 6=2, 7=3, 10=4 [${id}]}" ActionType="Variable" />
<Action OrderNumber="4" LogMessageText="U7a3_二运_分组:isG1:${v:U7a3_二运_my摊isG1}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运isCmd}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运}" ExpressionTypeL="String" ExpressionR="单分科" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
<ConditionSingle Enabled="true" ExpressionL="${v:U7a_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers />
</Folder>
<Folder Id="152de1c1-cb31-42a7-9f6d-bdbc774b6e7b" Name="P5" Enabled="true">
<Folders>
<Folder Id="1e73f1a6-a27d-424d-b4af-587f21b51796" Name="B. 踩塔" Enabled="true" RawEnvironmentVariables="phase = P5踩塔">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="0. 初始化" Id="cfd7ebcb-965c-4ee8-93c5-5508d143780c" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9D7F:">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="U7a_phase" VariableExpression="${env:phase}" ActionType="Variable" />
<Action OrderNumber="1" VariableOp="UnsetRegexUniversal" VariableName="^U7a5_塔" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 翅膀读条 =&gt; O1" Id="cebf13b1-d0eb-4058-bcd9-e2689e49f67f" RegularExpression="^.{15}\S+ 14:(?&lt;sid&gt;4.{7}):[^:]*:9D(?&lt;type&gt;2|7)9:">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="2暗光 7光暗" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="U7a5_塔_is先暗" VariableExpression="${type} == 2" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="U7a5_塔_isSelfTgt" VariableExpression="${_entity[${sid}].targetid} == ${_me.id}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" NamedCallbackName="command" NamedCallbackParam="/${pd:U7a_cfg[debugChannel]} [Debug]&#xD;&#xA;me: ${_me.id}&#xD;&#xA;src: ${sid}&#xD;&#xA;src.target: ${_entity[${sid}].targetid}" VariableOp="SetNumeric" VariableName="U7a5_塔_isSelfTgt" ActionType="NamedCallback" Asynchronous="False" DescBgColor="fdd" />
<Action OrderNumber="5" LogMessageText="U7a5_塔1:dir-3:${l:U7a5_塔_dir-3[1]}:is先暗:${v:U7a5_塔_is先暗}:is一仇:${v:U7a5_塔_isSelfTgt}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1. 获取塔" Id="6b48058a-7e9a-44f9-93eb-3a46df5f898e" RegularExpression="^.{15}\S+ 101:.{8}:00020001:(?&lt;pos&gt;33|34|35)">
<Actions>
<Action OrderNumber="1" ListVariableOp="Push" ListVariableName="U7a5_塔_dir-3" ListVariableExpression="${?d: 33 = 0, 34 = 2, 35 = 1 [${pos}]}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="SetString" VariableName="U7a5_塔_is顺" VariableExpression="(${l:U7a5_塔_dir-3[1]} - ${l:U7a5_塔_dir-3[2]}) %% 3 = 1" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a5_塔_dir-3.size}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="1b3901b3-dc68-4d76-b85a-86650959fa83" Name="C. 挡枪" Enabled="true" RawEnvironmentVariables="phase = P5挡枪">
<Folders />
<Triggers>
<Trigger Enabled="true" Sequential="True" Name="0. 初始化" Id="f7b9c5af-844c-4208-a882-8c82b97e6d1f" RegularExpression="^.{15}\S+ 107:4.{7}:9D7C:(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):(?&lt;z&gt;[^:]+):(?&lt;h&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="U7a_phase" VariableExpression="${env:phase}" ActionType="Variable" />
<Action OrderNumber="1" VariableOp="UnsetRegexUniversal" VariableName="^U7a5_挡枪" ActionType="Variable" />
<Action OrderNumber="3" VariableOp="SetString" VariableName="U7a5_挡枪_my换位轮次" VariableExpression="${?l: 1,1,4,4,2,2,3,3  [${v:myIdx}]}" ActionType="Variable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P5挡枪]}" ExpressionTypeL="String" ExpressionR="TMRH" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="4" VariableOp="SetString" VariableName="U7a5_挡枪_my换位轮次" VariableExpression="${?l: 1,1,2,2,3,3,4,4  [${v:myIdx}]}" ActionType="Variable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P5挡枪]}" ExpressionTypeL="String" ExpressionR="THMR" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 二段判定 =&gt; O2" Id="b0a6b9a0-0518-4d23-90d7-173c5a777991" RegularExpression="^.{15}\S+ 1[56]:(?&lt;sid&gt;4.{7}):[^:]+:9CB7:" PrevActionsRefire="Deny" PeriodRefire="Deny" RefirePeriodExpression="1000">
<Actions>
<Action OrderNumber="1" VariableOp="Increment" VariableName="U7a5_挡枪_n2" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="U7a5_挡枪二段:${v:U7a5_挡枪_n2}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="false" Name="光暗读条" Id="f4ec7cff-2677-40a2-92f3-72d90638acb8" RegularExpression="^.{15}\S+ 14:(?&lt;sid&gt;4.{7}):[^:]+:9D7[DE]:">
<Actions>
<Action OrderNumber="1" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${sid}].address}, 304" Enabled="False" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="2" NamedCallbackName="LockOn" NamedCallbackParam="${_entity[${sid}].address}, omen_laser_6_60_4sec_0t" Enabled="False" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="3" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${sid}].address}, 0" Enabled="False" ActionType="NamedCallback" ExecutionDelayExpression="4000" DescTextColor="26f" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1. 一段判定 =&gt; O1" Id="4abf08c3-ed3f-412a-9500-e66bd10ab365" RegularExpression="^.{15}\S+ 1[56]:(?&lt;sid&gt;4.{7}):[^:]+:9D7D:" PrevActionsRefire="Deny" PeriodRefire="Deny" RefirePeriodExpression="1000">
<Actions>
<Action OrderNumber="1" VariableOp="Increment" VariableName="U7a5_挡枪_n1" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="U7a5_挡枪一段:${v:U7a5_挡枪_n1}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="9c6d51ab-361b-40ea-a5f2-64dac2c48ccc" Name="A. 地火" Enabled="true" RawEnvironmentVariables="phase = P5地火">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="1. 获取直线实体 * 6 =&gt; 2" Id="4d82dcfb-68e5-4583-8e4c-c4343319b12c" RegularExpression="^.{15}\S+ 105:Add:(?&lt;id&gt;4.{7}):.*BNpcID:1EBBF7:.*Heading:(?&lt;h&gt;[^:]*):.*PosX:(?&lt;x&gt;[^:]+):PosY:(?&lt;y&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="地板线条实体用于播放特效动画，实体位于弦中点，面向垂直于弦。" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" Asynchronous="False" Description="实体所在线条的方程可写为：(x - x1) s1 + (y - y1) c1 = 0, 其中 s1 c1 为 heading 的 sin 和 cos。" DescriptionOverride="True" />
<Action OrderNumber="3" ActionType="Placeholder" Asynchronous="False" Description="两条直线相交的交点坐标为：" DescriptionOverride="True" />
<Action OrderNumber="4" ActionType="Placeholder" Asynchronous="False" Description="x = (x1 s1 c2 - x2 s2 c1 - (y2-y1) c1 c2) / (s1 c2 - s2 c1)" DescriptionOverride="True" />
<Action OrderNumber="5" ActionType="Placeholder" Asynchronous="False" Description="y = (y2 c2 s1 - y1 c1 s2 + (x2-x1) s1 s2) / (s1 c2 - s2 c1)" DescriptionOverride="True" />
<Action OrderNumber="6" ActionType="Placeholder" Asynchronous="False" Description="需要分别记录六个实体的 id、x、y、h，id 从大到小为判定顺序（读条开始时即可预判）。" DescriptionOverride="True" />
<Action OrderNumber="7" ActionType="Placeholder" Asynchronous="False" Description="依次计算 1、2；3、4；5、6 的三个交点 O1 O2 O3，O1O3 中点即为处理机制的中心点。" DescriptionOverride="True" />
<Action OrderNumber="8" ActionType="Placeholder" Asynchronous="False" Description="计算出 O1 O2 O3 相对于中心点 O 的 dir-8（相邻两个点相差 ±2），1 2 之间即为第一次穿到的位置，2 3 间第二次，1 3 间起始/终止。" DescriptionOverride="True" />
<Action OrderNumber="9" ActionType="Placeholder" Asynchronous="False" Description="实体生成后 EObjAnimation 019D:1:2:0:0 为显示，019D:20:10:0:0 为发光。" DescriptionOverride="True" />
<Action OrderNumber="10" ActionType="Placeholder" Asynchronous="False" Description="————————————————————————" DescriptionOverride="True" />
<Action OrderNumber="11" ActionType="Placeholder" ExecutionDelayExpression="1000" Asynchronous="False" />
<Action OrderNumber="12" ActionType="Placeholder" Asynchronous="False" Description="延迟一秒以便用读条初始化" DescriptionOverride="True" />
<Action OrderNumber="13" ActionType="Placeholder" Asynchronous="False" Description="表格：id, x, y, h" DescriptionOverride="True" />
<Action OrderNumber="14" TableVariableOp="SetLine" TableVariableName="U7a5_地火_直线实体" TableVariableExpression=",${id},${x},${y},${h}" TableVariableY="${t:U7a5_地火_直线实体.height} + 1" ActionType="TableVariable" Asynchronous="False" />
<Action OrderNumber="15" ActionType="Placeholder" Asynchronous="False" Description="满 6 个：排序，计算 sin、cos" DescriptionOverride="True" />
<Action OrderNumber="16" TableVariableOp="SortLine" TableVariableName="U7a5_地火_直线实体" TableVariableY="s-: ${_row[1]}" ActionType="TableVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${t:U7a5_地火_直线实体.height}" ExpressionTypeL="String" ExpressionR="6" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="17" TableVariableOp="SlicesSetAll" TableVariableName="U7a5_地火_直线实体" TableVariableExpression="${n: sin(${_this})}:${n: cos(${_this})}" TableVariableX="4" ActionType="TableVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${t:U7a5_地火_直线实体.height}" ExpressionTypeL="String" ExpressionR="6" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="18" LogMessageText="_U7a5_地火_直线实体:${t:U7a5_地火_直线实体.hjoin(&quot;:&quot;, &quot;:&quot;, &quot;2,3,4&quot;)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${t:U7a5_地火_直线实体.height}" ExpressionTypeL="String" ExpressionR="6" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="0. 初始化" Id="1bf4cba3-3225-4e5f-8376-3045f3756c2d" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9D72:">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="U7a_phase" VariableExpression="${env:phase}" ActionType="Variable" />
<Action OrderNumber="1" VariableOp="UnsetRegexUniversal" VariableName="^U7a5_地火" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="false" Source="None" Name="Debug Log 正右 顺时针" Id="0328b79c-2917-4995-95e2-4382f9345716" RegularExpression="">
<Actions>
<Action OrderNumber="1" LogMessageText="[09:06:09.050] StartsCasting 14:4001A7B0:Pandora:9D72:unknown_9d72:4001A7B0:Pandora:5.700:99.99:99.99:0.00:-0.40" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="2" LogMessageText="[09:06:08.744] 261 105:Add:4001A815:BNpcID:1EBBF7:Heading:-1.5709:PosX:97.0000:PosY:100.0000:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="3" LogMessageText="[09:06:08.744] 261 105:Add:4001A816:BNpcID:1EBBF7:BNpcNameID:700180D:CastDurationCurrent:2.7500:CastDurationMax:1.5000:CastGroundTargetX:1.9000:CastGroundTargetY:1.5000:CastGroundTargetZ:2.7500:CurrentMP:4259843:Heading:-0.7855:Level:139:PosX:96.4142:PosY:103.5858:Radius:0.5000:Type:7:WorldID:1536" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="4" LogMessageText="[09:06:08.744] 261 105:Add:4001A814:BNpcID:1EBBF7:BNpcNameID:100180D:CastGroundTargetZ:0.4191:CurrentMP:4390915:Heading:0.7854:Job:2:Level:89:PosX:96.4142:PosY:96.4142:Radius:0.5000:Type:7:WorldID:1536" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="5" LogMessageText="[09:06:08.744] 261 105:Add:4001A817:BNpcID:1EBBF7:BNpcNameID:1C03:CastDurationCurrent:0.3000:CastGroundTargetZ:0.5000:CurrentMP:4194307:CurrentWorldID:2816:Heading:-3.1416:Job:53:Level:11:PosX:100.0000:PosY:110.0000:Radius:0.5000:TransformationId:633:Type:7:WorldID:25347" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="6" LogMessageText="[09:06:08.744] 261 105:Add:4001A813:BNpcID:1EBBF7:BNpcNameID:1800:CastDurationCurrent:0.2000:CastGroundTargetZ:0.5000:CurrentMP:4456451:Heading:3.1416:Job:1:Level:147:PosX:100.0000:PosY:90.0000:Radius:0.5000:Type:7:WorldID:1536" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="7" LogMessageText="[09:06:08.744] 261 105:Add:4001A812:BNpcID:1EBBF7:BNpcNameID:7001C03:CurrentMP:4521987:Heading:-0.7855:Level:73:PosX:110.6569:PosY:89.3432:Radius:0.5000:Type:7:WorldID:1536" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
<Trigger Enabled="false" Source="None" Name="Debug Log 正左 逆时针" Id="8383cbcc-60b3-4791-87b4-fa0e935c28fa" RegularExpression="">
<Actions>
<Action OrderNumber="1" LogMessageText="[00:14:54.308] StartsCasting 14:4000939F:Pandora:9D72:Fulgent Blade:4000939F:Pandora:5.700:100.00:100.00:0.00:0.00" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="2" LogMessageText="[00:14:54.103] 261 105:Add:400093D2:BNpcID:1EBBF7:BNpcNameID:AD11:CastBuffID:43537:CastGroundTargetX:0.0000:CastGroundTargetY:0.0000:CastGroundTargetZ:0.0000:CurrentMP:4456451:CurrentWorldID:256:Heading:3.1416:IsCasting1:17:Job:8:Level:9:NPCTargetID:A611:PCTargetID:2080204:PosX:100.0000:PosY:90.0000:Radius:0.5000:Type:7:WeaponId:3" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="3" LogMessageText="[00:14:54.103] 261 105:Add:400093D1:BNpcID:1EBBF7:CastBuffID:46609:CastGroundTargetX:0.0000:CastGroundTargetY:0.0000:CastGroundTargetZ:0.0000:CurrentMP:4521987:CurrentWorldID:256:Heading:0.7854:IsCasting1:17:Job:8:Level:9:PosX:89.3934:PosY:89.3934:Radius:0.5000:Type:7" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="4" LogMessageText="[00:14:54.103] 261 105:Add:400093D3:BNpcID:1EBBF7:BNpcNameID:AF11:CastBuffID:42769:CastGroundTargetX:0.0000:CastGroundTargetY:0.0000:CastGroundTargetZ:0.0000:CurrentMP:4390915:CurrentWorldID:256:Heading:1.5708:IsCasting1:17:Job:8:Level:9:NPCTargetID:AC11:PosX:103.0000:PosY:100.0000:Radius:0.5000:Type:7" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="5" LogMessageText="[00:14:54.103] 261 105:Add:400093D4:BNpcID:1EBBF7:BNpcNameID:AC11:CastGroundTargetY:0.0000:CastGroundTargetZ:0.0000:CurrentMP:4325379:CurrentWorldID:256:Heading:-0.7855:NPCTargetID:A711:PCTargetID:2080304:PosX:103.5858:PosY:96.4142:Radius:0.5000:Type:7:WeaponId:3" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="6" LogMessageText="[00:14:54.103] 261 105:Add:400093D6:BNpcID:1EBBF7:CastBuffID:44305:CastGroundTargetX:0.0000:CastGroundTargetY:0.0000:CastGroundTargetZ:0.0000:CurrentMP:4194307:CurrentWorldID:256:Heading:0.7854:IsCasting1:17:Job:175:Level:63:PosX:103.5858:PosY:103.5858:Radius:0.5000:TransformationId:32759:Type:7" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="7" LogMessageText="[00:14:54.103] 261 105:Add:400093D5:BNpcID:1EBBF7:CastBuffID:46097:CastGroundTargetX:0.0000:CastGroundTargetY:0.0000:CastGroundTargetZ:0.0000:CurrentMP:4259843:CurrentWorldID:256:Heading:-3.1416:IsCasting1:17:PCTargetID:2080303:PosX:100.0000:PosY:110.0000:Radius:0.5000:Type:7:WeaponId:3" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 计算 =&gt; O1" Id="e1b205ed-f9ba-4593-9821-beb9f5fa0537" RegularExpression="^_U7a5_地火_直线实体:(?&lt;x1&gt;[^:]*):(?&lt;y1&gt;[^:]*):(?&lt;s1&gt;[^:]*):(?&lt;c1&gt;[^:]*):(?&lt;x2&gt;[^:]*):(?&lt;y2&gt;[^:]*):(?&lt;s2&gt;[^:]*):(?&lt;c2&gt;[^:]*):(?&lt;x3&gt;[^:]*):(?&lt;y3&gt;[^:]*):(?&lt;s3&gt;[^:]*):(?&lt;c3&gt;[^:]*):(?&lt;x4&gt;[^:]*):(?&lt;y4&gt;[^:]*):(?&lt;s4&gt;[^:]*):(?&lt;c4&gt;[^:]*):(?&lt;x5&gt;[^:]*):(?&lt;y5&gt;[^:]*):(?&lt;s5&gt;[^:]*):(?&lt;c5&gt;[^:]*):(?&lt;x6&gt;[^:]*):(?&lt;y6&gt;[^:]*):(?&lt;s6&gt;[^:]*):(?&lt;c6&gt;[^:]*)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="1-2 3-4 5-6 三组交点坐标" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="tmp_x交点1" VariableExpression="(${x1} * ${s1} * ${c2} - ${x2} * ${s2} * ${c1} - (${y2} - ${y1}) * ${c1} * ${c2}) / (${s1} * ${c2} - ${s2} * ${c1})" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="tmp_y交点1" VariableExpression="(${y1} * ${c1} * ${s2} - ${y2} * ${c2} * ${s1} - (${x2} - ${x1}) * ${s1} * ${s2}) / (${c1} * ${s2} - ${c2} * ${s1})" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" VariableOp="SetNumeric" VariableName="tmp_x交点2" VariableExpression="(${x3} * ${s3} * ${c4} - ${x4} * ${s4} * ${c3} - (${y4} - ${y3}) * ${c3} * ${c4}) / (${s3} * ${c4} - ${s4} * ${c3})" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="5" VariableOp="SetNumeric" VariableName="tmp_y交点2" VariableExpression="(${y3} * ${c3} * ${s4} - ${y4} * ${c4} * ${s3} - (${x4} - ${x3}) * ${s3} * ${s4}) / (${c3} * ${s4} - ${c4} * ${s3})" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="6" VariableOp="SetNumeric" VariableName="tmp_x交点3" VariableExpression="(${x5} * ${s5} * ${c6} - ${x6} * ${s6} * ${c5} - (${y6} - ${y5}) * ${c5} * ${c6}) / (${s5} * ${c6} - ${s6} * ${c5})" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="7" VariableOp="SetNumeric" VariableName="tmp_y交点3" VariableExpression="(${y5} * ${c5} * ${s6} - ${y6} * ${c6} * ${s5} - (${x6} - ${x5}) * ${s5} * ${s6}) / (${c5} * ${s6} - ${c6} * ${s5})" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="8" ActionType="Placeholder" Asynchronous="False" Description="八边形的中心点坐标及处于的方位（只会在正点）" DescriptionOverride="True" />
<Action OrderNumber="9" VariableOp="SetNumeric" VariableName="tmp_x中心" VariableExpression="(${v:tmp_x交点1} + ${v:tmp_x交点3}) / 2" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="10" VariableOp="SetNumeric" VariableName="tmp_y中心" VariableExpression="(${v:tmp_y交点1} + ${v:tmp_y交点3}) / 2" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="11" VariableOp="SetNumeric" VariableName="U7a5_地火_中心dir4" VariableExpression="roundvec(${v:tmp_x中心} - 100, ${v:tmp_y中心} - 100, 4)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="12" ActionType="Placeholder" Asynchronous="False" Description="第一、二组交点相对中心点的 dir8，以此判断顺逆" DescriptionOverride="True" />
<Action OrderNumber="13" VariableOp="SetNumeric" VariableName="U7a5_地火_交点1dir-8" VariableExpression="roundvec(${v:tmp_x交点1} - ${v:tmp_x中心}, ${v:tmp_y交点1} - ${v:tmp_y中心}, -8)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="14" VariableOp="SetNumeric" VariableName="U7a5_地火_交点2dir-8" VariableExpression="roundvec(${v:tmp_x交点2} - ${v:tmp_x中心}, ${v:tmp_y交点2} - ${v:tmp_y中心}, -8)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="15" VariableOp="SetNumeric" VariableName="U7a5_地火_is逆" VariableExpression="(${v:U7a5_地火_交点2dir-8} - ${v:U7a5_地火_交点1dir-8}) %% 8 = 2" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="16" ActionType="Placeholder" Asynchronous="False" Description="下述三个参数可描述一组地火：" DescriptionOverride="True" />
<Action OrderNumber="17" LogMessageText="U7a5_地火:中心dir4:${v:U7a5_地火_中心dir4}:is逆:${v:U7a5_地火_is逆}:初始dir-8:${v:U7a5_地火_交点1dir-8}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
<Action OrderNumber="18" VariableOp="UnsetRegex" VariableName="^tmp_[xy](交点|中心)" ActionType="Variable" />
</Actions>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers />
</Folder>
<Folder Id="9f3b9645-d8d1-44e2-96ab-0323306a3396" Name="P4" Enabled="true">
<Folders>
<Folder Id="0484beb3-0bc2-4f6a-a141-6becbc1ef7b8" Name="A. 开场" Enabled="true" RawEnvironmentVariables="phase = P4开场">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="0. 初始化 生成琳" Id="200329e7-c213-4b33-8512-b42ed0a22e26" RegularExpression="^.{15}\S+ 03:(?&lt;id&gt;4.{7}):([^:]*:){7}17833:([^:]*:){7}(?&lt;y&gt;[^:]+):">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="U7a_phase" VariableExpression="${env:phase}" ActionType="Variable" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="35e56a72-c8d8-4a78-8859-9f260cd411f5" Name="C. 二运" Enabled="true" RawEnvironmentVariables="phase = P4二运">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="0. 初始化 时间结晶" Id="f29c2dad-55ef-4a26-ae01-297b57f00245" RegularExpression="^.{15}\S+ 14:(?&lt;id&gt;4.{7}):[^:]+:9D30:">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="U7a_phase" VariableExpression="${env:phase}" ActionType="Variable" />
<Action OrderNumber="2" VariableOp="UnsetRegexUniversal" VariableName="^U7a4_二运" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1.1 获取红debuff * 4 =&gt; 2 / O1" Id="3bd2dc7c-44fa-4805-8e88-465b3bc922b8" RegularExpression="^.{15}\S+ 1A:CBF:[^:]+:(?&lt;t&gt;[^:]+):.{8}:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" ListVariableOp="Push" ListVariableName="U7a4_二运_红_idx" ListVariableExpression="${n: ${t}&gt;20}${l:party.indexof(${tid})}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="2" ListVariableOp="SortAlphaAsc" ListVariableName="U7a4_二运_红_idx" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a4_二运_红_idx.size}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" ListVariableOp="SetAll" ListVariableName="U7a4_二运_红_idx" ListVariableExpression="${f:substring(1):${_this}}" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a4_二运_红_idx.size}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" VariableOp="SetString" VariableName="U7a4_二运_self" VariableExpression="${l:U7a4_二运_红_idx.indexof(${v:myIdx})}" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a4_二运_红_idx.size}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" VariableOp="Increment" VariableName="U7a4_二运_self_is红" VariableExpression="${v:U7a4_二运_self} &gt; 0" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a4_二运_红_idx.size}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" LogMessageText="U7a4_二运_红:${l:U7a4_二运_红_idx.join(&quot;&quot;)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a4_二运_红_idx.size}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1.2 获取杂项debuff for 2" Id="7dabb373-64f4-4e8c-a415-86af0d53df06" RegularExpression="^.{15}\S+ 1A:99(?&lt;type&gt;[6CDE]):(?:[^:]|: )*:(?&lt;t&gt;[^:]+):.{8}:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="phase" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or" />
</Action>
<Action OrderNumber="2" DictVariableOp="Set" DictVariableName="U7a4_二运_idx2Debuff" DictVariableKey="${l:party.indexof(${tid})}" DictVariableValue="${?d: 6 = 摊, C = 散, D = 水, E = 冰 [${type}]}" ActionType="DictVariable" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="2. 处理杂项 debuff =&gt; O2" Id="a7dda54b-bc10-4184-a0ea-2285681c256d" RegularExpression="^U7a4_二运_红:">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" ExecutionDelayExpression="500" Asynchronous="False" />
<Action OrderNumber="2" DictVariableOp="Remove" DictVariableName="U7a4_二运_idx2Debuff" DictVariableKey="${l:U7a4_二运_红_idx[1]}" ActionType="DictVariable" Asynchronous="False" />
<Action OrderNumber="3" DictVariableOp="Remove" DictVariableName="U7a4_二运_idx2Debuff" DictVariableKey="${l:U7a4_二运_红_idx[2]}" ActionType="DictVariable" Asynchronous="False" />
<Action OrderNumber="4" DictVariableOp="Remove" DictVariableName="U7a4_二运_idx2Debuff" DictVariableKey="${l:U7a4_二运_红_idx[3]}" ActionType="DictVariable" Asynchronous="False" />
<Action OrderNumber="5" DictVariableOp="Remove" DictVariableName="U7a4_二运_idx2Debuff" DictVariableKey="${l:U7a4_二运_红_idx[4]}" ActionType="DictVariable" Asynchronous="False" />
<Action OrderNumber="6" DictVariableOp="Merge" DictVariableName="U7a4_二运_idx2Debuff" DictVariableTarget="U7a4_二运_debuff2Idx" ActionType="DictVariable" Asynchronous="False" />
<Action OrderNumber="7" DictVariableOp="SetAll" DictVariableName="U7a4_二运_debuff2Idx" DictVariableKey="${_val}" DictVariableValue="${_key}" ActionType="DictVariable" Asynchronous="False" />
<Action OrderNumber="8" ActionType="Placeholder" Asynchronous="False" Description="如果字典仅剩 3 个 debuff：填补没有 debuff 的人（固定缺少蓝暗）" DescriptionOverride="True" />
<Action OrderNumber="9" ListVariableOp="Build" ListVariableExpression=",1,2,3,4,5,6,7,8" ListVariableTarget="tmp_缺人" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${d:U7a4_二运_debuff2Idx.size}" ExpressionTypeL="String" ExpressionR="3" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="10" ListVariableOp="Filter" ListVariableExpressionType="Numeric" ListVariableName="tmp_缺人" ListVariableExpression="!${l:U7a4_二运_红_idx.contain(${_this})} &amp;&amp; !${d:U7a4_二运_debuff2Idx.evalue(${_this})}" ListVariableTarget="tmp_缺人" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${d:U7a4_二运_debuff2Idx.size}" ExpressionTypeL="String" ExpressionR="3" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="11" DictVariableOp="Set" DictVariableName="U7a4_二运_debuff2Idx" DictVariableKey="补" DictVariableValue="${l:tmp_缺人[1]}" ActionType="DictVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${d:U7a4_二运_debuff2Idx.size}" ExpressionTypeL="String" ExpressionR="3" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="12" VariableOp="SetString" VariableName="U7a4_二运_self" VariableExpression="${d:U7a4_二运_debuff2Idx.keyof(${v:myIdx})}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="13" ListVariableName="tmp_缺人" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="14" ActionType="Placeholder" Asynchronous="False" DescriptionOverride="True" />
<Action OrderNumber="15" LogMessageText="U7a4_二运_蓝:${d:U7a4_二运_debuff2Idx.joinall(&quot;&quot;, &quot;&quot;)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="false" Source="None" Name="Debug Log 2025-01-07 13:04" Id="b9bbb101-678f-4d21-8c9d-8d606f7fec02" RegularExpression="">
<Actions>
<Action OrderNumber="1" LogMessageText="[21:25:28.097] StartsCasting 14:40002420:Usurper of Frost:9D30:Crystallize Time:40002420:Usurper of Frost:9.700:99.99:105.00:0.00:0.62" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="2" ActionType="Placeholder" ExecutionDelayExpression="2.81 * 1000" />
<Action OrderNumber="3" LogMessageText="[21:25:30.904] StatusAdd 1A:CBF:Wyrmclaw:17.00:E0000000::${l:party[5]}:NAME:00:157227:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="4" LogMessageText="[21:25:30.904] StatusAdd 1A:CBF:Wyrmclaw:17.00:E0000000::${l:party[4]}:NAME:00:156627:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="5" LogMessageText="[21:25:30.904] StatusAdd 1A:CBF:Wyrmclaw:40.00:E0000000::${l:party[7]}:NAME:00:156987:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="6" LogMessageText="[21:25:30.904] StatusAdd 1A:CBF:Wyrmclaw:40.00:E0000000::${l:party[8]}:NAME:00:142328:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="7" LogMessageText="[21:25:30.904] StatusAdd 1A:99E:Spell-in-Waiting: Dark Blizzard III:14.00:E0000000::${l:party[4]}:NAME:00:156627:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="8" LogMessageText="[21:25:30.904] StatusAdd 1A:99E:Spell-in-Waiting: Dark Blizzard III:14.00:E0000000::${l:party[5]}:NAME:00:157227:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="9" LogMessageText="[21:25:30.904] StatusAdd 1A:99E:Spell-in-Waiting: Dark Blizzard III:14.00:E0000000::${l:party[6]}:NAME:00:157247:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="10" LogMessageText="[21:25:30.904] StatusAdd 1A:99D:Spell-in-Waiting: Dark Water III:12.00:E0000000::${l:party[1]}:NAME:00:225932:" LogProcess="True" LogProcessACT="True" Enabled="False" ActionType="LogMessage" />
<Action OrderNumber="11" LogMessageText="[21:25:30.904] StatusAdd 1A:996:Spell-in-Waiting: Unholy Darkness:17.00:E0000000::${l:party[3]}:NAME:00:142359:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="12" LogMessageText="[21:25:30.904] StatusAdd 1A:99C:Spell-in-Waiting: Dark Eruption:14.00:E0000000::${l:party[2]}:NAME:00:226089:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="4. 获取减速连线 =&gt; O3" Id="f5021adc-8d1d-4185-b63d-8c3aed4604f4" RegularExpression="^.{15}\S+ 23:(?&lt;sid&gt;4.{7}):[^:]*:4.{7}:[^:]*:[^:]*:[^:]*:0085:">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="phase; id" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or" />
</Action>
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="U7a4_二运_isTL慢" VariableExpression="${d:U7a4_二运_沙漏isTL[${sid}]} = 1" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="U7a4_二运:isTL慢:${v:U7a4_二运_isTL慢}:is红:${v:U7a4_二运_self_is红}:type:${v:U7a4_二运_self_is红}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
</Actions>
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
<ConditionSingle Enabled="true" ExpressionL="${d:U7a4_二运_沙漏isTL.ekey(${sid})}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="3. 获取沙漏 for 4" Id="d4ea24b4-1461-41b9-991b-aba98f32b60a" RegularExpression="^.{15}\S+ 03:(?&lt;id&gt;4.{7}):([^:]*:){7}17837:([^:]*:){9}(?&lt;h&gt;-?1[^:]+)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="只存储左上和右上，左上的 h &gt; 0 （pi/3）" DescriptionOverride="True" />
<Action OrderNumber="2" DictVariableOp="Set" DictVariableValueType="Numeric" DictVariableName="U7a4_二运_沙漏isTL" DictVariableKey="${id}" DictVariableValue="${h} &gt; 0" ActionType="DictVariable" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="4314496c-3695-4cc5-842f-f4843798b965" Name="B. 一运" Enabled="true" RawEnvironmentVariables="phase = P4一运">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="0. 初始化 天光轮回" Id="a60c6610-655b-47e6-b0a3-d5371765c9c5" RegularExpression="^.{15}\S+ 15:4.{7}:[^:]*:9CFA:">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="（一运读条和分摊标记同时出现 所以用更早的）" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetString" VariableName="U7a_phase" VariableExpression="${env:phase}" ActionType="Variable" />
<Action OrderNumber="3" VariableOp="UnsetRegexUniversal" VariableName="^U7a4_一运" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="false" Name="2. 处理初始点名（分摊基准）=&gt; O1" Id="c7986f79-e3e7-406c-82a1-63b96d5b6aeb" RegularExpression="^_U7a4_一运_摊:(.)(.)">
<Actions>
<Action OrderNumber="1" ListVariableOp="Push" ListVariableName="U7a4_一运_摊_pIdx" ListVariableExpression="${l:party.indexof(${tid})}" Enabled="False" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="2" ListVariableOp="SortNumericAsc" ListVariableName="U7a4_一运_摊_pIdx" Enabled="False" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="_U7a4_一运_摊:${l:U7a4_一运_摊_pIdx}" LogProcess="True" LogProcessACT="True" Enabled="False" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a4_一运_摊_pIdx.size}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="3. 获取连线 * 4 =&gt; 4" Id="3f334d8a-4735-4bcf-b8a2-5e9d0aa7e654" RegularExpression="^.{15}\S+ 23:(?&lt;sid&gt;1.{7}):[^:]*:(?&lt;tid&gt;1.{7}):[^:]*:[^:]*:[^:]*:006E">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="phase" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or" />
</Action>
<Action OrderNumber="2" DictVariableOp="Set" DictVariableName="U7a4_一运_环_pIdx" DictVariableKey="${l:party.indexof(${sid})}" DictVariableValue="${l:party.indexof(${tid})}" ActionType="DictVariable" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="_U7a4_一运_环:${d:U7a4_一运_环_pIdx.joinall}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${d:U7a4_一运_环_pIdx.size}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="4. 处理连线 =&gt; O2" Id="3d3857ef-d497-474e-a051-95950dae6ed1" RegularExpression="^_U7a4_一运_环">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="环/无线：指初始站位    蝴蝶/光波：指换位后站位" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" Asynchronous="False" Description="【处理连线】" DescBgColor="90a0a8" DescriptionOverride="True" />
<Action OrderNumber="3" ActionType="Placeholder" Asynchronous="False" Description="从优先级最高的起始" DescriptionOverride="True" />
<Action OrderNumber="4" ListVariableOp="Push" ListVariableName="U7a4_一运_环_pIdx" ListVariableExpression="${d:U7a4_一运_环_pIdx.minkey}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="5" ListVariableOp="Push" ListVariableName="U7a4_一运_环_pIdx" ListVariableExpression="${d:U7a4_一运_环_pIdx[${l:U7a4_一运_环_pIdx[-1]}]}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="6" ListVariableOp="Push" ListVariableName="U7a4_一运_环_pIdx" ListVariableExpression="${d:U7a4_一运_环_pIdx[${l:U7a4_一运_环_pIdx[-1]}]}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="7" ListVariableOp="Push" ListVariableName="U7a4_一运_环_pIdx" ListVariableExpression="${d:U7a4_一运_环_pIdx[${l:U7a4_一运_环_pIdx[-1]}]}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="8" ActionType="Placeholder" Asynchronous="False" Description="将环调整至 2 号 &lt; 4 号" DescriptionOverride="True" />
<Action OrderNumber="9" ListVariableOp="Build" ListVariableExpression=":${l:U7a4_一运_环_pIdx.join(:, &quot;1,4,3,2&quot;)}" ListVariableTarget="U7a4_一运_环_pIdx" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a4_一运_环_pIdx[2]}" ExpressionTypeL="Numeric" ExpressionR="${l:U7a4_一运_环_pIdx[4]}" ExpressionTypeR="String" ConditionType="NumericGreater" />
</Condition>
</Action>
<Action OrderNumber="10" ActionType="Placeholder" Asynchronous="False" Description="根据 2 3 4 位的 pIdx，判断环的类型：蝴蝶（1&lt;3&lt;2&lt;4）  方形（1&lt;2&lt;4&lt;3）  沙漏（1&lt;2&lt;3&lt;4）" DescriptionOverride="True" />
<Action OrderNumber="11" VariableOp="SetString" VariableName="U7a4_一运_环_type" VariableExpression="${if: ${l:U7a4_一运_环_pIdx[2]} &gt; ${l:U7a4_一运_环_pIdx[3]} &#xD;&#xA;  ? 蝴蝶&#xD;&#xA;  : ${if: ${l:U7a4_一运_环_pIdx[3]} &gt; ${l:U7a4_一运_环_pIdx[4]} ? 方形 : 沙漏 }&#xD;&#xA;}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="12" ActionType="Placeholder" Asynchronous="False" Description="换成沙漏后 左上 右上 左下 右下 四人 pIdx" DescriptionOverride="True" />
<Action OrderNumber="13" ListVariableOp="Build" ListVariableExpression=":${l:U7a4_一运_环_pIdx.join(:, &quot;1,3,2,4&quot;)}" ListVariableTarget="U7a4_一运_蝴蝶_pIdx" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a4_一运_环_type}" ExpressionTypeL="String" ExpressionR="蝴蝶" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="14" ListVariableOp="Build" ListVariableExpression=":${l:U7a4_一运_环_pIdx.join(:, &quot;4,2,1,3&quot;)}" ListVariableTarget="U7a4_一运_蝴蝶_pIdx" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a4_一运_环_type}" ExpressionTypeL="String" ExpressionR="方形" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="15" ListVariableOp="Build" ListVariableExpression=":${l:U7a4_一运_环_pIdx.join(:, &quot;1,3,2,4&quot;)}" ListVariableTarget="U7a4_一运_蝴蝶_pIdx" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a4_一运_环_type}" ExpressionTypeL="String" ExpressionR="沙漏" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="16" ActionType="Placeholder" Asynchronous="False" Description="连线需要换位的两人的 pIdx" DescriptionOverride="True" />
<Action OrderNumber="17" ListVariableOp="Build" ListVariableExpression=":0:0" ListVariableTarget="U7a4_一运_连线换位_pIdx" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a4_一运_环_type}" ExpressionTypeL="String" ExpressionR="蝴蝶" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="18" ListVariableOp="Build" ListVariableExpression=":${l:U7a4_一运_蝴蝶_pIdx[3]}:${l:U7a4_一运_蝴蝶_pIdx[1]}" ListVariableTarget="U7a4_一运_连线换位_pIdx" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a4_一运_环_type}" ExpressionTypeL="String" ExpressionR="方形" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="19" ListVariableOp="Build" ListVariableExpression=":${l:U7a4_一运_蝴蝶_pIdx[3]}:${l:U7a4_一运_蝴蝶_pIdx[2]}" ListVariableTarget="U7a4_一运_连线换位_pIdx" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a4_一运_环_type}" ExpressionTypeL="String" ExpressionR="沙漏" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="20" ActionType="Placeholder" Asynchronous="False" Description="连线组的分摊是否在北：" DescriptionOverride="True" />
<Action OrderNumber="21" VariableOp="SetNumeric" VariableName="tmp_is连线分摊北" VariableExpression="${l:U7a4_一运_摊_pIdx.contain(${l:U7a4_一运_蝴蝶_pIdx[1]})} || ${l:U7a4_一运_摊_pIdx.contain(${l:U7a4_一运_蝴蝶_pIdx[2]})} " ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="22" ActionType="Placeholder" Asynchronous="False" Description="【处理分散】（无连线）" DescBgColor="90a0a8" DescriptionOverride="True" />
<Action OrderNumber="23" ActionType="Placeholder" Asynchronous="False" Description="无点名 左上 右上 左下 右下 四人 pIdx" DescriptionOverride="True" />
<Action OrderNumber="24" ListVariableOp="Build" ListVariableExpression=",1,2,3,4,5,6,7,8" ListVariableTarget="U7a4_一运_无线_pIdx" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="25" ListVariableOp="Filter" ListVariableExpressionType="Numeric" ListVariableName="U7a4_一运_无线_pIdx" ListVariableExpression="!${l:U7a4_一运_环_pIdx.contain(${_this})}" ListVariableTarget="U7a4_一运_无线_pIdx" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="26" ActionType="Placeholder" Asynchronous="False" Description="无点名组分摊者是四人中的第几个" DescriptionOverride="True" />
<Action OrderNumber="27" VariableOp="SetNumeric" VariableName="tmp_无线分摊idx" VariableExpression="${l:U7a4_一运_无线_pIdx.indexof(${l:U7a4_一运_摊_pIdx[1]})} + ${l:U7a4_一运_无线_pIdx.indexof(${l:U7a4_一运_摊_pIdx[2]})}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="28" ActionType="Placeholder" Asynchronous="False" Description="无点名组是否换位、是左侧或右侧换位" DescriptionOverride="True" />
<Action OrderNumber="29" VariableOp="SetString" VariableName="U7a4_一运_无线换位侧" VariableExpression="${if: ${v:tmp_无线分摊idx} % 2 = 1 ? 左 : 右 }" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:tmp_is连线分摊北}" ExpressionTypeL="String" ExpressionR="${v:tmp_无线分摊idx} &lt;= 2" ExpressionTypeR="Numeric" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="30" VariableName="tmp_is连线分摊北" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="31" ActionType="Placeholder" Asynchronous="False" Description="换位后引导光波 左上 右上 左下 右下 四人 pIdx" DescriptionOverride="True" />
<Action OrderNumber="32" ListVariableOp="Build" ListVariableExpression=":${l:U7a4_一运_无线_pIdx.join(:, &quot;1,2,3,4&quot;)}" ListVariableTarget="U7a4_一运_光波_pIdx" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a4_一运_无线换位侧}" ExpressionTypeL="String" ExpressionR="" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="33" ListVariableOp="Build" ListVariableExpression=":${l:U7a4_一运_无线_pIdx.join(:, &quot;3,2,1,4&quot;)}" ListVariableTarget="U7a4_一运_光波_pIdx" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a4_一运_无线换位侧}" ExpressionTypeL="String" ExpressionR="左" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="34" ListVariableOp="Build" ListVariableExpression=":${l:U7a4_一运_无线_pIdx.join(:, &quot;1,4,3,2&quot;)}" ListVariableTarget="U7a4_一运_光波_pIdx" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a4_一运_无线换位侧}" ExpressionTypeL="String" ExpressionR="右" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="35" ActionType="Placeholder" Asynchronous="False" Description="无连线需要换位的两人的 pIdx" DescriptionOverride="True" />
<Action OrderNumber="36" ListVariableOp="Build" ListVariableExpression=":0:0" ListVariableTarget="U7a4_一运_无线换位_pIdx" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a4_一运_无线换位侧}" ExpressionTypeL="String" ExpressionR="" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="37" ListVariableOp="Build" ListVariableExpression=":${l:U7a4_一运_光波_pIdx[3]}:${l:U7a4_一运_光波_pIdx[1]}" ListVariableTarget="U7a4_一运_无线换位_pIdx" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a4_一运_无线换位侧}" ExpressionTypeL="String" ExpressionR="左" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="38" ListVariableOp="Build" ListVariableExpression=":${l:U7a4_一运_光波_pIdx[4]}:${l:U7a4_一运_光波_pIdx[2]}" ListVariableTarget="U7a4_一运_无线换位_pIdx" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a4_一运_无线换位侧}" ExpressionTypeL="String" ExpressionR="右" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="39" ActionType="Placeholder" Asynchronous="False" Description="输出" DescriptionOverride="True" />
<Action OrderNumber="40" LogMessageText="U7a4_一运:蝴蝶:${l:U7a4_一运_蝴蝶_pIdx.join(&quot;&quot;)}:光波:${l:U7a4_一运_光波_pIdx.join(&quot;&quot;)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="5. 神圣之翼 =&gt; O3" Id="5ee7c953-b776-40b6-8725-a5348babae29" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9D2(?&lt;type&gt;3|4):">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="U7a4_一运_isRSafe" VariableExpression="${type} = 3" ActionType="Variable" />
<Action OrderNumber="2" LogMessageText="U7a4_一运_半场:isRSafe:${v:U7a4_一运_isRSafe}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1. 水分摊点名 * 2 =&gt; 2" Id="f5a9cba5-1677-47e1-b030-3572ee2b9059" RegularExpression="^.{15}\S+ 1B:(?&lt;tid&gt;.{8}):[^:]*:[^:]*:[^:]*:003E:">
<Actions>
<Action OrderNumber="1" ListVariableOp="Push" ListVariableName="U7a4_一运_摊_pIdx" ListVariableExpression="${l:party.indexof(${tid})}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="2" ListVariableOp="SortNumericAsc" ListVariableName="U7a4_一运_摊_pIdx" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="_U7a4_一运_摊:${l:U7a4_一运_摊_pIdx.join(&quot;&quot;)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a4_一运_摊_pIdx.size}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="false" Source="None" Name="Debug Log 线1356，摊26，左安全" Id="c861f573-0ce1-427b-9736-4b6837e4d664" RegularExpression="">
<Actions>
<Action OrderNumber="1" LogMessageText="[19:25:59.312] ActionEffect 15:40009818:Usurper of Frost:9CFA:Drachen Armor:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="2" ActionType="Placeholder" ExecutionDelayExpression="9.30 * 1000" />
<Action OrderNumber="3" LogMessageText="[19:26:08.611] TargetIcon 1B:${l:party[6]}:队员6:0000:0000:003E:${l:party[6]}:0000:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="4" LogMessageText="[19:26:08.611] TargetIcon 1B:${l:party[2]}:队员2:0000:0000:003E:${l:party[2]}:0000:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="5" ActionType="Placeholder" ExecutionDelayExpression="5.90 * 1000" />
<Action OrderNumber="6" LogMessageText="[19:26:14.517] Tether 23:${l:party[3]}:队员3:${l:party[1]}:队员1:0000:0000:006E:${l:party[1]}:000F:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="7" LogMessageText="[19:26:14.517] Tether 23:${l:party[1]}:队员1:${l:party[6]}:队员6:0000:0000:006E:${l:party[6]}:000F:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="8" LogMessageText="[19:26:14.517] Tether 23:${l:party[6]}:队员6:${l:party[5]}:队员5:0000:0000:006E:${l:party[5]}:000F:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="9" LogMessageText="[19:26:14.517] Tether 23:${l:party[5]}:队员5:${l:party[3]}:队员3:0000:0000:006E:${l:party[3]}:000F:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="10" ActionType="Placeholder" ExecutionDelayExpression="13.40 * 1000" />
<Action OrderNumber="11" LogMessageText="[19:26:27.914] StartsCasting 14:40009B4C:Usurper of Frost:9D24:Hallowed Wings:" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers />
</Folder>
</Folders>
<Triggers />
</Folder>
<Folder Id="d3ef5128-8950-417a-84f1-8547657ed893" Name="警察 (没写完" Enabled="false">
<Folders>
<Folder Id="cb84be17-cc85-43f5-b113-f1728650f145" Name="P3 一运" Enabled="true" RawEnvironmentVariables="phase = P3一运">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="0. 初始化" Id="001b277f-2504-4f39-9e20-d34cbceecb30" RegularExpression="^U7a3_一运:dir8">
<Actions>
<Action OrderNumber="1" NamedCallbackName="U7a3_一运_Analyzer" NamedCallbackParam="Command = Init" ActionType="NamedCallback" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1. 收集技能数据（通用）" Id="a2c8e49e-66fc-4ff7-9a12-9440fcbe024f" RegularExpression="^.{15}\S+ 1[56]:(?&lt;sid&gt;4.{7}):[^:]*:(?&lt;aid&gt;9D5[2457]|9D2B|9D64|9D4F):[^:]*:(?&lt;tid&gt;[1E].{7}):([^:]*:){37}(?&lt;aoeid&gt;.{8}):(?&lt;idx&gt;[^:]*):(?&lt;count&gt;[^:]*):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="9D2B 初始激光 | 9D64 旋转激光 | 9D5[2457] 暗炎/火/神圣/冰 | 9D4F 水" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetString" VariableName="tmp_AoE_${aoeid}_0" VariableExpression="${tid}" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${idx}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" ListVariableOp="Push" ListVariableName="tmp_AoE_${aoeid}_others" ListVariableExpression="${tid}" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${idx}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" VariableOp="SetNumeric" VariableName="tmp_AoE_${aoeid}_complete" VariableExpression="(${ev:tmp_AoE_${aoeid}_0} + ${l:tmp_AoE_${aoeid}_others.size} = ${count}) || ${count} = 0" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="5" ActionType="Placeholder" Asynchronous="False" />
<Action OrderNumber="6" NamedCallbackName="U7a3_一运_Analyzer" NamedCallbackParam="Command = Ability&#xD;&#xA;Ability = ${aid}&#xD;&#xA;Source = ${sid}&#xD;&#xA;Target = ${v:tmp_AoE_${aoeid}_0}&#xD;&#xA;Others = ${l:tmp_AoE_${aoeid}_others.join(&quot;,&quot;)}&#xD;&#xA;Count = ${count}" ActionType="NamedCallback" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:tmp_AoE_${aoeid}_complete}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="7" NamedCallbackName="U7a3_一运_Analyzer" NamedCallbackParam="Command = Parse&#xD;&#xA;Ability = ${aid}&#xD;&#xA;Source = ${sid}&#xD;&#xA;Target = ${v:tmp_AoE_${aoeid}_0}&#xD;&#xA;Others = ${l:tmp_AoE_${aoeid}_others.join(&quot;,&quot;)}&#xD;&#xA;Count = ${count}" VariableOp="Clipboard" VariableExpression="Command = Parse&#xD;&#xA;Ability = ${aid}&#xD;&#xA;Source = ${sid}&#xD;&#xA;Target = ${v:tmp_AoE_${aoeid}_0}&#xD;&#xA;Others = ${l:tmp_AoE_${aoeid}_others.join(&quot;,&quot;)}&#xD;&#xA;Count = ${count}" Enabled="False" ActionType="Variable" Asynchronous="False" DescBgColor="fdd">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:tmp_AoE_${aoeid}_complete}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="8" NamedCallbackName="command" NamedCallbackParam="/${pd:U7a_cfg[debugChannel]} &#xD;&#xA;Command = Parse&#xD;&#xA;Ability = ${aid}&#xD;&#xA;Source = ${sid}&#xD;&#xA;Target = ${v:tmp_AoE_${aoeid}_0}&#xD;&#xA;Others = ${l:tmp_AoE_${aoeid}_others.join(&quot;,&quot;)}&#xD;&#xA;Count = ${count}" Enabled="False" ActionType="NamedCallback" Asynchronous="False" DescBgColor="fdd">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:tmp_AoE_${aoeid}_complete}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${count}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="9" VariableName="tmp_AoE_${aoeid}_0" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:tmp_AoE_${aoeid}_complete}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="10" ListVariableName="tmp_AoE_${aoeid}_others" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:tmp_AoE_${aoeid}_complete}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="11" VariableName="tmp_AoE_${aoeid}_complete" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:tmp_AoE_${aoeid}_complete}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="3. 记录返回" Id="84b71891-202e-42de-aeec-893888df6463" RegularExpression="^.{15}\S+ 1A:994:[^:]+:(?&lt;t&gt;[^:]+):.{8}:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" NamedCallbackName="U7a3_一运_Analyzer" NamedCallbackParam="Command = Return&#xD;&#xA;Target = ${tid}" ActionType="NamedCallback" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 沙漏旋转" Id="5cc02832-423c-4303-a981-ad9d701d9fc0" RegularExpression="^U7a3_一运_沙漏:(?&lt;id&gt;.{8}):is顺:(?&lt;is顺&gt;[01]):dir8:(?&lt;dir8&gt;[0-7])">
<Actions>
<Action OrderNumber="1" NamedCallbackName="U7a3_一运_Analyzer" NamedCallbackParam="Command = Rotate&#xD;&#xA;ID = ${id}&#xD;&#xA;Dir8 = ${dir8}&#xD;&#xA;CW = ${is顺}" ActionType="NamedCallback" Asynchronous="False" />
</Actions>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers />
</Folder>
</Folders>
<Triggers />
</Folder>
<Folder FFXIVZoneFilterEnabled="True" FfxivZoneFilterRegularExpression="^1238$" Id="71b30570-45d4-4362-9793-77f1df0f8358" Name="输出" Enabled="true">
<Folders>
<Folder Id="95dfd984-a96c-4562-a1f1-164e0df589eb" Name="P1" Enabled="true">
<Folders>
<Folder Id="c5591242-3519-4fd1-8e1c-bd706d8997b2" Name="A. 雾龙" Enabled="true" RawEnvironmentVariables="phase = P1雾龙">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="O1. 播报" Id="2916e277-fb55-45b9-893d-527c0d09db9c" RegularExpression="^U7a1_雾龙_dir8:safe:(?&lt;dir8&gt;[0123])">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${if: roundvec(${_me.x} - 100, ${_me.y} - 100, 8) % 4 = ${dir8}&#xD;&#xA;  ? 退后，脚下安全&#xD;&#xA;  : 前进 &#xD;&#xA;}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="2" UseTTSTextExpression="去${?d: 0 = 上下, 1 = 左上右下, 2 = 左右, 3 = 右上左下 [${dir8}]}，${if: ${v:U7a1_雾龙_is散} ? 分散 : 分摊 }" ActionType="UseTTS" ExecutionDelayExpression="2000" Asynchronous="False" />
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="clear&#xD;&#xA;---&#xD;&#xA;O: 100, 100, 0&#xD;&#xA;θ: dir2rad(0${dir8}, 8) + (${v:myIdx_isG1} ? 0 : π)&#xD;&#xA;${if: ${v:myIdx_isG1} ? C : D }:  0, -13&#xD;&#xA;${if: ${v:myIdx_isG1} ? A : B }:  0, -20&#xD;&#xA;${if: ${v:myIdx_isG1} ? 1 : 2 }:  6, -19&#xD;&#xA;${if: ${v:myIdx_isG1} ? 3 : 4 }: -6, -19" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a1_雾龙_is散}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="clear&#xD;&#xA;---&#xD;&#xA;O: 100, 100, 0&#xD;&#xA;θ: dir2rad(0${dir8}, 8) + (${v:myIdx_isG1} ? 0 : π)&#xD;&#xA;${if: ${v:myIdx_isG1} ? C : D }:    0, -13.2&#xD;&#xA;${if: ${v:myIdx_isG1} ? A : B }:    0, -16.2&#xD;&#xA;${if: ${v:myIdx_isG1} ? 1 : 2 }:  1.5, -14.7&#xD;&#xA;${if: ${v:myIdx_isG1} ? 3 : 4 }: -1.5, -14.7" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a1_雾龙_is散}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" NamedCallbackName="AdvWm" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="8100" Asynchronous="False" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="+1. 储存雷火 Utopian Sky" Id="ac4c605f-3fbf-49de-96b4-ab629b1d04a9" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9CD(?&lt;type&gt;A|B):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="记录${if: ${v:U7a1_雾龙_is散} ? 分散 : 分摊 }" ActionType="UseTTS" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="10c47186-0041-4ab4-8a95-817a47506ba2" Name="杂项" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="雷火八方" Id="5c04506c-1ea3-4b4e-a3a2-11ae28a76c77" RegularExpression="^.{15}\S+ 14:(?&lt;sid&gt;4.{7}):[^:]+:(?&lt;aid&gt;9CD[04]|9D8[9A]):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="八方，${?d: 9CD0 = 火分摊, 9CD4 = 雷分散, 9D89 = 火分摊, 9D8A = 雷分散 [${aid}]}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="2" NamedCallbackName="ObjectScaling" NamedCallbackParam="${_entity[${sid}].address}, 2" ActionType="NamedCallback" DescTextColor="26f" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="1093dd29-a947-484d-ad44-7487c1df7835" Name="B. 光轮" Enabled="true" RawEnvironmentVariables="phase = P1光轮">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="+1. 储存雷火 光轮召唤" Id="b976f753-d3e3-4d8d-89a4-dd2c218ff176" RegularExpression="^.{15}\S+ 14:(?&lt;sid&gt;4.{7}):[^:]+:9CD(?&lt;type&gt;6|7):">
<Actions>
<Action OrderNumber="1" NamedCallbackName="ObjectScaling" NamedCallbackParam="${_entity[${sid}].address}, 2" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="2" UseTTSTextExpression="南北靠外，偏向${if: ${v:U7a1_光轮_is火safe} ? 红色火圈 : 蓝色雷圈 }" ActionType="UseTTS" ExecutionDelayExpression="4500" />
<Action OrderNumber="3" NamedCallbackName="ObjectScaling" NamedCallbackParam="${_entity[${sid}].address}, 0.1" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, 0&#xD;&#xA;ScaleX: 2.2&#xD;&#xA;ScaleY: 11.1&#xD;&#xA;A:  0, -1&#xD;&#xA;1: -1, -1&#xD;&#xA;2:  1, -1&#xD;&#xA;C:  0,  1&#xD;&#xA;3:  1,  1&#xD;&#xA;4: -1,  1&#xD;&#xA;" ActionType="NamedCallback" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="+2. 光轮位置" Id="cbb79b51-67f6-4cac-9c23-ce4d6c94eb40" RegularExpression="^.{15}\S+ 03:4.{7}:([^:]*:){7}17821:([^:]*:){6}(?&lt;x&gt;(8|11)[45][^:]*):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="17821火 17822雷 正北逆四个固定同色，所以只需要看正左右哪个是火" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="U7a1_光轮_is右safe" VariableExpression="(${x} &gt; 100) = ${v:U7a1_光轮_is火safe}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, 0&#xD;&#xA;ScaleX: 0${v:U7a1_光轮_is右safe} ? 1 : -1&#xD;&#xA;ScaleY: 11.1&#xD;&#xA;A: 0, -1&#xD;&#xA;1: 3, -1&#xD;&#xA;D: 6, -1&#xD;&#xA;4: 9, -1&#xD;&#xA;C: 0,  1&#xD;&#xA;3: 3,  1&#xD;&#xA;B: 6,  1&#xD;&#xA;2: 9,  1" ActionType="NamedCallback" DescBgColor="dff" />
<Action OrderNumber="4" ActionType="Placeholder" ExecutionDelayExpression="2600" />
<Action OrderNumber="5" ActionType="Placeholder" Description="二段雷判定" DescriptionOverride="True" />
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, 0&#xD;&#xA;ScaleX: 0${v:U7a1_光轮_is右safe} ? 1 : -1&#xD;&#xA;// 准确击退到空隙的 y&#xD;&#xA;ScaleY: 6.87&#xD;&#xA;1:  6.1, -1&#xD;&#xA;A:  9.6, -1&#xD;&#xA;4: 13.1, -1&#xD;&#xA;D: 16.6, -1&#xD;&#xA;3:  6.1,  1&#xD;&#xA;C:  9.6,  1&#xD;&#xA;2: 13.1,  1&#xD;&#xA;B: 16.6,  1" ActionType="NamedCallback" DescBgColor="dff" />
<Action OrderNumber="7" ActionType="Placeholder" ExecutionDelayExpression="4300" />
<Action OrderNumber="8" ActionType="Placeholder" Description="一段火判定" DescriptionOverride="True" />
<Action OrderNumber="9" UseTTSTextExpression="贴近击退" ActionType="UseTTS" />
<Action OrderNumber="10" />
<Action OrderNumber="11" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, 0&#xD;&#xA;ScaleX: 0${v:U7a1_光轮_is右safe} ? 1 : -1&#xD;&#xA;// 准确击退到空隙的 y&#xD;&#xA;ScaleY: 6.87&#xD;&#xA;1:  1.6, -1&#xD;&#xA;A:  6.6, -1&#xD;&#xA;4: 11.6, -1&#xD;&#xA;D: 16.6, -1&#xD;&#xA;3:  1.6,  1&#xD;&#xA;C:  6.6,  1&#xD;&#xA;2: 11.6,  1&#xD;&#xA;B: 16.6,  1" ActionType="NamedCallback" DescBgColor="dff" />
<Action OrderNumber="12" ActionType="Placeholder" ExecutionDelayExpression="4000" />
<Action OrderNumber="13" ActionType="Placeholder" Description="光轮判定" DescriptionOverride="True" />
<Action OrderNumber="14" UseTTSTextExpression="分摊" ActionType="UseTTS" />
<Action OrderNumber="15" NamedCallbackName="AdvWm" NamedCallbackParam="load" ActionType="NamedCallback" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O2. 光轮缩放+透明度" Id="f8a9b5c7-5a0a-40f8-89c4-83ef6e5facda" RegularExpression="^.{15}\S+ 03:(?&lt;id&gt;4.{7}):([^:]*:){7}(?&lt;bnpcid&gt;1782[12]):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="条件：on" DescriptionOverride="True" />
<Action OrderNumber="2" NamedCallbackName="SetOpacity" NamedCallbackParam="${_entity[${id}].address}, ${n: (${bnpcid} = 17821) = ${v:U7a1_光轮_is火safe} ? 0.5 : 1}" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="3" NamedCallbackName="ObjectScaling" NamedCallbackParam="${_entity[${id}].address}, ${n: (${bnpcid} = 17821) = ${v:U7a1_光轮_is火safe} ? 0.6 : 0.6}" ActionType="NamedCallback" ExecutionDelayExpression="250" DescTextColor="26f" />
<Action OrderNumber="4" NamedCallbackName="ObjectScaling" NamedCallbackParam="${_entity[${id}].address}, ${n: (${bnpcid} = 17821) = ${v:U7a1_光轮_is火safe} ? 0.6 : 0.6}" ActionType="NamedCallback" ExecutionDelayExpression="250" DescTextColor="26f" />
<Action OrderNumber="5" NamedCallbackName="SetOpacity" NamedCallbackParam="${_entity[${id}].address}, ${n: (${bnpcid} = 17821) = ${v:U7a1_光轮_is火safe} ? 1 : 1}" ActionType="NamedCallback" ExecutionDelayExpression="8400" DescTextColor="26f" />
<Action OrderNumber="6" NamedCallbackName="ObjectScaling" NamedCallbackParam="${_entity[${id}].address}, ${n: (${bnpcid} = 17821) = ${v:U7a1_光轮_is火safe} ? 1 : 2}" ActionType="NamedCallback" DescTextColor="26f" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1光轮缩放on]}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="O1. 换位" Id="f1f109c7-5b38-4fb2-9460-438c0a67dde7" RegularExpression="^U7a1_光轮_连线:北:(?&lt;北&gt;[1-8]):南:(?&lt;南&gt;[1-8]):换:(?&lt;换&gt;[0-8])">
<Actions>
<Action OrderNumber="1" NamedCallbackName="command" NamedCallbackParam="/${pd:U7a_cfg[publicChannel]} &#xD;&#xA;北：${?l:ＭＴ,ＳＴ,Ｈ１,Ｈ２,Ｄ１,Ｄ２,Ｄ３,Ｄ４[${北}]}&#xD;&#xA;南：${?l:ＭＴ,ＳＴ,Ｈ１,Ｈ２,Ｄ１,Ｄ２,Ｄ３,Ｄ４[${南}]}&#xD;&#xA;${?l:不需,ＭＴ,ＳＴ,Ｈ１,Ｈ２,Ｄ１,Ｄ２,Ｄ３,Ｄ４[${n: ${换} + 1}]}${if: ${_ffxivisglobal} ? 補位 : 补位 }" ActionType="NamedCallback" />
<Action OrderNumber="2" ActionType="Placeholder" ExecutionDelayExpression="2200" />
<Action OrderNumber="3" ActionType="Placeholder" Asynchronous="False" Description="自己是北线" DescriptionOverride="True" />
<Action OrderNumber="4" UseTTSTextExpression="连线，${if: ${v:myIdx_isG1} ? 不换位，北侧等待击退 : 换到北侧，等待击退 }" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx}" ExpressionTypeL="String" ExpressionR="${北}" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" ActionType="Placeholder" Asynchronous="False" Description="自己是南线" DescriptionOverride="True" />
<Action OrderNumber="6" UseTTSTextExpression="连线，${if: ${v:myIdx_isG1} ? 换到南侧，等待击退 : 不换位，南侧等待击退 }" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx}" ExpressionTypeL="String" ExpressionR="${南}" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="7" ActionType="Placeholder" Asynchronous="False" Description="自己是 MT &amp;&amp; 无线" DescriptionOverride="True" />
<Action OrderNumber="8" UseTTSTextExpression="${if: ${v:myIdx} = ${换} ? 换到南侧，等待击退 : 不换位，北侧等待击退 }" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx} = 1 &amp;&amp; ${v:myIdx} != ${北} &amp;&amp; ${v:myIdx} != ${南}" ExpressionTypeL="Numeric" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="9" ActionType="Placeholder" Asynchronous="False" Description="自己是 D1 &amp;&amp; 无线" DescriptionOverride="True" />
<Action OrderNumber="10" UseTTSTextExpression="${if: ${v:myIdx} = ${换} ? 换到北侧，等待击退 : 不换位，南侧等待击退 }" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx} = 5 &amp;&amp; ${v:myIdx} != ${北} &amp;&amp; ${v:myIdx} != ${南}" ExpressionTypeL="Numeric" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="11" ActionType="Placeholder" Asynchronous="False" Description="自己不是 MT/D1，也没有线" DescriptionOverride="True" />
<Action OrderNumber="12" UseTTSTextExpression="${if: ${v:myIdx_isG1} ? 北侧等待击退 : 南侧等待击退 }" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx} % 4 != 1 &amp;&amp; ${v:myIdx} != ${北} &amp;&amp; ${v:myIdx} != ${南}" ExpressionTypeL="Numeric" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="1bf87001-ee41-4891-adef-8b72f773a744" Name="C. 四线" Enabled="true" RawEnvironmentVariables="phase = P1四线">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="+0. 落地" Id="13750e09-2c36-44cf-9804-baab702be9c7" RegularExpression="^.{15}\S+ AAA:10F:4.{7}:[^:]*:9707:17819:100">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="流血AoE" ActionType="UseTTS" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Circle&#xD;&#xA;Waymarks: A1D4C3B2&#xD;&#xA;O: 100, 100&#xD;&#xA;R: 15&#xD;&#xA;R2: 100" ActionType="NamedCallback" DescBgColor="dff" />
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="34000" DescBgColor="dff" />
<Action OrderNumber="4" UseTTSTextExpression="流血AoE" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O3.1 文本播报" Id="506f5d48-fb7f-46d0-a104-8f7ac4355317" RegularExpression="^U7a1_四线:is雷:(?&lt;is雷1&gt;.)(?&lt;is雷2&gt;.)(?&lt;is雷3&gt;.)(?&lt;is雷4&gt;.):点名:(?&lt;点名1&gt;.)(?&lt;点名2&gt;.)(?&lt;点名3&gt;.)(?&lt;点名4&gt;.):无点名:(?&lt;无1&gt;.)(?&lt;无2&gt;.)(?&lt;无3&gt;.)(?&lt;无4&gt;.)">
<Actions>
<Action OrderNumber="1" NamedCallbackName="command" NamedCallbackParam="/${pd:U7a_cfg[publicChannel]} &#xD;&#xA;閑人北：${l:roleDesc[${无1}]} &gt; ${l:roleDesc[${无2}]}&#xD;&#xA;閑人南：${l:roleDesc[${无3}]} &gt; ${l:roleDesc[${无4}]}" ActionType="NamedCallback">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_ffxivisglobal}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="2" NamedCallbackName="command" NamedCallbackParam="/${pd:U7a_cfg[publicChannel]} &#xD;&#xA;闲人北：${l:roleDesc[${无1}]} &gt; ${l:roleDesc[${无2}]}&#xD;&#xA;闲人南：${l:roleDesc[${无3}]} &gt; ${l:roleDesc[${无4}]}" ActionType="NamedCallback">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_ffxivisglobal}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O3.2 vfx 标记" Id="f32277ae-efd8-4d76-954a-f1325cbc941c" RegularExpression="^U7a1_四线:">
<Actions>
<Action OrderNumber="1" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${l:party[${l:U7a1_四线_无点名idx[1]}]}].address}, 419" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="2" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${l:party[${l:U7a1_四线_无点名idx[2]}]}].address}, 420" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="3" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${l:party[${l:U7a1_四线_无点名idx[3]}]}].address}, 421" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="4" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${l:party[${l:U7a1_四线_无点名idx[4]}]}].address}, 422" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="5" ActionType="Placeholder" ExecutionDelayExpression="14000" />
<Action OrderNumber="6" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${l:party[1]}].address}, 0" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="7" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${l:party[2]}].address}, 0" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="8" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${l:party[3]}].address}, 0" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="9" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${l:party[4]}].address}, 0" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="10" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${l:party[5]}].address}, 0" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="11" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${l:party[6]}].address}, 0" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="12" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${l:party[7]}].address}, 0" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="13" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${l:party[8]}].address}, 0" ActionType="NamedCallback" DescTextColor="26f" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O2.  闲人组" Id="50876d0e-e77a-4830-a67b-c8f6803cdd39" RegularExpression="^U7a1_四线_无:my无:(?&lt;my无&gt;[1-4]):is雷1:(?&lt;is雷1&gt;[01]):is雷2:(?&lt;is雷2&gt;[01])">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="闲人固定：" DescriptionOverride="True" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, -1.5&#xD;&#xA;θ: (${my无} &gt; 2 ? 0 : π) + (${pd:U7a_cfg[P1线is南北]} ? 0 : π/2)&#xD;&#xA;ScaleX: ${my无} % 2 ? 1 : -1&#xD;&#xA;1: 2.15, -5.19" ActionType="NamedCallback" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1is线固定]}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" UseTTSTextExpression="去${?d: 0 = 右东, 1 = 左西, 2 = 下南, 3 = 上北 [${n: (${my无} &lt;= 2) + 2 * ${pd:U7a_cfg[P1线is南北]}}]}，${my无}号无点名，${if: ${my无} % 2 ? 左侧 : 右侧 }${if: ${is雷1} ? 引导雷分散 : 引导火分摊 }" UseTTSExclusive="False" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1is线固定]}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" ActionType="Placeholder" Description="连线固定：" DescriptionOverride="True" />
<Action OrderNumber="5" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, -1.5&#xD;&#xA;θ: (${my无} &gt; 2 ? 0 : π) + (${pd:U7a_cfg[P1线is南北]} ? 0 : π/2)&#xD;&#xA;ScaleX: ${my无} % 2 ? 1 : -1&#xD;&#xA;1: ${if: ${is雷1} ? 2.15, -5.19 : 0, -7.5 }&#xD;&#xA;2: ${if: ${is雷2} &#xD;&#xA;    ? ${if: ${is雷1} == ${is雷2} ? 2.15, -6.29 : 2.15, -5.19 }&#xD;&#xA;    : ${if: ${is雷1} == ${is雷2} ? 0,    -8.6  : 0,    -7.5  }&#xD;&#xA;}" ActionType="NamedCallback" DescBgColor="dff" />
<Action OrderNumber="6" UseTTSTextExpression="去${?d: 0 = 右东, 1 = 左西, 2 = 下南, 3 = 上北 [${n: (${my无} &lt;= 2) + 2 * ${pd:U7a_cfg[P1线is南北]}}]}，${my无}号无点名，${if: ${is雷1} ? ${if: ${my无} % 2 ? 左前 : 右前 }引导雷分散 : 靠后引导火分摊 }" UseTTSExclusive="False" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1is线固定]}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="7" ActionType="Placeholder" ExecutionDelayExpression="${my无} &gt; 2 ? 8500 : 5500" />
<Action OrderNumber="8" ActionType="Placeholder" Description="连线固定：" DescriptionOverride="True" />
<Action OrderNumber="9" NamedCallbackName="AdvWm" NamedCallbackParam="1: clear" ActionType="NamedCallback" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1is线固定]}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="10">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1is线固定]}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="11" UseTTSTextExpression="${if: ${is雷2} ? ${if: ${my无} % 2 ? 左前 : 右前 }引导雷分散 : 引导火分摊 }" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1is线固定]}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a1_四线_无点名idx.contain(${v:myIdx})}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="O1.  连线组" Id="3fa81195-ceee-4957-ade0-a6903825a1f2" RegularExpression="^U7a1_四线_线:my线:(?&lt;idx&gt;[1-4]):is雷:(?&lt;is雷&gt;[01])">
<Actions>
<Action OrderNumber="1" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, -1.5&#xD;&#xA;θ: (${idx} % 2 = 1 ? π : 0) + (${pd:U7a_cfg[P1线is南北]} ? 0 : π/2)&#xD;&#xA;&#xD;&#xA;// 不是自己的线：后排挂机&#xD;&#xA;${if: ${idx} &lt;= 2 ? 2 : 1 }:  0,  -7.5&#xD;&#xA;&#xD;&#xA;// 自己的线的位置：根据点名和打法，去中间或左前&#xD;&#xA;${if: ${idx} &lt;= 2 ? 1 : 2 }:  ${if: !${is雷} &amp;&amp; !${pd:U7a_cfg[P1is线固定]} &#xD;&#xA;  ? &quot;4.02, -4.48&quot; &#xD;&#xA;  : &quot;0, -5&quot; &#xD;&#xA;}" ActionType="NamedCallback" DescBgColor="dff" />
<Action OrderNumber="2" ActionType="Placeholder" Description="1/2线：" DescriptionOverride="True" />
<Action OrderNumber="3" UseTTSTextExpression="去${?d: 0 = 右东, 1 = 左西, 2 = 下南, 3 = 上北 [${n: ${idx} % 2 + 2 * ${pd:U7a_cfg[P1线is南北]}}]}，&#xD;&#xA;点名${idx}号${if: ${pd:U7a_cfg[P1is线固定]} &#xD;&#xA;  ? ${if: ${is雷} ? 雷 : 火 }，靠前站位&#xD;&#xA;  : ${if: ${is雷} ? 雷，中间引导 : 火，左前引导 }&#xD;&#xA;}" ActionType="UseTTS">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${idx}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="NumericLessEqual" />
</Condition>
</Action>
<Action OrderNumber="4" ActionType="Placeholder" Description="3/4线：" DescriptionOverride="True" />
<Action OrderNumber="5" UseTTSTextExpression="去${?d: 0 = 右东, 1 = 左西, 2 = 下南, 3 = 上北 [${n: ${idx} % 2 + 2 * ${pd:U7a_cfg[P1线is南北]}}]}，&#xD;&#xA;点名${idx}号${if: ${l:U7a1_四线_is雷[-1]} ? 雷 : 火 }，靠后站位" ActionType="UseTTS">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${idx}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="NumericGreater" />
</Condition>
</Action>
<Action OrderNumber="6" ActionType="Placeholder" Description="前一部分延迟为到第四根线出现的时间 后一部分延迟为第四根线到上下两组判定的时间" DescriptionOverride="True" />
<Action OrderNumber="7" ActionType="Placeholder" ExecutionDelayExpression="${?l: 8200, 5000, 2500, 0 [${idx}]} + ${?l: 5000, 8000, 5000, 8000 [${idx}]}" />
<Action OrderNumber="8" NamedCallbackName="AdvWm" NamedCallbackParam="1: clear" ActionType="NamedCallback" DescBgColor="dff" />
<Action OrderNumber="9" UseTTSTextExpression="${if: ${idx} &lt;= 2 ? &quot;后退，引导&quot; : &quot;前进，&quot; }${if: ${l:U7a1_四线_is雷[${n: ${idx} % 2 = 1 ? 3 : 4 }]} ? 雷分散 : 火分摊 }" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1is线固定]}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="10" UseTTSTextExpression="${if: ${l:U7a1_四线_is雷[${n: ${idx} % 2 = 1 ? 3 : 4 }]} &#xD;&#xA;  ? ${if: ${idx} &lt;= 2 ? &quot;后退，雷分散&quot; : &quot;去中间，引导雷分散&quot; } &#xD;&#xA;  : ${if: ${idx} &lt;= 2 ? &quot;后退，火分摊&quot; : &quot;去左前，引导火分摊&quot; }&#xD;&#xA;}" UseTTSExclusive="False" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P1is线固定]}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="+1. 连线标记特效" Id="f2d5236a-7ce2-4bf7-b03d-9d35030838c1" RegularExpression="^.{15}\S+ 23:4.{7}:[^:]*:(?&lt;tid&gt;1.{7}):[^:]*:0000:0000:(?&lt;type&gt;011F|00F9):">
<Actions>
<Action OrderNumber="1" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${tid}].address}, ${n: 258 + ${l:U7a1_四线_is雷.size}}" ActionType="NamedCallback" ExecutionDelayExpression="200" DescTextColor="26f" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
</Triggers>
</Folder>
<Folder Id="826b2eb6-37d2-4b3c-94f8-d1920c7dcd17" Name="D. 六人塔" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Sequential="True" Name="O1. 播报" Id="971ab547-5d70-4ac2-a94e-96d605f71951" RegularExpression="^U7a1_塔:myTower:(?&lt;myTower&gt;[0-3]):is右:(?&lt;is右&gt;[01]):is火:(?&lt;is火&gt;[01])">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="T" DescriptionOverride="True" />
<Action OrderNumber="2" UseTTSTextExpression="去${if: ${is右} ? 左 : 右 }侧，${if: ${is火} ? 火击退 : 雷远离 }" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${myTower}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="clear&#xD;&#xA;---&#xD;&#xA;Action: Linear&#xD;&#xA;O: 100, 100, 0&#xD;&#xA;ScaleX: (0${is右} ? -1 : 1) * 6.25&#xD;&#xA;ScaleY: ${v:myIdx} = 1 ? -1 : 1&#xD;&#xA;Waymarks: 1234&#xD;&#xA;Start: 1, 3.4&#xD;&#xA;End:   1, 10" ActionType="NamedCallback" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${myTower}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" ActionType="Placeholder" Asynchronous="False" Description="HD" DescriptionOverride="True" />
<Action OrderNumber="5" UseTTSTextExpression="${?d: 01 = 左上, 02 = 正左, 03 = 左下, 11 = 右上, 12 = 正右, 13 = 右下 [${is右}${myTower}]}踩塔，${if: ${is火} ? 火击退 : 雷远离 }" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${myTower}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#xD;&#xA;O: 100, 100, 0&#xD;&#xA;ScaleX: 0${is右} ? 1 : -1&#xD;&#xA;Waymarks: 1234&#xD;&#xA;Start: 6.25, -3.3 + (${myTower} - 2) * 9.17&#xD;&#xA;End:   6.25,  3.3 + (${myTower} - 2) * 9.17&#xD;&#xA;---&#xD;&#xA;B: fakeclear&#xD;&#xA;D: fakeclear" ActionType="NamedCallback" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${myTower}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="7" NamedCallbackName="command" NamedCallbackParam="/${pd:U7a_cfg[debugChannel]} ${_event}" ActionType="NamedCallback" DescBgColor="fdd" />
<Action OrderNumber="8" ActionType="Placeholder" ExecutionDelayExpression="6200" />
<Action OrderNumber="9" />
<Action OrderNumber="10" ActionType="Placeholder" Asynchronous="False" Description="T" DescriptionOverride="True" />
<Action OrderNumber="11" UseTTSTextExpression="${if: ${is火} ? 靠近 : 远离 }，开减伤" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${myTower}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="12" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#xD;&#xA;O: 100, 100, 0&#xD;&#xA;ScaleX: (0${is右} ? -1 : 1) * (${is火} ? 1.25 : 11.25)&#xD;&#xA;ScaleY: ${v:myIdx} = 1 ? -1 : 1&#xD;&#xA;Waymarks: 1234&#xD;&#xA;Start: 1, 5.4&#xD;&#xA;End:   1, 12" ActionType="NamedCallback" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${myTower}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="13" ActionType="Placeholder" Asynchronous="False" Description="HD" DescriptionOverride="True" />
<Action OrderNumber="14" UseTTSTextExpression="${if: ${is火} ? 靠近 : 远离 }" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${myTower}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="15" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#xD;&#xA;O: 100, 100, 0&#xD;&#xA;ScaleX: (0${is右} ? 1 : -1) * (${is火} ? 1.25 : 11.25)&#xD;&#xA;Waymarks: 1234&#xD;&#xA;Start: 1, -3.3 + (${v:U7a1_塔_自己补塔} - 2) * 9.17&#xD;&#xA;End:   1,  3.3 + (${v:U7a1_塔_自己补塔} - 2) * 9.17" ActionType="NamedCallback" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${myTower}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="16" NamedCallbackName="AdvWm" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="4400" DescBgColor="dff" />
</Actions>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers />
</Folder>
<Folder Id="17fa2c6d-6023-4817-98b8-56f37f1d6fbe" Name="P2" Enabled="true">
<Folders>
<Folder Id="b5b49841-5b80-4348-8336-aa1dad8277d0" Name="A. 钻石星尘" Enabled="true" RawEnvironmentVariables="phase = P2DD">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="+0. 开始 读条镜像" Id="df60d71b-22e8-4d42-970e-25033bf57f43" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9CF4:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="准备AoE" ActionType="UseTTS" />
<Action OrderNumber="2" UseTTSTextExpression="钻石星尘" ActionType="UseTTS" ExecutionDelayExpression="5000" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O1. 播报" Id="5ac1fe70-ae19-4706-85cc-07d495beb5cb" RegularExpression="^U7a2_DD:dir8:(?&lt;dir8&gt;[0123]):is钢:(?&lt;is钢&gt;[01]):id:">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="U7a2_DD_is点名自己" VariableExpression="${l:U7a2_DD_点名id.contain(${_me.id})}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="U7a2_DD_is自己正点" VariableExpression="(0${dir8} % 2 = 1) = 0${v:U7a2_DD_is点名自己}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="clear" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="4" UseTTSTextExpression="钢铁，去${if: ${v:U7a2_DD_is自己正点} ? 正点 : 斜点 }，贴边放点名" UseTTSExclusive="False" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${is钢}${v:U7a2_DD_is点名自己}" ExpressionTypeL="String" ExpressionR="11" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" UseTTSTextExpression="钢铁，去${if: ${v:U7a2_DD_is自己正点} ? 正点 : 斜点 }，贴近黑线引导扇形" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${is钢}${v:U7a2_DD_is点名自己}" ExpressionTypeL="String" ExpressionR="10" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Circle&#xD;&#xA;O: 100, 100, 0&#xD;&#xA;Waymarks: ${if: ${v:U7a2_DD_is自己正点} ? A_D_C_B_ : _1_4_3_2 }&#xD;&#xA;R:  0${v:U7a2_DD_is点名自己} ? 19 : 17.25" ActionType="NamedCallback" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${is钢}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="7" UseTTSTextExpression="月环，先去脚下${if: ${v:U7a2_DD_is自己正点} ? 正点 : 斜点 }，然后出去放冰花" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${is钢}${v:U7a2_DD_is点名自己}" ExpressionTypeL="String" ExpressionR="01" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="8" UseTTSTextExpression="月环，${if: ${v:U7a2_DD_is自己正点} ? 正点 : 斜点 }靠近引导扇形" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${is钢}${v:U7a2_DD_is点名自己}" ExpressionTypeL="String" ExpressionR="00" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="9" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Circle&#xD;&#xA;O: 100, 100, 0&#xD;&#xA;Waymarks: ${if: 0${v:U7a2_DD_is自己正点} ? A_D_C_B_ : _1_4_3_2 }&#xD;&#xA;R:  0${v:U7a2_DD_is点名自己} ? 2.75 : 1.77" ActionType="NamedCallback" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${is钢}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="10" LogMessageText="cd5:${if: ${v:U7a2_DD_is点名自己} ? 8.0 : 5.6 }" LogProcess="True" ActionType="LogMessage" />
<Action OrderNumber="11" ActionType="Placeholder" ExecutionDelayExpression="5400" Asynchronous="False" />
<Action OrderNumber="12" ActionType="Placeholder" Asynchronous="False" Description="钢铁月环判定" DescriptionOverride="True" />
<Action OrderNumber="13" UseTTSTextExpression="出去放冰花" UseTTSExclusive="False" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${is钢}${v:U7a2_DD_is点名自己}" ExpressionTypeL="String" ExpressionR="01" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="14" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Circle&#xD;&#xA;O: 100, 100, 0&#xD;&#xA;Waymarks: ${if: ${v:U7a2_DD_is自己正点} ? A_D_C_B_ : _1_4_3_2 }&#xD;&#xA;R:  8" ActionType="NamedCallback" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${is钢}${v:U7a2_DD_is点名自己}" ExpressionTypeL="String" ExpressionR="01" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="15" UseTTSTextExpression="回场中" UseTTSExclusive="False" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${is钢}${v:U7a2_DD_is点名自己}" ExpressionTypeL="String" ExpressionR="10" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="16" ActionType="Placeholder" ExecutionDelayExpression="2500" Asynchronous="False" />
<Action OrderNumber="17" ActionType="Placeholder" Asynchronous="False" Description="冰花点名判定" DescriptionOverride="True" />
<Action OrderNumber="18" UseTTSTextExpression="击退到${f:pick(${n: ${dir8} + (${v:myIdx_isG1} ? 0 : 4) }): 红色A, 红色壹, 紫色D, 紫色4, 蓝色C, 蓝色3, 黄色B, 黄色贰}点方向" UseTTSExclusive="False" ActionType="UseTTS" />
<Action OrderNumber="19" NamedCallbackName="AdvWm" NamedCallbackParam="clear&#xD;&#xA;---&#xD;&#xA;Action: Circle&#xD;&#xA;O: 100, 100, 0&#xD;&#xA;Waymarks: ${f:pick(0${dir8}): A___C___, _1___3__, __D___B_, ___4___2 }&#xD;&#xA;R:  6&#xD;&#xA;---&#xD;&#xA;Action: Linear&#xD;&#xA;O: 100, 100, 0&#xD;&#xA;θ: dir2rad(0${dir8}, 8) + (${v:myIdx_isG1} ? 0 : π)&#xD;&#xA;Waymarks: ${f:pick(0${dir8}): 1234, ABCD, 1234, ABCD }&#xD;&#xA;Start: 0, -12&#xD;&#xA;End:   0, -18" ActionType="NamedCallback" DescBgColor="dff" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="d3bc36a6-7ca4-4c68-a08c-0cd592b11e6f" Name="C. 镜之国" Enabled="true" RawEnvironmentVariables="phase = P2镜子">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="+0. 开始" Id="de148ea3-3d63-4ac7-9f74-1b05c344d7cb" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9CF3:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="镜子" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="+1. 获取白镜子 （时间轴）" Id="ebee9354-0945-43ad-b0f4-5a89a4e6b5c5" RegularExpression="^.{15}\S+ 101:.{8}:00020001:0(?&lt;pos&gt;[1-8])">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="6.1 读条月环 | 11.8 第一轮月环 | 21.8 第二轮月环" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="U7a2_镜子_白dir8" VariableExpression="(9 - 0${pos}) % 8" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="cd5:12.0" LogProcess="True" ActionType="LogMessage" />
<Action OrderNumber="4" LogMessageText="cd5:22.0" LogProcess="True" ActionType="LogMessage" />
<Action OrderNumber="5" UseTTSTextExpression="去${f:pick(${v:U7a2_镜子_白dir8}): 上北, 左上, 左西, 左下, 下南, 右下, 右东, 右上}白镜子" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx_isTM}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: dir2rad(${v:U7a2_镜子_白dir8}, 8)&#xD;&#xA;1: 0, -1&#xD;&#xA;2: 0, -4&#xD;&#xA;3: 0, -7&#xD;&#xA;4: 0, -10&#xD;&#xA;---&#xD;&#xA;O: 100, 100 polar 20, dir2rad(${v:U7a2_镜子_白dir8}, 8)&#xD;&#xA;θ: dir2rad(${v:U7a2_镜子_白dir8}, 8)&#xD;&#xA;A: polar 2.75, -85°&#xD;&#xA;B: polar 2.75, -45°&#xD;&#xA;C: polar 2.75,  45°&#xD;&#xA;D: polar 2.75,  85°" ActionType="NamedCallback" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx_isTM}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="7" UseTTSTextExpression="去${f:pick(${v:U7a2_镜子_白dir8}): 下南, 右下, 右东, 右上, 上北, 左上, 左西, 左下}" UseTTSExclusive="False" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx_isTM}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="8" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#xD;&#xA;O: 100, 100&#xD;&#xA;θ: dir2rad(${v:U7a2_镜子_白dir8}, 8)&#xD;&#xA;Waymarks: ABCD1234&#xD;&#xA;Start: 0, 0&#xD;&#xA;End: 0, 18.5" ActionType="NamedCallback" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx_isTM}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="9" ActionType="Placeholder" ExecutionDelayExpression="11800" Asynchronous="False" />
<Action OrderNumber="10" VariableOp="SetNumeric" VariableName="U7a2_镜子_红dir8" VariableExpression="${l:U7a2_镜子_红dir8[1]} + ((${l:U7a2_镜子_红dir8[2]} - ${l:U7a2_镜子_红dir8[1]}) %% 8 = 2 ? 1 : -1)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="11" UseTTSTextExpression="去红镜子" ActionType="UseTTS" />
<Action OrderNumber="12" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100 polar 20, dir2rad(${v:U7a2_镜子_红dir8} + 1, 8)&#xD;&#xA;θ: dir2rad(${v:U7a2_镜子_红dir8} + 1, 8)&#xD;&#xA;1: polar 2.75, -85°&#xD;&#xA;2: polar 2.75, -40°&#xD;&#xA;3: polar 2.75,   5°&#xD;&#xA;4: polar 2.75,  85°&#xD;&#xA;---&#xD;&#xA;O: 100, 100 polar 20, dir2rad(${v:U7a2_镜子_红dir8} - 1, 8)&#xD;&#xA;θ: dir2rad(${v:U7a2_镜子_红dir8} - 1, 8)&#xD;&#xA;A: polar 2.75, -85°&#xD;&#xA;B: polar 2.75,  -5°&#xD;&#xA;C: polar 2.75,  40°&#xD;&#xA;D: polar 2.75,  85°" ActionType="NamedCallback" DescBgColor="dff" />
<Action OrderNumber="13" UseTTSTextExpression="准备分散分摊" ActionType="UseTTS" ExecutionDelayExpression="7000" />
<Action OrderNumber="14" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Circle&#xD;&#xA;Waymarks: A1D4C3B2&#xD;&#xA;R: 6&#xD;&#xA;O: 100, 100" ActionType="NamedCallback" ExecutionDelayExpression="4500" DescBgColor="dff" />
<Action OrderNumber="15" UseTTSTextExpression="八方站位" ActionType="UseTTS" ExecutionDelayExpression="5000" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O2. 红镜子变白（防止特效遮挡）" Id="f7ef6af4-1336-4111-a715-29e9a56764c1" RegularExpression="^.{15}\S+ 101:.{8}:02000100:(?&lt;pos&gt;0[1-8])">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="条件：on" DescriptionOverride="True" />
<Action OrderNumber="2" NamedCallbackName="MapEffect" NamedCallbackParam="00020001:${pos}" ActionType="NamedCallback" ExecutionDelayExpression="13000" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2镜子变白on]}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="O1. 本体月环" Id="5f431c71-411f-482d-afbc-22617b35bf68" RegularExpression="^.{15}\S+ 107:4.{7}:9D0B:(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):(?&lt;z&gt;[^:]+):(?&lt;h&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="phase" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or" />
</Action>
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;1: fakeclear&#xD;&#xA;2: fakeclear&#xD;&#xA;3: fakeclear&#xD;&#xA;4: fakeclear&#xD;&#xA;---&#xD;&#xA;O: ${x}, ${y}&#xD;&#xA;θ: dir2rad(${v:U7a2_镜子_白dir8}, 8)&#xD;&#xA;A: polar 2.75, -90°&#xD;&#xA;B: polar 2.75, -30°&#xD;&#xA;C: polar 2.75,  30°&#xD;&#xA;D: polar 2.75,  90°" ActionType="NamedCallback" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx_isTM}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" UseTTSTextExpression="分散站位" ActionType="UseTTS" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
</Triggers>
</Folder>
<Folder Id="31cb39e5-d971-478e-b893-cf0d08581d56" Name="E. 光暗水晶" Enabled="true" RawEnvironmentVariables="phase = P2水晶">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="碎冰冰" Id="93b932b7-75a3-4863-aed7-b369735ddf5e" RegularExpression="^.{15}\S+ 101:.{8}:00020001:18">
<Actions>
<Action OrderNumber="1" NamedCallbackName="AdvWm" NamedCallbackParam="load" ActionType="NamedCallback" DescBgColor="dff" />
<Action OrderNumber="2" NamedCallbackName="MapEffect" NamedCallbackParam="00080004:18" ActionType="NamedCallback" ExecutionDelayExpression="3000" DescTextColor="26f">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2碎冰on]}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="光圈判定" Id="01f09e4f-a731-4733-b1f0-e8a0806da432" RegularExpression="^.{15}\S+ 1[56]:4.{7}:[^:]*:9D41:[^:]*:(?&lt;tid&gt;1.{7})" PrevActionsRefire="Deny" PeriodRefire="Deny" RefirePeriodExpression="500">
<Actions>
<Action OrderNumber="1" SystemBeepLengthExpression="200" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="1. 标记光之水晶" Id="13cc1407-3075-413a-87d4-7b59a6bb2759" RegularExpression="^.{15}\S+ 03:(?&lt;id&gt;4.{7}):([^:]*:){7}17827:([^:]*:){6}(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):(?&lt;z&gt;[^:]+):(?&lt;h&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" NamedCallbackName="mark" NamedCallbackParam="{&#xD;&#xA;    &quot;ActorID&quot;: 0x${id},&#xD;&#xA;    &quot;MarkType&quot;: &quot;attack${n: (4 - roundvec(${x} - 100, ${y} - 100, 4)) % 4 + 1}&quot;,&#xD;&#xA;    &quot;LocalOnly&quot;: true &#xD;&#xA;}" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dfd" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 标记大水晶" Id="30e0211d-45a1-4f43-a23c-dd780478e6b2" RegularExpression="^.{15}\S+ 03:(?&lt;id&gt;4.{7}):([^:]*:){7}17829:">
<Actions>
<Action OrderNumber="1" NamedCallbackName="mark" NamedCallbackParam="{&#xD;&#xA;    &quot;ActorID&quot;: 0x${id},&#xD;&#xA;    &quot;MarkType&quot;: &quot;triangle&quot;,&#xD;&#xA;    &quot;LocalOnly&quot;: true &#xD;&#xA;}" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dfd" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="3. 暗之水晶不可选中" Id="ee5131f5-7f82-4c5f-b8de-f09c1eb2e7df" RegularExpression="^.{15}\S+ 03:(?&lt;id&gt;4.{7}):([^:]*:){7}17828:([^:]*:){6}(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):(?&lt;z&gt;[^:]+):(?&lt;h&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" NamedCallbackName="SetModelStatus" NamedCallbackParam="${_entity[${id}].Address}, 16384" ActionType="NamedCallback" DescTextColor="26f" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2不可选暗on]}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
</Triggers>
</Folder>
<Folder Id="7c863342-46b4-4d6d-b2e0-4a5b9b2d8db2" Name="B. 滑冰" Enabled="true" RawEnvironmentVariables="phase = P2滑冰">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="+1. 光 → 冰分身（读条分摊） 时间轴" Id="00ef2169-0139-4422-88ea-de2b3cb44a1a" RegularExpression="^.{15}\S+ 107:4.{7}:9D10:(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):(?&lt;z&gt;[^:]+):(?&lt;h&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="3.5 击退结束 | 4.5 冰花判定 | 6.1 冰→光分身出现 | 6.1-7.6-9.1-10.6 四连分摊 | 14.2 背对+冰冻" DescriptionOverride="True" />
<Action OrderNumber="2" LogMessageText="cd4:14.2" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="3" UseTTSTextExpression="分摊，${?d: &#xD;&#xA;  0 = 准备内圈快跑，180度,&#xD;&#xA;  1 = 准备内圈快跑，135度,&#xD;&#xA;  2 = 准备正常前进，90度,&#xD;&#xA;  3 = ${if: ${pd:U7a_cfg[P2DD冰is双逆]} ? 逆时针反向，准备内圈快跑 : 准备贴边慢走，90度 }&#xD;&#xA;  4 = 准备内圈快跑，180度,&#xD;&#xA;  5 = 准备内圈快跑，135度,&#xD;&#xA;  6 = 准备贴边慢走，90度,&#xD;&#xA;  7 = ${if: ${pd:U7a_cfg[P2DD冰is双逆]} ? 逆时针反向，准备内圈快跑 : 逆时针反向，准备贴边慢走，90度 }&#xD;&#xA;  [${v:U7a2_滑冰_rel冰dir8}]&#xD;&#xA;}" UseTTSExclusive="False" ActionType="UseTTS" ExecutionDelayExpression="2000" />
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Circle&#xD;&#xA;O: 100, 100&#xD;&#xA;θ: dir2rad(0${v:U7a2_滑冰_冰dir8}, 8)&#xD;&#xA;R: 3.5&#xD;&#xA;Waymarks: 1432" ActionType="NamedCallback" Description="标点：希瓦头顶 1234" DescBgColor="dff" />
<Action OrderNumber="5" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: dir2rad(0${v:U7a2_滑冰_冰dir8}, 8)&#xD;&#xA;A: polar 16, 160°&#xD;&#xA;B: polar 16, 128°&#xD;&#xA;C: polar 16, 96°&#xD;&#xA;D: polar 16, 64°" ActionType="NamedCallback" Description="冰相对自身：0" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_rel冰dir8}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: dir2rad(0${v:U7a2_滑冰_冰dir8}, 8)&#xD;&#xA;A: polar 18, 135°&#xD;&#xA;B: polar 18, 110°&#xD;&#xA;C: polar 18, 85°&#xD;&#xA;D: polar 18, 60°" ActionType="NamedCallback" Description="冰相对自身：1" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_rel冰dir8}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="7" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: dir2rad(0${v:U7a2_滑冰_冰dir8}, 8)&#xD;&#xA;A: polar 18, 90°&#xD;&#xA;B: polar 18, 70°&#xD;&#xA;C: polar 18, 50°&#xD;&#xA;D: polar 18, 30°" ActionType="NamedCallback" Description="冰相对自身：2" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_rel冰dir8}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="8" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: dir2rad(0${v:U7a2_滑冰_冰dir8}, 8)&#xD;&#xA;A: polar 18.75, 45°&#xD;&#xA;B: polar 18.75, 70°&#xD;&#xA;C: polar 18.75, 95°&#xD;&#xA;D: polar 18.75, 120°" ActionType="NamedCallback" Description="冰相对自身：3（双逆）" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_rel冰dir8}" ExpressionTypeL="String" ExpressionR="3" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2DD冰is双逆]}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="9" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: dir2rad(0${v:U7a2_滑冰_冰dir8}, 8)&#xD;&#xA;A: polar 18.75, 56°&#xD;&#xA;B: polar 18.75, 38°&#xD;&#xA;C: polar 18.75, 20°&#xD;&#xA;D: polar 18.75, 2°" ActionType="NamedCallback" Description="冰相对自身：3（单逆）" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_rel冰dir8}" ExpressionTypeL="String" ExpressionR="3" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2DD冰is双逆]}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="10" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: dir2rad(0${v:U7a2_滑冰_冰dir8}, 8)&#xD;&#xA;A: polar 16, -20°&#xD;&#xA;B: polar 16, -52°&#xD;&#xA;C: polar 16, -84°&#xD;&#xA;D: polar 16, -116°" ActionType="NamedCallback" Description="冰相对自身：4" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_rel冰dir8}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="11" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: dir2rad(0${v:U7a2_滑冰_冰dir8}, 8)&#xD;&#xA;A: polar 18, -45°&#xD;&#xA;B: polar 18, -70°&#xD;&#xA;C: polar 18, -95°&#xD;&#xA;D: polar 18, -120°" ActionType="NamedCallback" Description="冰相对自身：5" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_rel冰dir8}" ExpressionTypeL="String" ExpressionR="5" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="12" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: dir2rad(0${v:U7a2_滑冰_冰dir8}, 8)&#xD;&#xA;A: polar 18.75, -90°&#xD;&#xA;B: polar 18.75, -110°&#xD;&#xA;C: polar 18.75, -130°&#xD;&#xA;D: polar 18.75, -150°" ActionType="NamedCallback" Description="冰相对自身：6" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_rel冰dir8}" ExpressionTypeL="String" ExpressionR="6" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="13" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: dir2rad(0${v:U7a2_滑冰_冰dir8}, 8)&#xD;&#xA;A: polar 18.75, -135°&#xD;&#xA;B: polar 18.75, -110°&#xD;&#xA;C: polar 18.75, -85°&#xD;&#xA;D: polar 18.75, -60°" ActionType="NamedCallback" Description="冰相对自身：7（双逆）" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_rel冰dir8}" ExpressionTypeL="String" ExpressionR="7" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2DD冰is双逆]}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="14" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: dir2rad(0${v:U7a2_滑冰_冰dir8}, 8)&#xD;&#xA;A: polar 18.75, -135°&#xD;&#xA;B: polar 18.75, -115°&#xD;&#xA;C: polar 18.75, -95°&#xD;&#xA;D: polar 18.75, -75°" ActionType="NamedCallback" Description="冰相对自身：7（单逆）" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_rel冰dir8}" ExpressionTypeL="String" ExpressionR="7" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2DD冰is双逆]}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="15" UseTTSTextExpression="${?d: &#xD;&#xA;  0 = 快跑,&#xD;&#xA;  1 = &quot;&quot;,&#xD;&#xA;  2 = &quot;&quot;,&#xD;&#xA;  3 = &quot;&quot;,&#xD;&#xA;  4 = 快跑,&#xD;&#xA;  5 = &quot;&quot;,&#xD;&#xA;  6 = &quot;&quot;,&#xD;&#xA;  7 = &quot;&quot;&#xD;&#xA;  [${v:U7a2_滑冰_rel冰dir8}]&#xD;&#xA;}" ActionType="UseTTS" ExecutionDelayExpression="2500" />
<Action OrderNumber="16" UseTTSTextExpression="${?d: &#xD;&#xA;  0 = 去 Boss 对面,&#xD;&#xA;  1 = 去 Boss 对面,&#xD;&#xA;  2 = 站在原地,&#xD;&#xA;  3 = ${if: ${pd:U7a_cfg[P2DD冰is双逆]} ? 去 Boss 身后 : 站在原地 }&#xD;&#xA;  4 = 去 Boss 身后,&#xD;&#xA;  5 = 去 Boss 身后,&#xD;&#xA;  6 = 去 Boss 身后,&#xD;&#xA;  7 = ${if: ${pd:U7a_cfg[P2DD冰is双逆]} ? 去 Boss 对面 : 站在原地 }&#xD;&#xA;  [0${v:U7a2_滑冰_rel冰dir8}]&#xD;&#xA;}" ActionType="UseTTS" ExecutionDelayExpression="5000" />
<Action OrderNumber="17" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Arc&#xD;&#xA;O: 100, 100, -1&#xD;&#xA;R: 18&#xD;&#xA;θ: dir2rad(0${v:U7a2_滑冰_冰dir8}, 8)&#xD;&#xA;dθ: 34.94°&#xD;&#xA;Waymarks: A132B&#xD;&#xA;---&#xD;&#xA;Action: Arc&#xD;&#xA;O: 100, 100, -1.5&#xD;&#xA;R: 14&#xD;&#xA;θ: dir2rad(0${v:U7a2_滑冰_冰dir8}, 8)&#xD;&#xA;dθ: 17.06°&#xD;&#xA;Waymarks: C4D" ActionType="NamedCallback" Description="标点：身后范围" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_rel冰dir8}" ExpressionTypeL="String" ExpressionR="[456]" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Action>
<Action OrderNumber="18" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, -1&#xD;&#xA;θ: dir2rad(0${v:U7a2_滑冰_冰dir8}, 8)&#xD;&#xA;A: -18.33, 3.87&#xD;&#xA;B: -13.85, 7.93&#xD;&#xA;1: -8.75, 11.22&#xD;&#xA;2: -3.00, 13.09&#xD;&#xA;3:  3.00, 13.09&#xD;&#xA;4:  8.75, 11.22&#xD;&#xA;C:  13.85, 7.93&#xD;&#xA;D:  18.33, 3.87" ActionType="NamedCallback" Description="标点：对侧范围" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_rel冰dir8}" ExpressionTypeL="String" ExpressionR="[01237]" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Action>
<Action OrderNumber="19" NamedCallbackName="Channeling" NamedCallbackParam="${_me.address}, ${_entity[${v:U7a2_滑冰_光id}].address}, chn_m0834_2c, 5" ActionType="NamedCallback" DescTextColor="26f">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2背对连线on]}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="20" ActionType="UseTTS" Description="↓ 好像有问题" DescBgColor="fdd" DescriptionOverride="True" />
<Action OrderNumber="21" UseTTSTextExpression="${if: abs(relθ( θ(100, 100, ${_me.x}, ${_me.y}), dir2rad(${v:U7a2_滑冰_光dir8} + (${v:U7a2_滑冰_rel冰dir8} = 7 ? -1 : 1), 8) )) &lt; π/4 ? 看向场中 : 看向场外 }" ActionType="UseTTS" ExecutionDelayExpression="2000" />
<Action OrderNumber="22" UseTTSTextExpression="停止移动" ActionType="UseTTS" ExecutionDelayExpression="2000" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="分摊判定提示音" Id="7d7ea302-26ae-40d2-9faf-6e4ce690b4b9" RegularExpression="^.{15}\S+ 16:4.{7}:[^:]*:9D11:[^:]*:(?&lt;tid&gt;1.{7})" PrevActionsRefire="Deny" PeriodRefire="Deny" RefirePeriodExpression="500">
<Actions>
<Action OrderNumber="1" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="O1. 滑冰循环计算" Id="87084375-1132-4b93-9d57-4dc404dbcc0d" RegularExpression="^.{15}\S+ 108:4.{7}:9CF9:|^U7a2_滑冰_Solve">
<Actions>
<Action OrderNumber="1" NamedCallbackName="U7a2_IceSkatingSolver" NamedCallbackParam="Init" ActionType="NamedCallback" Description="标点：希瓦头顶 1234">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${f:startwith(U7a):${_event}}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="2" VariableOp="SetString" VariableName="U7a2_滑冰_loop" VariableExpression="1" ActionType="Variable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${f:startwith(U7a):${_event}}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" NamedCallbackName="U7a2_IceSkatingSolver" NamedCallbackParam="Solve" ActionType="NamedCallback" Description="标点：希瓦头顶 1234" />
<Action OrderNumber="4" TextAuraEffect="Bold" TextAuraFontSize="39.75" TextAuraForeground="${?d: &#xD;&#xA;  Center = e44, &#xD;&#xA;  Back = 4ea,&#xD;&#xA;  Front = 4e9,&#xD;&#xA;  Side = fc3&#xD;&#xA;  [${v:U7a2_滑冰_PositionState}]&#xD;&#xA;}" TextAuraOutline="000" TextAuraName="U7a2_滑冰_State" TextAuraExpression="${?d: &#xD;&#xA;  Center = &quot;当前位于场中⏎无法滑冰&quot;, &#xD;&#xA;  Back = 当前位于 Boss 背后,&#xD;&#xA;  Front = 当前位于 Boss 对面,&#xD;&#xA;  Side = &quot;当前位于 Boss 侧面⏎需先滑到对侧&quot;&#xD;&#xA;  [${v:U7a2_滑冰_PositionState}]&#xD;&#xA;}" TextAuraXIniExpression="${_screenwidth} / 3" TextAuraYIniExpression="${_screenheight} / 2" TextAuraWIniExpression="${_screenwidth} / 3" TextAuraHIniExpression="${_screenheight} / 4" TextAuraOIniExpression="100" TextAuraFontName="微软雅黑" ActionType="TextAura" />
<Action OrderNumber="5" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#xD;&#xA;O: ${_me.x}, ${_me.y}, 0&#xD;&#xA;θ: ${v:U7a2_滑冰_Safestθ}&#xD;&#xA;Start: 0, -2, -2&#xD;&#xA;End: 0, -32&#xD;&#xA;Waymarks: AB1234CD" ActionType="NamedCallback" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_PositionState}" ExpressionTypeL="String" ExpressionR="Front" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, -1&#xD;&#xA;θ: dir2rad(0${v:U7a2_滑冰_冰dir8}, 8)&#xD;&#xA;A: -18.33, 3.87&#xD;&#xA;B: -13.85, 7.93&#xD;&#xA;1: -8.75, 11.22&#xD;&#xA;2: -3.00, 13.09&#xD;&#xA;3:  3.00, 13.09&#xD;&#xA;4:  8.75, 11.22&#xD;&#xA;C:  13.85, 7.93&#xD;&#xA;D:  18.33, 3.87" ActionType="NamedCallback" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_PositionState}" ExpressionTypeL="String" ExpressionR="Side" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_PositionState}" ExpressionTypeL="String" ExpressionR="Center" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_PositionState}" ExpressionTypeL="String" ExpressionR="Back" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="7" LogMessageText="U7a2_滑冰_Solve" LogProcess="True" ActionType="LogMessage" ExecutionDelayExpression="100">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:U7a2_滑冰_loop}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="8" TextAuraOp="DeactivateAura" TextAuraEffect="Bold" TextAuraFontSize="39.75" TextAuraName="U7a2_滑冰_State" TextAuraFontName="微软雅黑" ActionType="TextAura">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:U7a2_滑冰_loop}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O2. 双剑技" Id="cc1b3460-7d3d-400e-8b6d-e2171a7aa540" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9D0(?&lt;type&gt;[12]):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${if: ${type} == 1 ? 留在后面 : 滑到前面 }" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_PositionState}" ExpressionTypeL="String" ExpressionR="Back" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="2" UseTTSTextExpression="${if: ${type} == 1 ? 滑到后面 : 留在前面 }" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_PositionState}" ExpressionTypeL="String" ExpressionR="Front" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="3" UseTTSTextExpression="${if: ${type} == 1 ? 先去后面 : 先去前面 }" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_PositionState}" ExpressionTypeL="String" ExpressionR="Back" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
<ConditionSingle Enabled="true" ExpressionL="${v:U7a2_滑冰_PositionState}" ExpressionTypeL="String" ExpressionR="Front" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="4" UseTTSTextExpression="穿" ActionType="UseTTS" ExecutionDelayExpression="${type} == 1 ? 3000 : 2500" />
<Action OrderNumber="5" VariableOp="SetString" VariableName="U7a2_滑冰_loop" VariableExpression="1" ActionType="Variable" ExecutionDelayExpression="${type} == 1 ? 2500 : 3000" />
<Action OrderNumber="6" VariableName="U7a2_滑冰_loop" ActionType="Variable" />
<Action OrderNumber="7" NamedCallbackName="AdvWm" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="500" DescBgColor="dff" />
<Action OrderNumber="8" VariableName="U7a2_滑冰_loop" ActionType="Variable" />
<Action OrderNumber="9" TextAuraOp="DeactivateAura" TextAuraEffect="Bold" TextAuraFontSize="39.75" TextAuraName="U7a2_滑冰_State" TextAuraFontName="微软雅黑" ActionType="TextAura" />
<Action OrderNumber="10" UseTTSTextExpression="分摊激光" ActionType="UseTTS" ExecutionDelayExpression="1000" />
<Action OrderNumber="11" NamedCallbackName="AdvWm" NamedCallbackParam="load" ActionType="NamedCallback" DescBgColor="dff" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="f7d064ca-abe3-429f-8009-1848b6104e2d" Name="杂项" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Sequential="True" Name="分散分摊" Id="84856b66-aa4d-47e9-b968-95ea19fb4a0b" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9D1(?&lt;type&gt;C|D):">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="_tmp_is低层数" VariableExpression="${v:U7a_phase} == P2光暴 &amp;&amp; 0${d:U7a2_光暴_初始光[${_me.id}]} + 0${l:U7a2_光暴_环_pIdx.contain(${v:myIdx})} &lt;= 1" ActionType="Variable" />
<Action OrderNumber="2" UseTTSTextExpression="${if: ${type} == C ? 两人分摊 : 全体分散 }" ActionType="UseTTS" ExecutionDelayExpression="${v:_tmp_is低层数} ? 1900 : 0" />
<Action OrderNumber="3" VariableName="_tmp_is低层数" ActionType="Variable" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="e27d6ab3-dfb2-4740-ab0c-bae864cccd74" Name="D. 光之暴走" Enabled="true" RawEnvironmentVariables="phase = P2光暴">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="光圈/塔判定" Id="1253384d-4091-4c06-85a3-6a36a3e78719" RegularExpression="^.{15}\S+ 1[56]:4.{7}:[^:]*:9D1[A5]:[^:]*:(?&lt;tid&gt;1.{7})" PrevActionsRefire="Deny" PeriodRefire="Deny" RefirePeriodExpression="500">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="phase" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or" />
</Action>
<Action OrderNumber="2" SystemBeepLengthExpression="200" />
</Actions>
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
<ConditionSingle Enabled="true" ExpressionL="${v:U7a_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="O1.2 有连线" Id="9b09ff69-4059-4b72-965a-c23e43379356" RegularExpression="^U7a2_光暴:(?&lt;index&gt;\d{6})">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${f:pick(${v:U7a2_光暴_myDir6}): 上北, 左上, 左下, 下南, 右下, 右上}踩塔" ActionType="UseTTS" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="clear&#xD;&#xA;---&#xD;&#xA;Action: Linear&#xD;&#xA;θ: dir2rad(${v:U7a2_光暴_myDir6}, 6)&#xD;&#xA;O: 100, 100&#xD;&#xA;Start: 0, 0&#xD;&#xA;End: 0, -10&#xD;&#xA;Waymarks: ${f:substring(0, 5):${f:replace(${?d: 0=A, 1=1, 2=4, 3=C, 4=3, 5=2 [${v:U7a2_光暴_myDir6}]}, &quot;&quot;):4321DCBA}}&#xD;&#xA;---&#xD;&#xA;θ: dir2rad(${v:U7a2_光暴_myDir6}, 6)&#xD;&#xA;O: 100, 100&#xD;&#xA;${?d: 0=A, 1=1, 2=4, 3=C, 4=3, 5=2 [${v:U7a2_光暴_myDir6}]}: 0, -16&#xD;&#xA;" ActionType="NamedCallback" DescBgColor="dff" />
<Action OrderNumber="3" ActionType="Placeholder" ExecutionDelayExpression="10300" />
<Action OrderNumber="4" UseTTSTextExpression="${if: ${v:U7a2_光暴_myDir6} &lt; 3 ? 左西 : 右东 }集合" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="灰九" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#xD;&#xA;θ: ${v:U7a2_光暴_myDir6} &gt;= 3 ? π/2 : -π/2&#xD;&#xA;O: 100, 100&#xD;&#xA;Start: 0, 0&#xD;&#xA;End: 0, -18.75&#xD;&#xA;Waymarks: 4321DCBA&#xD;&#xA;" ActionType="NamedCallback" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="灰九" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" UseTTSTextExpression="${if: ${v:U7a2_光暴_myDir6} % 5 &lt; 2 ? 右上 : 左下 }集合" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="^翻" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Action>
<Action OrderNumber="7" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#xD;&#xA;θ: ${v:U7a2_光暴_myDir6} % 5 &gt;= 2 ? -π/6 : 5 * π/6&#xD;&#xA;O: 100, 100&#xD;&#xA;Start: 0, 0&#xD;&#xA;End: 0, -18.75&#xD;&#xA;Waymarks: 4321DCBA&#xD;&#xA;" ActionType="NamedCallback" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="^翻" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="U7a2_光暴_dir6_pIdx" ExpressionTypeL="String" ExpressionR="${v:myIdx}" ExpressionTypeR="String" ConditionType="ListContains" />
</Condition>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="O1.1 无连线" Id="8b256022-48da-4479-ab1e-cb117edcb257" RegularExpression="^U7a2_光暴:(?&lt;index&gt;\d{6})">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="两侧放大圈" ActionType="UseTTS" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="U7a2_光暴_无_pIdx" ExpressionTypeL="String" ExpressionR="${v:myIdx}" ExpressionTypeR="String" ConditionType="ListContains" />
</Condition>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="O1.3 文字播报" Id="e7641643-4689-49a2-b5f7-cb3372983cb4" RegularExpression="^U7a2_光暴:(?&lt;index&gt;\d{6})">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="转换为最终踩塔 dir6 顺序的六人职位描述（用于输出文本）" DescriptionOverride="True" />
<Action OrderNumber="2" ListVariableOp="Copy" ListVariableName="U7a2_光暴_环_pIdx" ListVariableTarget="U7a2_光暴_环_role" Enabled="False" ActionType="ListVariable" />
<Action OrderNumber="3" ListVariableOp="SetAll" ListVariableName="U7a2_光暴_环_role" ListVariableExpression="${?d: 1=ＭＴ, 2=ＳＴ, 3=Ｈ１, 4=Ｈ２, 5=Ｄ１, 6=Ｄ２, 7=Ｄ３, 8=Ｄ４ [${_this}]}" Enabled="False" ActionType="ListVariable" />
<Action OrderNumber="4" ListVariableOp="Copy" ListVariableName="U7a2_光暴_dir6_pIdx" ListVariableTarget="U7a2_光暴_dir6_role" ActionType="ListVariable" />
<Action OrderNumber="5" ListVariableOp="SetAll" ListVariableName="U7a2_光暴_dir6_role" ListVariableExpression="${?d: 1=ＭＴ, 2=ＳＴ, 3=Ｈ１, 4=Ｈ２, 5=Ｄ１, 6=Ｄ２, 7=Ｄ３, 8=Ｄ４ [${_this}]}" ActionType="ListVariable" />
<Action OrderNumber="6" ListVariableOp="SetAll" ListVariableName="U7a2_光暴_点名描述" ListVariableExpression="${?d: 0 = 无, 1 = &quot;&quot;, 2 = &quot;&quot;, 3 = &quot;&quot;, 4 = &quot;&quot;, 5 = &quot;&quot;, 6 = &quot;&quot; [${l:U7a2_光暴_dir6_pIdx.indexof(${_idx})}]}" ListVariableIndex="8" ActionType="ListVariable" />
<Action OrderNumber="7" NamedCallbackName="command" NamedCallbackParam="/${pd:U7a_cfg[debugChannel]} [Debug] P2 光暴&#xD;&#xA;環：&#xD;&#xA;  prio: ${l:U7a2_光暴_环_prio.join(&quot;&quot;)}&#xD;&#xA;  pIdx: ${l:U7a2_光暴_环_pIdx.join(&quot;&quot;)}&#xD;&#xA;dir6：&#xD;&#xA;  pIdx: ${l:U7a2_光暴_dir6_pIdx.join(&quot;&quot;)}&#xD;&#xA;  role: ${l:U7a2_光暴_dir6_role.join(&quot;&quot;)}" ActionType="NamedCallback" DescBgColor="fdd" />
<Action OrderNumber="8" NamedCallbackName="command" NamedCallbackParam="/${pd:U7a_cfg[publicChannel]} &#xD;&#xA;ＭＴ 》 ${l:U7a2_光暴_点名描述[1]}  ｜ 　　　  　${l:U7a2_光暴_dir6_role[1]}&#xD;&#xA;ＳＴ 》 ${l:U7a2_光暴_点名描述[2]}  ｜ 　　　　　&#xD;&#xA;Ｈ１ 》 ${l:U7a2_光暴_点名描述[3]}  ｜ ${l:U7a2_光暴_dir6_role[2]} 　  　　　 ${l:U7a2_光暴_dir6_role[6]}&#xD;&#xA;Ｈ２ 》 ${l:U7a2_光暴_点名描述[4]}  ｜ &#xD;&#xA;Ｄ１ 》 ${l:U7a2_光暴_点名描述[5]}  ｜ &#xD;&#xA;Ｄ２ 》 ${l:U7a2_光暴_点名描述[6]}  ｜ ${l:U7a2_光暴_dir6_role[3]} 　　  　　 ${l:U7a2_光暴_dir6_role[5]}&#xD;&#xA;Ｄ３ 》 ${l:U7a2_光暴_点名描述[7]}  ｜ 　　　　　&#xD;&#xA;Ｄ４ 》 ${l:U7a2_光暴_点名描述[8]}  ｜ 　　　  　${l:U7a2_光暴_dir6_role[4]}" ActionType="NamedCallback" />
</Actions>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="O1.4 小队标点" Id="fd06ec66-704d-44c1-912a-68140fcddb45" RegularExpression="^U7a2_光暴:(?&lt;index&gt;\d{6})">
<Actions>
<Action OrderNumber="1" NamedCallbackName="mark" NamedCallbackParam="{&#xD;&#xA;    &quot;ActorID&quot;: 0x${l:party[${l:U7a2_光暴_dir6_pIdx[1]}]},&#xD;&#xA;    &quot;MarkType&quot;: &quot;bind1&quot;,  &#xD;&#xA;    &quot;LocalOnly&quot;: false &#xD;&#xA;}" ActionType="NamedCallback" />
<Action OrderNumber="2" NamedCallbackName="mark" NamedCallbackParam="{&#xD;&#xA;    &quot;ActorID&quot;: 0x${l:party[${l:U7a2_光暴_dir6_pIdx[2]}]},&#xD;&#xA;    &quot;MarkType&quot;: &quot;attack1&quot;,&#xD;&#xA;    &quot;LocalOnly&quot;: false &#xD;&#xA;}" ActionType="NamedCallback" />
<Action OrderNumber="3" NamedCallbackName="mark" NamedCallbackParam="{&#xD;&#xA;    &quot;ActorID&quot;: 0x${l:party[${l:U7a2_光暴_dir6_pIdx[3]}]},&#xD;&#xA;    &quot;MarkType&quot;: &quot;attack4&quot;,&#xD;&#xA;    &quot;LocalOnly&quot;: false &#xD;&#xA;}" ActionType="NamedCallback" />
<Action OrderNumber="4" NamedCallbackName="mark" NamedCallbackParam="{&#xD;&#xA;    &quot;ActorID&quot;: 0x${l:party[${l:U7a2_光暴_dir6_pIdx[4]}]},&#xD;&#xA;    &quot;MarkType&quot;: &quot;bind2&quot;,  &#xD;&#xA;    &quot;LocalOnly&quot;: false &#xD;&#xA;}" ActionType="NamedCallback" />
<Action OrderNumber="5" NamedCallbackName="mark" NamedCallbackParam="{&#xD;&#xA;    &quot;ActorID&quot;: 0x${l:party[${l:U7a2_光暴_dir6_pIdx[5]}]},&#xD;&#xA;    &quot;MarkType&quot;: &quot;attack3&quot;,&#xD;&#xA;    &quot;LocalOnly&quot;: false &#xD;&#xA;}" ActionType="NamedCallback" />
<Action OrderNumber="6" NamedCallbackName="mark" NamedCallbackParam="{&#xD;&#xA;    &quot;ActorID&quot;: 0x${l:party[${l:U7a2_光暴_dir6_pIdx[6]}]},&#xD;&#xA;    &quot;MarkType&quot;: &quot;attack2&quot;,&#xD;&#xA;    &quot;LocalOnly&quot;: false &#xD;&#xA;}" ActionType="NamedCallback" />
<Action OrderNumber="7" ActionType="Placeholder" ExecutionDelayExpression="10000" />
<Action OrderNumber="8" NamedCallbackName="queue" NamedCallbackParam="[&#xD;&#xA;  { &quot;c&quot;: &quot;command&quot;, &quot;p&quot;: &quot;/mk attack1 &lt;attack1&gt;&quot;},&#xD;&#xA;  { &quot;c&quot;: &quot;command&quot;, &quot;p&quot;: &quot;/mk attack2 &lt;attack2&gt;&quot;},&#xD;&#xA;  { &quot;c&quot;: &quot;command&quot;, &quot;p&quot;: &quot;/mk attack3 &lt;attack3&gt;&quot;},&#xD;&#xA;  { &quot;c&quot;: &quot;command&quot;, &quot;p&quot;: &quot;/mk attack4 &lt;attack4&gt;&quot;},&#xD;&#xA;  { &quot;c&quot;: &quot;command&quot;, &quot;p&quot;: &quot;/mk bind1   &lt;bind1&gt;  &quot;},&#xD;&#xA;  { &quot;c&quot;: &quot;command&quot;, &quot;p&quot;: &quot;/mk bind2   &lt;bind2&gt;  &quot;},&#xD;&#xA;]" ActionType="NamedCallback" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴标点mode]}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="O2. 光球 + 后续" Id="945205aa-aaf2-41c9-ad71-c00300acb3b1" RegularExpression="^.{15}\S+ 107:4.{7}:9D1B:(?&lt;x&gt;(99|100)[^:]+):(?&lt;y&gt;[^:]+):(?&lt;z&gt;[^:]+):(?&lt;h&gt;[^:]+)" PrevActionsRefire="Deny" PeriodRefire="Deny" RefirePeriodExpression="5000">
<Actions>
<Action OrderNumber="1" LogMessageText="cd4:4.7" LogProcess="True" ActionType="LogMessage" Asynchronous="False" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#xD;&#xA;O: 100, 100&#xD;&#xA;Start: 0, 0&#xD;&#xA;End: (${_me.x} &gt; 100 ? 18.45 : -18.45), (${y} &gt; 100 ? 3.34 : -3.34)&#xD;&#xA;Waymarks: 4321DCBA&#xD;&#xA;" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="灰九" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#xD;&#xA;O: 100, 100&#xD;&#xA;θ: π/3&#xD;&#xA;Start: 0, 0&#xD;&#xA;End: (projectdistance(100, 100, -π/6, ${_me.XY}) &gt; 0 ? 18.45 : -18.45), (${y} &gt; 100 ? 3.34 : -3.34)&#xD;&#xA;Waymarks: 4321DCBA&#xD;&#xA;" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="^翻" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Action>
<Action OrderNumber="4" ActionType="Placeholder" Asynchronous="False" Description="重复一次以免前一次判定时有人没跑到正确半场" DescriptionOverride="True" />
<Action OrderNumber="5" ActionType="Placeholder" ExecutionDelayExpression="2000" Asynchronous="False" />
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#xD;&#xA;O: 100, 100&#xD;&#xA;Start: 0, 0&#xD;&#xA;End: (${_me.x} &gt; 100 ? 18.45 : -18.45), (${y} &gt; 100 ? 3.34 : -3.34)&#xD;&#xA;Waymarks: 4321DCBA&#xD;&#xA;" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="灰九" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="7" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#xD;&#xA;O: 100, 100&#xD;&#xA;θ: π/3&#xD;&#xA;Start: 0, 0&#xD;&#xA;End: (projectdistance(100, 100, -π/6, ${_me.XY}) &gt; 0 ? 18.45 : -18.45), (${y} &gt; 100 ? 3.34 : -3.34)&#xD;&#xA;Waymarks: 4321DCBA&#xD;&#xA;" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P2光暴]}" ExpressionTypeL="String" ExpressionR="^翻" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Action>
<Action OrderNumber="8" UseTTSTextExpression="别动" ActionType="UseTTS" ExecutionDelayExpression="700" Asynchronous="False" />
<Action OrderNumber="9" ActionType="Placeholder" ExecutionDelayExpression="2000" Asynchronous="False" />
<Action OrderNumber="10" VariableOp="SetNumeric" VariableName="tmp_is低层数" VariableExpression="${d:U7a2_光暴_初始光[${_me.id}]} + ${l:U7a2_光暴_环_pIdx.contain(${v:myIdx})} &lt;= 1" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="11" UseTTSTextExpression="穿，${if: ${v:tmp_is低层数} ? 回场中踩塔 : 塔外八方站位 }" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="12" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Circle&#xD;&#xA;Waymarks: A1D4C3B2&#xD;&#xA;R: ${v:tmp_is低层数} ? 4 : 8&#xD;&#xA;O: 100, 100" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="13" VariableName="tmp_is低层数" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="14" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Circle&#xD;&#xA;Waymarks: A1D4C3B2&#xD;&#xA;R: 8&#xD;&#xA;O: 100, 100" ActionType="NamedCallback" ExecutionDelayExpression="6900" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="15" UseTTSTextExpression="八方分散" ActionType="UseTTS" ExecutionDelayExpression="4000" Asynchronous="False" />
<Action OrderNumber="16" UseTTSTextExpression="AoE，靠近场中" ActionType="UseTTS" ExecutionDelayExpression="18000" Asynchronous="False" />
</Actions>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers />
</Folder>
<Folder Id="a2f65a6d-1bb5-4bf0-8e3d-267d9ee01898" Name="P3" Enabled="true">
<Folders>
<Folder Id="487fc14f-e44b-4ee3-800f-755513bf022c" Name="B. 二运" Enabled="true" RawEnvironmentVariables="phase = P3二运">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="O2.1 时间轴" Id="a1fc70f0-1a5a-407f-a420-bf65320c4fff" RegularExpression="^U7a3_二运_地火:is顺:(?&lt;is顺&gt;[01]):dir8:(?&lt;dir8&gt;.):1组dir8:(?&lt;g1_3&gt;[0-7]):(?&lt;g1_2&gt;[0-7]):2组dir8:(?&lt;g2_3&gt;[0-7]):(?&lt;g2_2&gt;[0-7])">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="3 地火日志 | 10 分摊 | 13 跳 | 23 分散 | 29 分摊 | 32 跳 | 34 击退" DescriptionOverride="True" />
<Action OrderNumber="2" NamedCallbackName="command" NamedCallbackParam="/${pd:U7a_cfg[publicChannel]} &#xD;&#xA;1 ${if: ${_ffxivisglobal} ? 組 : 组 }：${f:pick(${g1_3}): A, 1, D, 4, C, 3, B, 2} 偏 ${f:pick(${g1_2}): A, 1, D, 4, C, 3, B, 2} （${f:pick(${g1_3}): 上, 左上, 左, 左下, 下, 右下, 右, 右上} 偏 ${f:pick(${g1_2}): 上, 左上, 左, 左下, 下, 右下, 右, 右上}）&#xD;&#xA;2 ${if: ${_ffxivisglobal} ? 組 : 组 }：${f:pick(${g2_3}): A, 1, D, 4, C, 3, B, 2} 偏 ${f:pick(${g2_2}): A, 1, D, 4, C, 3, B, 2} （${f:pick(${g2_3}): 上, 左上, 左, 左下, 下, 右下, 右, 右上} 偏 ${f:pick(${g2_2}): 上, 左上, 左, 左下, 下, 右下, 右, 右上}）" ActionType="NamedCallback" />
<Action OrderNumber="3" UseTTSTextExpression="分散站位" ActionType="UseTTS" ExecutionDelayExpression="6800" />
<Action OrderNumber="4" SystemBeepLengthExpression="200" ExecutionDelayExpression="200" />
<Action OrderNumber="5" ActionType="Placeholder" ExecutionDelayExpression="2000" />
<Action OrderNumber="6" UseTTSTextExpression="${f:pick(${n: ${v:U7a3_二运_my散isG1} ? ${g1_3} : ${g2_3} }): 上北A点, 左上壹点, 左西D点, 左下肆点, 下南C点, 右下叁点, 右东B点, 右上贰点}方向分散" ActionType="UseTTS" />
<Action OrderNumber="7" ActionType="Placeholder" Description="标点：用非安全点的四个点标在外面，安全点对应的四个点仅微调半径指示方向" DescriptionOverride="True" />
<Action OrderNumber="8" ListVariableOp="Build" ListVariableExpression=",A,1,D,4,C,3,B,2" ListVariableTarget="tmp_危险点" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="9" VariableOp="SetString" VariableName="tmp_安全点" VariableExpression="${f:pick(${g1_3}): A, 1, D, 4, C, 3, B, 2}${f:pick(${g1_2}): A, 1, D, 4, C, 3, B, 2}${f:pick(${g2_3}): A, 1, D, 4, C, 3, B, 2}${f:pick(${g2_2}): A, 1, D, 4, C, 3, B, 2}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="10" ListVariableOp="Filter" ListVariableExpressionType="Numeric" ListVariableName="tmp_危险点" ListVariableExpression="!${f:contain(${_this}):${v:tmp_安全点}}" ListVariableTarget="tmp_危险点" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="11" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Circle&#xD;&#xA;O: 100, 100&#xD;&#xA;R: 10.25&#xD;&#xA;Waymarks: A1D4C3B2&#xD;&#xA;---&#xD;&#xA;O: 100, 100&#xD;&#xA;θ: dir2rad(0${g1_3}, 8)&#xD;&#xA;${l:tmp_危险点[1]}:  3.5, -17.5&#xD;&#xA;${l:tmp_危险点[2]}: -3.5, -17.5&#xD;&#xA;${l:tmp_危险点[3]}: -3.5,  17.5&#xD;&#xA;${l:tmp_危险点[4]}:  3.5,  17.5" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="12" VariableName="tmp_安全点" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="13" ListVariableName="tmp_危险点" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="14" ActionType="Placeholder" ExecutionDelayExpression="16800" />
<Action OrderNumber="15" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#xD;&#xA;O: 100, 100&#xD;&#xA;θ: dir2rad(0${g1_2}, 8)&#xD;&#xA;Start: 0, -18.5&#xD;&#xA;End:   0,  18.5&#xD;&#xA;Waymarks: DCBA______1234" ActionType="NamedCallback" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="NumericLessEqual" />
</Condition>
</Action>
<Action OrderNumber="16" ActionType="Placeholder" ExecutionDelayExpression="2600" />
<Action OrderNumber="17" UseTTSTextExpression="击退，${if: ${v:U7a3_二运_my摊isG1} ? 左 : 右 }侧分摊" ActionType="UseTTS" />
<Action OrderNumber="18" ActionType="Placeholder" ExecutionDelayExpression="4000" />
<Action OrderNumber="19" NamedCallbackName="AdvWm" NamedCallbackParam="load" ActionType="NamedCallback" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O2.2 时间轴（地火回中）" Id="49927c7b-8408-41d0-9c4a-c4abf48d4084" RegularExpression="^U7a3_二运_地火">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" ExecutionDelayExpression="${v:myIdx} % 4 = 2 ? 19500 : 20000" />
<Action OrderNumber="2" />
<Action OrderNumber="3" UseTTSTextExpression="场中分摊" UseTTSExclusive="False" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运]}" ExpressionTypeL="String" ExpressionR="^单" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Action>
<Action OrderNumber="4" UseTTSTextExpression="场中分摊，${if: ${v:U7a3_二运_my散isG1} = ${v:U7a3_二运_my摊isG1} ? 留在同侧 : 换到对侧 }" UseTTSExclusive="False" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运]}" ExpressionTypeL="String" ExpressionR="^双" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Action>
<Action OrderNumber="5" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Circle&#xD;&#xA;O: 100, 100&#xD;&#xA;R: 3.75&#xD;&#xA;Waymarks: A1D4C3B2" ActionType="NamedCallback" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="O1.3 初始分组 指挥标点" Id="eb44d60b-7b3a-4f11-9af2-250eab2cdb1b" RegularExpression="^U7a3_二运_分组:">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="科技 &amp;&amp; 指挥" DescriptionOverride="True" />
<Action OrderNumber="2" NamedCallbackName="mark" NamedCallbackParam="{&#xD;&#xA;    &quot;ActorID&quot;: 0x${l:party[${l:U7a3_二运_G1idx[1]}]},&#xD;&#xA;    &quot;MarkType&quot;: &quot;attack1&quot;,  &#xD;&#xA;    &quot;LocalOnly&quot;: false &#xD;&#xA;}" ActionType="NamedCallback" />
<Action OrderNumber="3" NamedCallbackName="mark" NamedCallbackParam="{&#xD;&#xA;    &quot;ActorID&quot;: 0x${l:party[${l:U7a3_二运_G1idx[2]}]},&#xD;&#xA;    &quot;MarkType&quot;: &quot;attack2&quot;,  &#xD;&#xA;    &quot;LocalOnly&quot;: false &#xD;&#xA;}" ActionType="NamedCallback" />
<Action OrderNumber="4" NamedCallbackName="mark" NamedCallbackParam="{&#xD;&#xA;    &quot;ActorID&quot;: 0x${l:party[${l:U7a3_二运_G1idx[3]}]},&#xD;&#xA;    &quot;MarkType&quot;: &quot;attack3&quot;,  &#xD;&#xA;    &quot;LocalOnly&quot;: false &#xD;&#xA;}" ActionType="NamedCallback" />
<Action OrderNumber="5" NamedCallbackName="mark" NamedCallbackParam="{&#xD;&#xA;    &quot;ActorID&quot;: 0x${l:party[${l:U7a3_二运_G1idx[4]}]},&#xD;&#xA;    &quot;MarkType&quot;: &quot;attack4&quot;,  &#xD;&#xA;    &quot;LocalOnly&quot;: false &#xD;&#xA;}" ActionType="NamedCallback" />
<Action OrderNumber="6" NamedCallbackName="mark" NamedCallbackParam="{&#xD;&#xA;    &quot;ActorID&quot;: 0x${l:party[${l:U7a3_二运_G2idx[1]}]},&#xD;&#xA;    &quot;MarkType&quot;: &quot;bind1&quot;,  &#xD;&#xA;    &quot;LocalOnly&quot;: false &#xD;&#xA;}" ActionType="NamedCallback" />
<Action OrderNumber="7" NamedCallbackName="mark" NamedCallbackParam="{&#xD;&#xA;    &quot;ActorID&quot;: 0x${l:party[${l:U7a3_二运_G2idx[2]}]},&#xD;&#xA;    &quot;MarkType&quot;: &quot;bind2&quot;,  &#xD;&#xA;    &quot;LocalOnly&quot;: false &#xD;&#xA;}" ActionType="NamedCallback" />
<Action OrderNumber="8" NamedCallbackName="mark" NamedCallbackParam="{&#xD;&#xA;    &quot;ActorID&quot;: 0x${l:party[${l:U7a3_二运_G2idx[3]}]},&#xD;&#xA;    &quot;MarkType&quot;: &quot;bind3&quot;,  &#xD;&#xA;    &quot;LocalOnly&quot;: false &#xD;&#xA;}" ActionType="NamedCallback" />
<Action OrderNumber="9" NamedCallbackName="mark" NamedCallbackParam="{&#xD;&#xA;    &quot;ActorID&quot;: 0x${l:party[${l:U7a3_二运_G2idx[4]}]},&#xD;&#xA;    &quot;MarkType&quot;: &quot;square&quot;,  &#xD;&#xA;    &quot;LocalOnly&quot;: false &#xD;&#xA;}" ActionType="NamedCallback" />
<Action OrderNumber="10" ActionType="Placeholder" ExecutionDelayExpression="39000" />
<Action OrderNumber="11" NamedCallbackName="queue" NamedCallbackParam="[&#xD;&#xA;  { &quot;c&quot;: &quot;command&quot;, &quot;p&quot;: &quot;/mk attack1 &lt;attack1&gt;&quot;},&#xD;&#xA;  { &quot;c&quot;: &quot;command&quot;, &quot;p&quot;: &quot;/mk attack2 &lt;attack2&gt;&quot;},&#xD;&#xA;  { &quot;c&quot;: &quot;command&quot;, &quot;p&quot;: &quot;/mk attack3 &lt;attack3&gt;&quot;},&#xD;&#xA;  { &quot;c&quot;: &quot;command&quot;, &quot;p&quot;: &quot;/mk attack4 &lt;attack4&gt;&quot;},&#xD;&#xA;  { &quot;c&quot;: &quot;command&quot;, &quot;p&quot;: &quot;/mk bind1   &lt;bind1&gt;  &quot;},&#xD;&#xA;  { &quot;c&quot;: &quot;command&quot;, &quot;p&quot;: &quot;/mk bind2   &lt;bind2&gt;  &quot;},&#xD;&#xA;  { &quot;c&quot;: &quot;command&quot;, &quot;p&quot;: &quot;/mk bind3   &lt;bind3&gt;  &quot;},&#xD;&#xA;  { &quot;c&quot;: &quot;command&quot;, &quot;p&quot;: &quot;/mk square  &lt;square&gt; &quot;},&#xD;&#xA;]" ActionType="NamedCallback" />
</Actions>
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运}" ExpressionTypeL="String" ExpressionR="单分科" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运isCmd}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="O1.1 初始分组 TTS" Id="e91e99ab-dbf0-41e4-b356-6faf9d2acf38" RegularExpression="^U7a3_二运_分组:isG1:(?&lt;isG1&gt;0|1)">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${if: ${isG1} ? 壹组左侧分摊 : 贰组右侧分摊 }" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="O1.2 初始分组 文本" Id="463171c4-2ff1-43bc-aba2-a6d72904d2c2" RegularExpression="^U7a3_二运_分组:">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="非科技" DescriptionOverride="True" />
<Action OrderNumber="2" ListVariableOp="SetAll" ListVariableName="tmp_roles" ListVariableExpression="${?l:ＭＴ,ＳＴ,Ｈ１,Ｈ２,Ｄ１,Ｄ２,Ｄ３,Ｄ４[${l:U7a3_二运_水idx[${_idx}]}]}" ListVariableIndex="8" ActionType="ListVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运]}" ExpressionTypeL="String" ExpressionR="科技" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="3" NamedCallbackName="command" NamedCallbackParam="/${pd:U7a_cfg[publicChannel]} &#xD;&#xA; 　　 无　　 短　　中　　長&#xD;&#xA; 左：${l:tmp_roles.join(&quot;　 &quot;, &quot;1::2&quot;)}&#xD;&#xA; 右：${l:tmp_roles.join(&quot; 　&quot;, &quot;2::2&quot;)}" ActionType="NamedCallback">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运]}" ExpressionTypeL="String" ExpressionR="科技" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="4" ListVariableName="tmp_roles" ActionType="ListVariable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运]}" ExpressionTypeL="String" ExpressionR="科技" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="5" ActionType="Placeholder" ExecutionDelayExpression="500" />
<Action OrderNumber="6" ActionType="Placeholder" Description="科技 &amp;&amp; 指挥（加延迟防止标点消息盖过文本）" DescriptionOverride="True" />
<Action OrderNumber="7" ListVariableOp="SetAll" ListVariableName="tmp_roles1" ListVariableExpression="${?l:ＭＴ,ＳＴ,Ｈ１,Ｈ２,Ｄ１,Ｄ２,Ｄ３,Ｄ４[${l:U7a3_二运_G1idx[${_idx}]}]}" ListVariableIndex="8" ActionType="ListVariable">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运]}" ExpressionTypeL="String" ExpressionR="单分科" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运isCmd]}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="8" ListVariableOp="SetAll" ListVariableName="tmp_roles2" ListVariableExpression="${?l:ＭＴ,ＳＴ,Ｈ１,Ｈ２,Ｄ１,Ｄ２,Ｄ３,Ｄ４[${l:U7a3_二运_G2idx[${_idx}]}]}" ListVariableIndex="8" ActionType="ListVariable">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运]}" ExpressionTypeL="String" ExpressionR="单分科" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运isCmd]}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="9" NamedCallbackName="command" NamedCallbackParam="/${pd:U7a_cfg[publicChannel]} &#xD;&#xA; 左：${l:tmp_roles1[1]}　${l:tmp_roles1[2]}　${l:tmp_roles1[3]}${l:tmp_roles1[4]}&#xD;&#xA; 右：${l:tmp_roles2[1]}　${l:tmp_roles2[2]}　${l:tmp_roles2[3]}${l:tmp_roles2[4]}" ActionType="NamedCallback">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运]}" ExpressionTypeL="String" ExpressionR="单分科" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运isCmd]}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="10" ListVariableName="tmp_roles1" ActionType="ListVariable">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运]}" ExpressionTypeL="String" ExpressionR="单分科" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运isCmd]}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="11" ListVariableName="tmp_roles2" ActionType="ListVariable">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运]}" ExpressionTypeL="String" ExpressionR="单分科" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3二运isCmd]}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="8309e9db-0ef7-42bc-822e-46cd384b0b6c" Name="A. 一运" Enabled="true" RawEnvironmentVariables="phase = P3一运">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="+0.  时间压缩" Id="77a333fb-dedb-4a4c-b745-aa58e1b55495" RegularExpression="^.{15}\S+ 14:(?&lt;id&gt;4.{7}):[^:]+:9D4A:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="AoE，时间压缩" ActionType="UseTTS" />
<Action OrderNumber="2" NamedCallbackName="ObjectScaling" NamedCallbackParam="${_entity[${id}].address}, 0.6" ActionType="NamedCallback" DescTextColor="26f" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O1.  初始播报" Id="2334dc79-b580-4072-966f-1039c7ef866e" RegularExpression="^U7a3_一运_self:my点名:(?&lt;my点名&gt;[0-9])">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="0 = 对侧挂机 1 = 正中心 2 = 中心偏外 3 = 沙漏下 4 = 沙漏引导 5 = 场外" DescriptionOverride="True" />
<Action OrderNumber="2" ListVariableExpressionType="Numeric" NamedCallbackName="hint" NamedCallbackParam="42&#xD;&#xA;${f:pick(0${my点名}): &#xD;&#xA;  &quot;【正下】　场外 》 灯下 》 场中 》 灯外 》 场中 》 对侧⏎　　　　　分散 　 记录 　 分摊 　 引导 　 分摊 　 挂机&quot;,&#xD;&#xA;  &quot;【正下】　场中 》 灯下 》 场中 》 灯外 》 场中 》 对侧⏎　　　　　分摊 　 记录 　 分摊 　 引导 　 分摊 　 挂机&quot;,&#xD;&#xA;  &quot;【${if: ${pd:U7a_cfg[P3一运]} == 国 ? 正左 : 正右 }】　场中 》 灯下 》 场外 》 场中 》 场中 》 灯外⏎　　　　　分摊 　 记录 　 分散 　 挂机 　 分摊 　 引导&quot;,&#xD;&#xA;  &quot;【左下】　场中 》 灯外 》 场中 》 场中 》 场外 》 对侧⏎　　　　　分摊 　 引导 　 分摊 　 记录 　 分散 　 挂机&quot;,&#xD;&#xA;  &quot;【右下】　场中 》 灯外 》 场中 》 场中 》 场外 》 对侧⏎　　　　　分摊 　 引导 　 分摊 　 记录 　 分散 　 挂机&quot;,&#xD;&#xA;  &#xD;&#xA;  &quot;【左上】　场外 》 灯下 》 场中 》 灯外 》 场中 》 对侧⏎　　　　　分散 　 记录 　 分摊 　 引导 　 分摊 　 挂机&quot;,&#xD;&#xA;  &quot;【右上】　场外 》 灯下 》 场中 》 灯外 》 场中 》 对侧⏎　　　　　分散 　 记录 　 分摊 　 引导 　 分摊 　 挂机&quot;,&#xD;&#xA;  &quot;【${if: ${pd:U7a_cfg[P3一运]} == 国 ? 正右 : 正左 }】　场中 》 场中 》 场外 》 场中 》 场中 》 灯外⏎　　　　　分摊 　 记录 　 分散 　 挂机 　 分摊 　 引导&quot;,&#xD;&#xA;  &quot;【正上】　场中 》 灯外 》 场中 》 场中 》 场外 》 对侧⏎　　　　　分摊 　 引导 　 分摊 　 记录 　 分散 　 挂机&quot;,&#xD;&#xA;  &quot;【正上】　场中 》 灯外 》 场中 》 场中 》 场中 》 对侧⏎　　　　　分摊 　 引导 　 分摊 　 记录 　 分摊 　 挂机&quot;,&#xD;&#xA;}" ActionType="NamedCallback">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_ffxivisglobal}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" ListVariableExpressionType="Numeric" NamedCallbackName="hint" NamedCallbackParam="42&#xD;&#xA;${f:pick(0${my点名}): &#xD;&#xA;  &quot;【正下】　場外 》 灯下 》 場中 》 灯外 》 場中 》 對面⏎　　　　　分散 　 記録 　 集合 　 引導 　 集合 　 挂机&quot;,&#xD;&#xA;  &quot;【正下】　場中 》 灯下 》 場中 》 灯外 》 場中 》 對面⏎　　　　　集合 　 記録 　 集合 　 引導 　 集合 　 挂机&quot;,&#xD;&#xA;  &quot;【${if: ${pd:U7a_cfg[P3一运]} == 国 ? 正左 : 正右 }】　場中 》 灯下 》 場外 》 場中 》 場中 》 灯外⏎　　　　　集合 　 記録 　 分散 　 挂机 　 集合 　 引導&quot;,&#xD;&#xA;  &quot;【左下】　場中 》 灯外 》 場中 》 場中 》 場外 》 對面⏎　　　　　集合 　 引導 　 集合 　 記録 　 分散 　 挂机&quot;,&#xD;&#xA;  &quot;【右下】　場中 》 灯外 》 場中 》 場中 》 場外 》 對面⏎　　　　　集合 　 引導 　 集合 　 記録 　 分散 　 挂机&quot;,&#xD;&#xA;  &#xD;&#xA;  &quot;【左上】　場外 》 灯下 》 場中 》 灯外 》 場中 》 對面⏎　　　　　分散 　 記録 　 集合 　 引導 　 集合 　 挂机&quot;,&#xD;&#xA;  &quot;【右上】　場外 》 灯下 》 場中 》 灯外 》 場中 》 對面⏎　　　　　分散 　 記録 　 集合 　 引導 　 集合 　 挂机&quot;,&#xD;&#xA;  &quot;【${if: ${pd:U7a_cfg[P3一运]} == 国 ? 正右 : 正左 }】　場中 》 場中 》 場外 》 場中 》 場中 》 灯外⏎　　　　　集合 　 記録 　 分散 　 挂机 　 集合 　 引導&quot;,&#xD;&#xA;  &quot;【正上】　場中 》 灯外 》 場中 》 場中 》 場外 》 對面⏎　　　　　集合 　 引導 　 集合 　 記録 　 分散 　 挂机&quot;,&#xD;&#xA;  &quot;【正上】　場中 》 灯外 》 場中 》 場中 》 場中 》 對面⏎　　　　　集合 　 引導 　 集合 　 記録 　 集合 　 挂机&quot;,&#xD;&#xA;}" ActionType="NamedCallback">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_ffxivisglobal}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" UseTTSTextExpression="准备去${f:pick(0${my点名}): &#xD;&#xA;  &quot;正下，场外分散&quot;,&#xD;&#xA;  &quot;正下，场中分摊&quot;,&#xD;&#xA;  &quot;${if: ${pd:U7a_cfg[P3一运]} == 国 ? 正左 : 正右 }，场中分摊&quot;,&#xD;&#xA;  &quot;左下，场中分摊&quot;,&#xD;&#xA;  &quot;右下，场中分摊&quot;,&#xD;&#xA;  &#xD;&#xA;  &quot;左上，场外分散&quot;,&#xD;&#xA;  &quot;右上，场外分散&quot;,&#xD;&#xA;  &quot;${if: ${pd:U7a_cfg[P3一运]} == 国 ? 正右 : 正左 }，场中分摊&quot;,&#xD;&#xA;  &quot;正上，场中分摊&quot;,&#xD;&#xA;  &quot;正上，场中分摊&quot;,&#xD;&#xA;}" ActionType="UseTTS" />
<Action OrderNumber="5" UseTTSTextExpression="${f:pick(0${my点名}): &#xD;&#xA;  &quot;场外分散&quot;,&#xD;&#xA;  &quot;场中分摊&quot;,&#xD;&#xA;  &quot;场中分摊&quot;,&#xD;&#xA;  &quot;场中分摊&quot;,&#xD;&#xA;  &quot;场中分摊&quot;,&#xD;&#xA;  &#xD;&#xA;  &quot;场外分散&quot;,&#xD;&#xA;  &quot;场外分散&quot;,&#xD;&#xA;  &quot;场中分摊&quot;,&#xD;&#xA;  &quot;场中分摊&quot;,&#xD;&#xA;  &quot;场中分摊&quot;,&#xD;&#xA;}" ActionType="UseTTS" ExecutionDelayExpression="6000" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O2.1 时间轴" Id="89f75d92-a7eb-4d88-871e-fbb11db53e3c" RegularExpression="^U7a3_一运:dir8:(?&lt;dir8&gt;[0-7]):myDir8:(?&lt;myDir8&gt;[0-7]):my点名:(?&lt;my点名&gt;[0-9]):">
<Actions>
<Action OrderNumber="1" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: dir2rad(${v:U7a3_一运_myDir8}, 8)&#xD;&#xA;1: 0, -4.0, -1&#xD;&#xA;2: 0, -6.0, -1&#xD;&#xA;3: fakeclear&#xD;&#xA;4: fakeclear" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: dir2rad(${v:U7a3_一运_myDir8}, 8)&#xD;&#xA;A: 0, -${?d: 散 = 13, 摊 = 1 [${l:U7a3_一运_自身路线[1]}]}&#xD;&#xA;B: fakeclear&#xD;&#xA;C: fakeclear&#xD;&#xA;D: fakeclear" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="3" UseTTSTextExpression="${?d: 记录外 = 沙漏下方记录, 记录内 = 中心偏外记录, 引导 = 引导激光 [${l:U7a3_一运_自身路线[2]}]}" ActionType="UseTTS" ExecutionDelayExpression="7500" Asynchronous="False" />
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: dir2rad(${v:U7a3_一运_myDir8}, 8)&#xD;&#xA;A: 0, -${?d: 记录外 = 8.5, 记录内 = 1 [${l:U7a3_一运_自身路线[2]}]}&#xD;&#xA;B: fakeclear&#xD;&#xA;C: fakeclear&#xD;&#xA;D: fakeclear" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a3_一运_自身路线[2]}" ExpressionTypeL="String" ExpressionR="引导" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="5" UseTTSTextExpression="${?d: 散 = 场外分散, 摊 = 中心分摊 [${l:U7a3_一运_自身路线[3]}]}" ActionType="UseTTS" ExecutionDelayExpression="5000" Asynchronous="False" />
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: dir2rad(${v:U7a3_一运_myDir8}, 8)&#xD;&#xA;A: 0, -${?d: 散 = 13, 摊 = 1 [${l:U7a3_一运_自身路线[3]}]}&#xD;&#xA;B: fakeclear&#xD;&#xA;C: fakeclear&#xD;&#xA;D: fakeclear" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="7" UseTTSTextExpression="${?d: 挂机 = 中心挂机, 记录内 = 中心偏外记录, 引导 = 引导激光 [${l:U7a3_一运_自身路线[4]}]}" ActionType="UseTTS" ExecutionDelayExpression="5000" Asynchronous="False" />
<Action OrderNumber="8" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: dir2rad(${v:U7a3_一运_myDir8}, 8)&#xD;&#xA;A: 0, -${?d: 挂机 = 1, 记录内 = 1 [${l:U7a3_一运_自身路线[4]}]}&#xD;&#xA;B: fakeclear&#xD;&#xA;C: fakeclear&#xD;&#xA;D: fakeclear" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a3_一运_自身路线[4]}" ExpressionTypeL="String" ExpressionR="引导" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="9" UseTTSTextExpression="${?d: 散 = 场外分散, 摊 = 中心分摊 [${l:U7a3_一运_自身路线[5]}]}" ActionType="UseTTS" ExecutionDelayExpression="5000" Asynchronous="False" />
<Action OrderNumber="10" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: dir2rad(${v:U7a3_一运_myDir8}, 8)&#xD;&#xA;A: 0, -${?d: 散 = 13, 摊 = 1 [${l:U7a3_一运_自身路线[5]}]}&#xD;&#xA;B: fakeclear&#xD;&#xA;C: fakeclear&#xD;&#xA;D: fakeclear" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="11" UseTTSTextExpression="${?d: 对侧 = 去对侧输出, 引导 = 引导激光 [${l:U7a3_一运_自身路线[6]}]}" ActionType="UseTTS" ExecutionDelayExpression="5000" Asynchronous="False" />
<Action OrderNumber="12" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: dir2rad(${v:U7a3_一运_myDir8}, 8)&#xD;&#xA;A: 0, 1&#xD;&#xA;B: 0, 3&#xD;&#xA;C: 0, 5&#xD;&#xA;D: 0, 7" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a3_一运_自身路线[6]}" ExpressionTypeL="String" ExpressionR="引导" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="13" UseTTSTextExpression="${?d: 对侧 = 注意面向, 引导 = 原地背对 [${l:U7a3_一运_自身路线[6]}]}" ActionType="UseTTS" ExecutionDelayExpression="5000" Asynchronous="False" />
<Action OrderNumber="14" NamedCallbackName="AdvWm" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="4000" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="15" UseTTSTextExpression="中心分摊" ActionType="UseTTS" ExecutionDelayExpression="3000" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O2.3 正北放置镜子" Id="0c62f1ff-98e7-47a9-82dd-3d030431a3c1" RegularExpression="^U7a3_一运:dir8:(?&lt;dir8&gt;[0-7]):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="条件：on" DescriptionOverride="True" />
<Action OrderNumber="2" NamedCallbackName="MapEffect" NamedCallbackParam="02000100:0${n: 8 - (${dir8} - 1) %% 8}" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="3" NamedCallbackName="MapEffect" NamedCallbackParam="00080004:0${n: 8 - (${dir8} - 1) %% 8}" ActionType="NamedCallback" ExecutionDelayExpression="45000" DescTextColor="26f" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3一运镜子on]}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="O3.  沙漏方向标记" Id="d9d57c38-d0d9-4474-9380-dfa80f758503" RegularExpression="^U7a3_一运_沙漏:(?&lt;id&gt;.{8}):is顺:(?&lt;is顺&gt;[01]):dir8:(?&lt;dir8&gt;[0-7])">
<Actions>
<Action OrderNumber="1" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#xD;&#xA;O: 100, 100 polar 9.5, dir2rad(${v:U7a3_一运_myDir8}, 8)&#xD;&#xA;θ: dir2rad(${v:U7a3_一运_myDir8}, 8) + (0${is顺} ? 80° : -80°)&#xD;&#xA;Waymarks: ABCD&#xD;&#xA;Start: 0,  0&#xD;&#xA;End:   0, -6" ActionType="NamedCallback" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${dir8}" ExpressionTypeL="String" ExpressionR="${v:U7a3_一运_myDir8}" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="false" Sequential="True" Name="取消身上延迟咏唱特效 （没用?" Id="cde7823e-e63b-4ee8-a8d7-74caa6f84bca" RegularExpression="^.{15}\S+ 1A:(?&lt;statusId&gt;99B):[^:]*:[^:]*:.{8}:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" NamedCallbackName="RemoveStatus" NamedCallbackParam="${_entity[${tid}].address}, 0x${statusId}" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="2" NamedCallbackName="Redraw" NamedCallbackParam="${_entity[${tid}].address}" ActionType="NamedCallback" ExecutionDelayExpression="1000" DescTextColor="26f" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="初始激光判定" Id="00247274-b6e8-4097-967c-2ce4e0d79b66" RegularExpression="^.{15}\S+ 1[56]:4.{7}:[^:]*:9D2B:[^:]*:(?&lt;tid&gt;1.{7}):([^:]*:){38}0:" PrevActionsRefire="Deny" PeriodRefire="Deny" RefirePeriodExpression="500">
<Actions>
<Action OrderNumber="1" SystemBeepLengthExpression="200" />
<Action OrderNumber="2" UseTTSTextExpression="躲开" ActionType="UseTTS" />
</Actions>
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
<ConditionSingle Enabled="true" ExpressionL="d(${_me.x}, ${_me.y}, 100, 100)" ExpressionTypeL="Numeric" ExpressionR="6" ExpressionTypeR="String" ConditionType="NumericGreaterEqual" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="O2.2 文字播报" Id="554b5720-32f6-4e0f-b75c-febc9d012bc6" RegularExpression="^U7a3_一运:dir8:(?&lt;dir8&gt;[0-7]):myDir8:(?&lt;myDir8&gt;[0-7]):my点名:(?&lt;my点名&gt;[0-9]):冰isD:(?&lt;冰isD&gt;[01]):点名:(?&lt;p1&gt;\d)(?&lt;p2&gt;\d)(?&lt;p3&gt;\d)(?&lt;p4&gt;\d)(?&lt;p5&gt;\d)(?&lt;p6&gt;\d)(?&lt;p7&gt;\d)(?&lt;p8&gt;\d)">
<Actions>
<Action OrderNumber="1" ListVariableOp="SetAll" ListVariableName="tmp_正北逆标点" ListVariableExpression="${f:slice(${n: (${_idx} - 1 + ${dir8}) % 8 }):${f:toxivchar:A1D4C3B2}}" ListVariableIndex="8" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="2" ListVariableOp="SetAll" ListVariableName="tmp_各人的方向" ListVariableExpression="${?d: 0 = 4, 1 = 4, 2 = 2, 3 = 3, 4 = 5, 5 = 1, 6 = 7, 7 = 6, 8 = 0, 9 = 0 [${p${_idx}}]}" ListVariableIndex="8" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3一运]}" ExpressionTypeL="String" ExpressionR="国" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="3" ListVariableOp="SetAll" ListVariableName="tmp_各人的方向" ListVariableExpression="${?d: 0 = 4, 1 = 4, 2 = 6, 3 = 3, 4 = 5, 5 = 1, 6 = 7, 7 = 2, 8 = 0, 9 = 0 [${p${_idx}}]}" ListVariableIndex="8" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pd:U7a_cfg[P3一运]}" ExpressionTypeL="String" ExpressionR="美" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="4" DictVariableOp="SetAll" DictVariableKeyType="Numeric" DictVariableName="tmp_各方向的人" DictVariableLength="8" DictVariableKey="${l:tmp_各人的方向[${_idx}]}" DictVariableValue="${?l: ＭＴ,ＳＴ,Ｈ１,Ｈ２,Ｄ１,Ｄ２,Ｄ３,Ｄ４ [${_idx}]}" ActionType="DictVariable" Asynchronous="False" />
<Action OrderNumber="5" ListVariableOp="SetAll" ListVariableName="tmp_每人点名描述" ListVariableExpression="${?d: &#xD;&#xA;  0 = 短火 正下, &#xD;&#xA;  1 = 冰　 正下, &#xD;&#xA;  2 = 中火 ${if: ${pd:U7a_cfg[P3一运]} == 国 ? 正左 : 正右 }, &#xD;&#xA;  3 = 长高 左下,&#xD;&#xA;  4 = 长低 右下, &#xD;&#xA;  5 = 短高 左上,&#xD;&#xA;  6 = 短低 右上,&#xD;&#xA;  7 = 中火 ${if: ${pd:U7a_cfg[P3一运]} == 国 ? 正右 : 正左 },&#xD;&#xA;  8 = 长火 正上,&#xD;&#xA;  9 = 冰　 正上&#xD;&#xA;[${p${_idx}}]} ${l:tmp_正北逆标点[${n: ${l:tmp_各人的方向[${_idx}]} + 1}]}" ListVariableIndex="8" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${f:contain(&quot; &quot;):${_me}}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" ListVariableOp="SetAll" ListVariableName="tmp_每人点名描述" ListVariableExpression="${?d: &#xD;&#xA;  0 = 短火 正下, &#xD;&#xA;  1 = 冰　 正下, &#xD;&#xA;  2 = 中火 ${if: ${pd:U7a_cfg[P3一运]} == 国 ? 正左 : 正右 }, &#xD;&#xA;  3 = 長高 左下,&#xD;&#xA;  4 = 長低 右下, &#xD;&#xA;  5 = 短高 左上,&#xD;&#xA;  6 = 短低 右上,&#xD;&#xA;  7 = 中火 ${if: ${pd:U7a_cfg[P3一运]} == 国 ? 正右 : 正左 },&#xD;&#xA;  8 = 長火 正上,&#xD;&#xA;  9 = 冰　 正上&#xD;&#xA;[${p${_idx}}]} ${l:tmp_正北逆标点[${n: ${l:tmp_各人的方向[${_idx}]} + 1}]}" ListVariableIndex="8" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${f:contain(&quot; &quot;):${_me}}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="7" NamedCallbackName="command" NamedCallbackParam="/${pd:U7a_cfg[publicChannel]} &#xD;&#xA;　　　 　　 　　 　 ｜　　　  　  ${d:tmp_各方向的人[0]}&#xD;&#xA;ＭＴ 》 ${l:tmp_每人点名描述[1]} ｜　　　　　  ${l:tmp_正北逆标点[1]}&#xD;&#xA;ＳＴ 》 ${l:tmp_每人点名描述[2]} ｜　 ${d:tmp_各方向的人[1]} ${l:tmp_正北逆标点[2]}　 ┃ 　${l:tmp_正北逆标点[8]} ${d:tmp_各方向的人[7]}&#xD;&#xA;Ｈ１ 》 ${l:tmp_每人点名描述[3]} ｜　　　　　  ┃&#xD;&#xA;Ｈ２ 》 ${l:tmp_每人点名描述[4]} ｜${d:tmp_各方向的人[2]} ${l:tmp_正北逆标点[3]} ━━ ○ ━━ ${l:tmp_正北逆标点[7]} ${d:tmp_各方向的人[6]}&#xD;&#xA;Ｄ１ 》 ${l:tmp_每人点名描述[5]} ｜　　　　 ／　  ＼&#xD;&#xA;Ｄ２ 》 ${l:tmp_每人点名描述[6]} ｜　 ${d:tmp_各方向的人[3]} ${l:tmp_正北逆标点[4]}　 　 　${l:tmp_正北逆标点[6]} ${d:tmp_各方向的人[5]}&#xD;&#xA;Ｄ３ 》 ${l:tmp_每人点名描述[7]} ｜　　　　　  ${l:tmp_正北逆标点[5]}&#xD;&#xA;Ｄ４ 》 ${l:tmp_每人点名描述[8]} ｜　　　  　  ${d:tmp_各方向的人[4]}" ActionType="NamedCallback" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="火倒计时" Id="0449e42d-8481-4720-a077-8ff7bcd8c38c" RegularExpression="^.{15}\S+ 1A:997:([^:]|: )+:(?&lt;t&gt;[^:]+):.{8}:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" LogMessageText="cd5:${t}" LogProcess="True" ActionType="LogMessage" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers />
</Folder>
<Folder Id="1a7698d8-1f6d-4631-8a95-81bcebb9a3f8" Name="P4" Enabled="true">
<Folders>
<Folder Id="e7054f82-5e47-4c1b-9412-89e0c275f311" Name="A. 开场" Enabled="true" RawEnvironmentVariables="phase = P4开场">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="+0. 初始化 生成琳" Id="1437e8a6-116e-4ee9-8b66-1065f4598be0" RegularExpression="^.{15}\S+ 03:(?&lt;id&gt;4.{7}):([^:]*:){7}17833:([^:]*:){7}(?&lt;y&gt;[^:]+):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="去${if: ${y} &gt; 100 ? C : A }点方向" ActionType="UseTTS" />
<Action OrderNumber="2" LogMessageText="cd5:4.68" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="天光轮回" Id="17fdc74f-ee8c-4e02-9b5e-e965e80d05a4" RegularExpression="^.{15}\S+ 1A:8E1:[^:]+:[^:]+:.{8}:[^:]*:(?&lt;tid&gt;4.{7}):[^:]*:223:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="集合站位，天光轮回" ActionType="UseTTS" />
<Action OrderNumber="2" LogMessageText="cd5:5" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="3" UseTTSTextExpression="躲开" ActionType="UseTTS" ExecutionDelayExpression="4800" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="缩小实体" Id="55c7abd2-72e3-4964-9523-15041ea69db2" RegularExpression="^.{15}\S+ 03:(?&lt;id&gt;4.{7}):([^:]*:){7}1783[35]:">
<Actions>
<Action OrderNumber="1" NamedCallbackName="ObjectScaling" NamedCallbackParam="${_entity[${id}].address}, 2" ActionType="NamedCallback" DescTextColor="26f" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="aa88b91d-0c53-49cc-9846-22a859c3d2c6" Name="B. 一运" Enabled="true" RawEnvironmentVariables="phase = P4一运">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="+0. 初始" Id="63e16420-ea96-42c9-bd87-5cce8bed57a0" RegularExpression="^.{15}\S+ 15:4.{7}:[^:]*:9CFA:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="AoE，壹运" ActionType="UseTTS" ExecutionDelayExpression="6600" />
</Actions>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="O3. 神圣之翼 " Id="0bb0af0d-ed5d-4f02-a3d6-59ba6e790723" RegularExpression="^U7a4_一运_半场:isRSafe:(?&lt;isRSafe&gt;[01])">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" ExecutionDelayExpression="300" />
<Action OrderNumber="2" UseTTSTextExpression="${if: (${_me.x} &gt; 100) = ${isRSafe} ? 留在 : 穿到 }${if: ${isRSafe} ? 右 : 左 }侧分摊" ActionType="UseTTS" />
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="load&#xD;&#xA;---&#xD;&#xA;O: 100 + (${isRSafe} ? 1.1 : -1.1), 100, 0&#xD;&#xA;${if: ${isRSafe} ? 1 : 2 }: 0, -5√2&#xD;&#xA;${if: ${isRSafe} ? 4 : 3 }: 0,  5√2" ActionType="NamedCallback" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O2.1 时间轴" Id="900d1aca-f1b8-43bc-947f-9486c0308507" RegularExpression="^U7a4_一运:">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="U7a4_一运_my位置" VariableExpression="${l:U7a4_一运_蝴蝶_pIdx.indexof(${v:myIdx})} + ${l:U7a4_一运_光波_pIdx.indexof(${v:myIdx})}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="tmp_换" VariableExpression="(${v:U7a4_一运_my位置} &lt;= 2) != (${v:myIdx} &lt;= 4)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" ActionType="Placeholder" Description="连线组" DescriptionOverride="True" />
<Action OrderNumber="4" UseTTSTextExpression="${v:U7a4_一运_环_type}，${if: ${v:tmp_换} ? &quot;换到&quot; : &quot;&quot; }${if: ${v:U7a4_一运_my位置} &lt;= 2 ? 上北 : 下南 }踩塔，&#xD;&#xA;偏${if: ${v:U7a4_一运_my位置} % 2 = 1 ? 左侧 : 右侧 }" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a4_一运_蝴蝶_pIdx.contain(${v:myIdx})}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" ActionType="Placeholder" Asynchronous="False" Description="无连线组" DescriptionOverride="True" />
<Action OrderNumber="6" UseTTSTextExpression="无连线，${if: ${v:tmp_换} ? &quot;换到&quot; : &quot;去&quot; }${?l: 上方, 上方, 下方, 下方 [${v:U7a4_一运_my位置}]}，引导光波" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a4_一运_光波_pIdx.contain(${v:myIdx})}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${_me.isTH}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="7" UseTTSTextExpression="无连线，${if: ${v:tmp_换} ? &quot;换到&quot; : &quot;去&quot; }${?l: 左上, 右上, 左下, 右下 [${v:U7a4_一运_my位置}]}，引导光波" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a4_一运_光波_pIdx.contain(${v:myIdx})}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${_me.isTH}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="8" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, 0&#xD;&#xA;1: polar 5, -115°&#xD;&#xA;4: polar 5,  -65°&#xD;&#xA;3: polar 5,   65°&#xD;&#xA;2: polar 5,  115°" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a4_一运_光波_pIdx.contain(${v:myIdx})}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="9" VariableName="tmp_换" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="10" ActionType="Placeholder" Description="光波判定" DescriptionOverride="True" />
<Action OrderNumber="11" ActionType="Placeholder" ExecutionDelayExpression="10500" />
<Action OrderNumber="12" UseTTSTextExpression="${if: ${l:U7a4_一运_蝴蝶_pIdx[1]} = ${v:myIdx} || ${l:U7a4_一运_蝴蝶_pIdx[2]} = ${v:myIdx} ? &quot;分散，注意水晶&quot; : &quot;后退分散&quot; }" ActionType="UseTTS" />
<Action OrderNumber="13" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, 0&#xD;&#xA;A: -3.4, -7.1&#xD;&#xA;B:  3.4, -7.1&#xD;&#xA;C:  3.4,  8.2&#xD;&#xA;D: -3.4,  8.2&#xD;&#xA;1: -8.2, -3.4&#xD;&#xA;2:  8.2, -3.4&#xD;&#xA;3:  8.2,  3.4&#xD;&#xA;4: -8.2,  3.4" ActionType="NamedCallback" ExecutionDelayExpression="200" DescBgColor="dff" />
<Action OrderNumber="14" SystemBeepLengthExpression="200" />
<Action OrderNumber="15" ActionType="Placeholder" Description="跳跃判定（翅膀触发器处理标点和TTS）" DescriptionOverride="True" />
<Action OrderNumber="16" ActionType="Placeholder" ExecutionDelayExpression="2900" />
<Action OrderNumber="17" SystemBeepLengthExpression="200" />
<Action OrderNumber="18" ActionType="Placeholder" Description="分摊判定" DescriptionOverride="True" />
<Action OrderNumber="19" ActionType="Placeholder" ExecutionDelayExpression="3300" />
<Action OrderNumber="20" NamedCallbackName="AdvWm" NamedCallbackParam="load" ActionType="NamedCallback" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="O2.2 文本播报" Id="208e6caf-74c7-4652-8561-86b6cb511610" RegularExpression="^U7a4_一运:">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="tmp_连线desc" VariableExpression="連線：不換位" ActionType="Variable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a4_一运_环_type}" ExpressionTypeL="String" ExpressionR="蝴蝶" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="2" VariableOp="SetString" VariableName="tmp_连线desc" VariableExpression="連線：${v:U7a4_一运_环_type}換位（${?l:ＭＴ,ＳＴ,Ｈ１,Ｈ２,Ｄ１,Ｄ２,Ｄ３,Ｄ４[${l:U7a4_一运_连线换位_pIdx[1]}]}↓ / ${?l:ＭＴ,ＳＴ,Ｈ１,Ｈ２,Ｄ１,Ｄ２,Ｄ３,Ｄ４[${l:U7a4_一运_连线换位_pIdx[2]}]}↑）" ActionType="Variable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:U7a4_一运_环_type}" ExpressionTypeL="String" ExpressionR="蝴蝶" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="3" VariableOp="SetString" VariableName="tmp_光波desc" VariableExpression="光波：不換位" ActionType="Variable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a4_一运_无线换位_pIdx[1]}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" VariableOp="SetString" VariableName="tmp_光波desc" VariableExpression="光波：${v:U7a4_一运_无线换位侧}側換位（${?l:ＭＴ,ＳＴ,Ｈ１,Ｈ２,Ｄ１,Ｄ２,Ｄ３,Ｄ４[${l:U7a4_一运_无线换位_pIdx[1]}]}↓ / ${?l:ＭＴ,ＳＴ,Ｈ１,Ｈ２,Ｄ１,Ｄ２,Ｄ３,Ｄ４[${l:U7a4_一运_无线换位_pIdx[2]}]}↑）" ActionType="Variable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:U7a4_一运_无线换位_pIdx[1]}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" NamedCallbackName="command" NamedCallbackParam="/${pd:U7a_cfg[publicChannel]} &#xD;&#xA;　${v:tmp_连线desc}&#xD;&#xA;　${v:tmp_光波desc}" ActionType="NamedCallback" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="d08f205c-e038-4170-a719-4eaf11caba1a" Name="C. 二运" Enabled="true" RawEnvironmentVariables="phase = P4二运">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="+0. 初始" Id="c911b02b-a746-436d-883a-f0ef2466889f" RegularExpression="^.{15}\S+ 14:(?&lt;id&gt;4.{7}):[^:]+:9D30:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="AoE，二运" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O2. 初始播报（蓝）" Id="5051ac36-984d-4fdb-96b8-750be14e3645" RegularExpression="^U7a4_二运_蓝:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${?d:&#xD;&#xA;  暗 = 上半场，暗分散, &#xD;&#xA;  补 = 上半场，替补暗分散, &#xD;&#xA;  水 = 下半场, &#xD;&#xA;  冰 = 下半场, &#xD;&#xA;  摊 = 下半场&#xD;&#xA;[${v:U7a4_二运_self}]}" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O3.1 红冰" Id="77622a09-3c64-42b3-81c0-53d9f7ea43c1" RegularExpression="^U7a4_二运:isTL慢:(?&lt;isTL慢&gt;[01]):is红:1:type:(?&lt;type&gt;[12])">
<Actions />
</Trigger>
<Trigger Enabled="true" Name="O1. 初始播报（红）" Id="13ea4f20-af37-46e4-ac0d-1db0df646460" RegularExpression="^U7a4_二运_红:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${?d:&#xD;&#xA;  0 = 蓝, &#xD;&#xA;  1 = 红冰，高，左西撞龙头,&#xD;&#xA;  2 = 红冰，低，右东撞龙头,&#xD;&#xA;  3 = 红风，高，去左下,&#xD;&#xA;  4 = 红风，低，去右下,&#xD;&#xA;[${v:U7a4_二运_self}]}" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O3.3 蓝暗/无" Id="6efbc322-5843-4ead-84cb-ccd4b053640c" RegularExpression="^U7a4_二运:isTL慢:(?&lt;isTL慢&gt;[01]):is红:0:type:(?&lt;type&gt;[暗补])">
<Actions />
</Trigger>
<Trigger Enabled="true" Name="O3.2 红风" Id="1d328a25-04bb-497a-8632-86dfb9db35bc" RegularExpression="^U7a4_二运:isTL慢:(?&lt;isTL慢&gt;[01]):is红:1:type:(?&lt;type&gt;[34])">
<Actions />
</Trigger>
<Trigger Enabled="true" Name="O3.4 蓝人群" Id="a7719530-18cb-4f42-92a8-f20769b262ec" RegularExpression="^U7a4_二运:isTL慢:(?&lt;isTL慢&gt;[01]):is红:0:type:(?&lt;type&gt;[水冰摊])">
<Actions />
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers />
</Folder>
<Folder Id="6b9d0409-94a8-4d93-8c86-859c45e412ad" Name="P5" Enabled="true">
<Folders>
<Folder Id="cf8b21cd-e05f-461d-8dc2-d32b109c6671" Name="B. 踩塔" Enabled="true" RawEnvironmentVariables="phase = P5踩塔">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="+0. 初始" Id="68833046-0152-47bd-94a3-e63804d1bf7b" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9D7F:">
<Actions>
<Action OrderNumber="1" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Circle &#xD;&#xA;O: 100, 100&#xD;&#xA;Waymarks: A14C32&#xD;&#xA;R: 8" ActionType="NamedCallback" DescBgColor="dff" />
<Action OrderNumber="2" UseTTSTextExpression="准备踩塔" ActionType="UseTTS" />
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="21700" DescBgColor="dff" />
<Action OrderNumber="4" UseTTSTextExpression="挡枪站位，去${if: ${v:myIdx} % 2 = 1 ? 左后 : 右后 }" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="NumericGreater" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O1. 初始播报" Id="f7de6e6b-d03c-45d2-8314-0027f79b4460" RegularExpression="^U7a5_塔1:dir-3:(?&lt;dirN3_1&gt;[012]):is先暗:(?&lt;is先暗&gt;[01]):is一仇:(?&lt;is一仇&gt;[01])">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="自己不是 T" DescriptionOverride="True" />
<Action OrderNumber="2" UseTTSTextExpression="${if: ${is先暗} ? 暗，去左 : 光，去右 }" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="NumericGreater" />
</Condition>
</Action>
<Action OrderNumber="3" ActionType="Placeholder" Description="自己不是当前 T" DescriptionOverride="True" />
<Action OrderNumber="4" UseTTSTextExpression="${if: ${is先暗} ? 暗，左后方脚下 : 光，右后方远离 }，挑衅" ActionType="UseTTS">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="NumericLessEqual" />
<ConditionSingle Enabled="true" ExpressionL="${is一仇}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" ActionType="Placeholder" Description="自己是当前 T" DescriptionOverride="True" />
<Action OrderNumber="6" UseTTSTextExpression="${if: ${is先暗} ? 暗 : 光 }，去壹塔对面" ActionType="UseTTS">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="NumericLessEqual" />
<ConditionSingle Enabled="true" ExpressionL="${is一仇}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="7" UseTTSTextExpression="退避" ActionType="UseTTS" ExecutionDelayExpression="5000">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="NumericLessEqual" />
<ConditionSingle Enabled="true" ExpressionL="${is一仇}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="8" ActionType="Placeholder" ExecutionDelayExpression="3000" />
<Action OrderNumber="9" ActionType="Placeholder" Description="自己不是 T" DescriptionOverride="True" />
<Action OrderNumber="10" UseTTSTextExpression="对穿" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="NumericGreater" />
</Condition>
</Action>
<Action OrderNumber="11" ActionType="Placeholder" Description="自己不是初始的当前 T" DescriptionOverride="True" />
<Action OrderNumber="12" UseTTSTextExpression="回目标圈" ActionType="UseTTS">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="NumericLessEqual" />
<ConditionSingle Enabled="true" ExpressionL="${is一仇}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="13" ActionType="Placeholder" Description="自己是初始的当前 T" DescriptionOverride="True" />
<Action OrderNumber="14" UseTTSTextExpression="${if: ${is先暗} ? 光，远离引导 : 暗，脚下引导 }" ActionType="UseTTS">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="NumericLessEqual" />
<ConditionSingle Enabled="true" ExpressionL="${is一仇}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="15" ActionType="Placeholder" ExecutionDelayExpression="3000" />
<Action OrderNumber="16" ActionType="Placeholder" Description="自己不是初始的当前 T" DescriptionOverride="True" />
<Action OrderNumber="17" UseTTSTextExpression="拉到正点方向" ActionType="UseTTS">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="NumericLessEqual" />
<ConditionSingle Enabled="true" ExpressionL="${is一仇}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="9511791e-ea44-4221-9c4f-d125161b8277" Name="C. 挡枪" Enabled="true" RawEnvironmentVariables="phase = P5挡枪">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="+0. 初始" Id="3aef71dd-9ca1-4296-843a-5f2fdd98782b" RegularExpression="^.{15}\S+ 107:4.{7}:9D7C:(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):(?&lt;z&gt;[^:]+):(?&lt;h&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${if: ${v:myIdx} = 1 ? 左后挡枪站位 : 右后挡枪站位 }" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="NumericLessEqual" />
</Condition>
</Action>
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#xD;&#xA;θ: 0${h}&#xD;&#xA;&#xD;&#xA;A: -5, 5&#xD;&#xA;1: -7, 7&#xD;&#xA;3: -9, 9&#xD;&#xA;&#xD;&#xA;B:  5, 5&#xD;&#xA;2:  7, 7&#xD;&#xA;4:  9, 9&#xD;&#xA;&#xD;&#xA;C:  0, 8&#xD;&#xA;D:  0, 10.5" ActionType="NamedCallback" DescBgColor="dff" />
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="23400" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O2. 二段判定" Id="a5a490e5-7512-4792-8e2f-c9470e209ef0" RegularExpression="^U7a5_挡枪二段:(?&lt;n2&gt;[1234])">
<Actions>
<Action OrderNumber="1" SystemBeepLengthExpression="200">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${n2}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="NumericLess" />
</Condition>
</Action>
<Action OrderNumber="2" UseTTSTextExpression="${?d: &#xD;&#xA;  10 = 左后, 11 = 左前挡枪, 12 = 右后,&#xD;&#xA;  00 = 右后, 01 = 右前挡枪, 02 = 左后,&#xD;&#xA;  [${v:myIdx_isG1}${n: sign(${n2} - ${v:U7a5_挡枪_my换位轮次} + 1) + 1}]&#xD;&#xA;}" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${n2}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="NumericLess" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O1. 一段判定" Id="bb9e8982-6606-43fe-961f-0962652d847f" RegularExpression="^U7a5_挡枪一段:(?&lt;n1&gt;[1-4])">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${if: ${n1} = ${v:U7a5_挡枪_my换位轮次} &amp;&amp; ${n1} != 4 ? 去中间，换位 : 去中间 }" ActionType="UseTTS" />
<Action OrderNumber="2" SystemBeepLengthExpression="200" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="6efee1b5-d7c2-4507-87bd-40affd3f9798" Name="A. 地火" Enabled="true" RawEnvironmentVariables="phase = P5地火">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="+0. 初始化" Id="ad1012b4-bfc2-40d2-aa46-337ff904baee" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9D72:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="AoE，地火" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="O1. 播报" Id="4aa3710d-97a2-4521-95a7-1aa8ff7e853c" RegularExpression="^U7a5_地火:中心dir4:(?&lt;dir4_0&gt;[0-3]):is逆:(?&lt;is逆&gt;[01]):初始dir-8:(?&lt;dir_8_1&gt;[0-7])">
<Actions>
<Action OrderNumber="1" LogMessageText="cd4:17.9" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="cd4:21.9" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="cd4:25.9" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
<Action OrderNumber="4" NamedCallbackName="command" NamedCallbackParam="/${pd:U7a_cfg[debugChannel]} [Debug]&#xD;&#xA;${_event}" ActionType="NamedCallback" Asynchronous="False" DescBgColor="fdd" />
<Action OrderNumber="5" NamedCallbackName="command" NamedCallbackParam="/${pd:U7a_cfg[publicChannel]} &#xD;&#xA;地火：${f:pick(${dir4_0}): 上北 A, 左西 D, 下南 C, 右东 D}　${if: ${is逆} ? 逆 : ${if: ${_ffxivisglobal} ? 順 : 顺 } }" ActionType="NamedCallback" Asynchronous="False" DescBgColor="fdd" />
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100 polar 5√2, dir2rad(${dir4_0}, 4)&#xD;&#xA;A: polar 1.25 / sin(67.5°), dir2rad(${dir_8_1} , -8) + π&#xD;&#xA;B: polar 1.25 / sin(22.5°), dir2rad(${dir_8_1} + (${is逆} ? 7 : 1) , -8)&#xD;&#xA;C: polar 1.25 / sin(22.5°), dir2rad(${dir_8_1} + (${is逆} ? 1 : 7) , -8)&#xD;&#xA;D: fakeclear&#xD;&#xA;1: fakeclear&#xD;&#xA;2: polar 1.1√2, ${n: dir2rad((${dir_8_1} + (${is逆} ? 7 : 1)) // 2 , -4)}&#xD;&#xA;3: polar 1.1√2, ${n: dir2rad((${dir_8_1} + (${is逆} ? 1 : 7)) // 2 , -4)}&#xD;&#xA;4: fakeclear&#xD;&#xA;" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="7" UseTTSTextExpression="去${f:pick(${dir4_0}): 上北, 左西, 下南, 右东}，站在A点" ActionType="UseTTS" ExecutionDelayExpression="7000" Asynchronous="False" />
<Action OrderNumber="8" UseTTSTextExpression="准备${if: ${is逆} ? 逆时针 : 顺时针 }去B点" ActionType="UseTTS" ExecutionDelayExpression="5000" Asynchronous="False" />
<Action OrderNumber="9" ActionType="Placeholder" ExecutionDelayExpression="5700" Asynchronous="False" />
<Action OrderNumber="10" ActionType="Placeholder" Asynchronous="False" Description="第一组第二次判定" DescriptionOverride="True" />
<Action OrderNumber="11" UseTTSTextExpression="去B点" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="12" ActionType="Placeholder" ExecutionDelayExpression="4000" Asynchronous="False" />
<Action OrderNumber="13" ActionType="Placeholder" Asynchronous="False" Description="第二组第二次判定" DescriptionOverride="True" />
<Action OrderNumber="14" UseTTSTextExpression="去C点" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="15" ActionType="Placeholder" ExecutionDelayExpression="4000" Asynchronous="False" />
<Action OrderNumber="16" ActionType="Placeholder" Asynchronous="False" Description="第三组第二次判定" DescriptionOverride="True" />
<Action OrderNumber="17" UseTTSTextExpression="回A点" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="18" NamedCallbackName="AdvWm" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="2000" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="19" UseTTSTextExpression="左右分摊" ActionType="UseTTS" Asynchronous="False" />
</Actions>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers />
</Folder>
</Folders>
<Triggers />
</Folder>
</Folders>
<Triggers>
<Trigger Enabled="false" Source="None" Name="【使用说明】 点开看" Id="05a9ff0e-0673-42fc-87fd-74fa17e96a60" RegularExpression="">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="·前置&#xD;&#xA;" DescBgColor="346" DescTextColor="fff" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" Description="　触发器 v1.2.0.718+（会自动更新） 鲶鱼精邮差  远程触发器中的运行支持库（触发器自带）  不需要cactbotself" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="3" LaunchProcessPathExpression="https://docs.qq.com/doc/DS3duaXlSc1JJcFVB" ActionType="LaunchProcess" Description="　攻略：参考 MMW 攻略文档 （右键 - 测试动作）" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="4" ActionType="Placeholder" Description="·用户配置" DescBgColor="346" DescTextColor="fff" DescriptionOverride="True" />
<Action OrderNumber="5" ActionType="Placeholder" Description="　进本自动弹出小队列表 + 配置界面，没看见的话检查触发器报错和后台窗口" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="6" ActionType="Placeholder" Description="　如需手动开启，游戏内输入指令（大小写不敏感）：" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="7" ActionType="Placeholder" Description="　  绝伊甸副本内：/e cfg" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="8" ActionType="Placeholder" Description="　  绝伊甸副本外：/e cfg FRU/Eden/伊甸/yidian/U7a （后面任选其一）" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="9" LogMessageText="[00:00:00.000] ChatLog 00:0038::cfg eden" LogProcess="True" ActionType="LogMessage" Description="　  也可右键此行 - 测试动作" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="10" ActionType="Placeholder" Description="　目前仅有 P1-2 的配置有实际作用（不出错的话），后续阶段尚未适配，和以前一样（如下文）" DescBgColor="f4faff" DescTextColor="800" DescriptionOverride="True" />
<Action OrderNumber="11" ActionType="Placeholder" Description="·播报 / 标点说明&#xD;&#xA;" DescBgColor="346" DescTextColor="fff" DescriptionOverride="True" />
<Action OrderNumber="12" ActionType="Placeholder" Description="· P1" DescBgColor="bce" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="13" ActionType="Placeholder" Description="雷火线" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="14" ActionType="Placeholder" Description="　采用全队优先级法，MT - D4" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="15" ActionType="Placeholder" Description="六人塔" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="16" ActionType="Placeholder" Description="　采用 MMW 攻略的：北 [H1] D1; 南 [H2] D2; 中 [D4] D3，括号为固定组，另一人补位" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="17" ActionType="Placeholder" Description="· P2" DescBgColor="bce" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="18" ActionType="Placeholder" Description="滑冰" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="19" ActionType="Placeholder" Description="　滑冰前：如果自己在希瓦半场则标出希瓦背后的区域，否则用弧形标点标出一次可滑到 Boss 身后的范围，最好在结冰前进入二者之一" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="20" ActionType="Placeholder" Description="　冰地板判定后，如果自己：" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="21" ActionType="Placeholder" Description="　位于身后：无提示（文字提醒此处必须预先滑一次）" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="22" ActionType="Placeholder" Description="　位于侧面（未成功进入上述两区域）：用弧形标点标出一次可滑到 Boss 身后的范围，你需要先滑进这个区域再处理" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="23" ActionType="Placeholder" Description="　位于前方（可一次滑进身后）：用一排标点标出最安全的滑动角度 （标点末端为滑冰终点）" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="24" ActionType="Placeholder" Description="　计算无法考虑有人把光圈塞到 Boss 背后的情况（正常不会出现），如果指路指向了光圈则自己回避一下。" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="25" ActionType="Placeholder" Description="光暴：灰九式" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="26" ActionType="Placeholder" Description="· P3" DescBgColor="bce" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="27" ActionType="Placeholder" Description="一运：灰九式" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="28" ActionType="Placeholder" Description="二运：MMW 双分组（分摊分组优先级 H1 H2 MT ST D1-4，地火分散左 TH 右 DPS）" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="29" ActionType="Placeholder" Description="· P4" DescBgColor="bce" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="30" ActionType="Placeholder" Description="一运：翻花绳" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="31" ActionType="Placeholder" Description="· P5" DescBgColor="bce" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="32" ActionType="Placeholder" Description="地火" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="33" ActionType="Placeholder" Description="　地火读条时，场地出现五个标点 ABC23" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="34" ActionType="Placeholder" Description="　ABC 约为正三角形，初始站在 A" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="35" ActionType="Placeholder" Description="　听提示音（每四声的最后一声时移动）依次穿到 B、C，最后回到 A，每次相应的圆形标点内均为安全范围" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="36" ActionType="Placeholder" Description="　2 和 3 位于 B 和 C 内侧，如果想移动更短的距离，可以参考这两个点（正方形标点只有对角线的一侧安全）" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="37" ActionType="Placeholder" Description="塔" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="38" ActionType="Placeholder" Description="　人群无脑解法（MMW 灰九）：当前 MT 一塔对侧，ST 一塔偏安全侧" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="39" ActionType="Placeholder" Description="挡枪" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="40" ActionType="Placeholder" Description="　一左二右，T M R H" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="41" ActionType="Placeholder" Description="·已知问题" DescBgColor="346" DescTextColor="fff" DescriptionOverride="True" />
<Action OrderNumber="42" ActionType="Placeholder" Description="·关于" DescBgColor="346" DescTextColor="fff" DescriptionOverride="True" />
<Action OrderNumber="43" ActionType="Placeholder" Description="　　by 阿洛 MnFeN   群号 556836295 / 133514183" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
<Action OrderNumber="44" LaunchProcessPathExpression="https://space.bilibili.com/83429972" ActionType="LaunchProcess" Description="　　你可以关注这个 b 站账号，不定期更新视频介绍（右键这一行 - 测试动作）" DescBgColor="f4faff" DescTextColor="234" DescriptionOverride="True" />
</Actions>
</Trigger>
</Triggers>
</ExportedFolder>
</TriggernometryExport>