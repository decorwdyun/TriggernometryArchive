<?xml version='1.0' encoding='utf-8'?>
<TriggernometryExport PluginVersion="1.2.0.716">
<ExportedFolder Id="a17f62d4-2b4a-4ded-a860-6d7eb8b223d5" Name="7.0 M1-4 阿卡狄亚轻量级" Enabled="true" RawEnvironmentVariables="link = &quot;https://space.bilibili.com/83429972/channel/collectiondetail?sid=2967544&quot;">
<Folders>
<Folder FfxivZoneFilterRegularExpression="^1228$" Id="cc899246-46c7-4494-8662-a76a39aaf379" Name="❤蜂蜂小甜心❤　❤大航海排行❤" Enabled="true">
<Folders>
<Folder FFXIVZoneFilterEnabled="True" FfxivZoneFilterRegularExpression="^1228$" Id="995a27f0-efac-48c0-a569-0423e4bb6ced" Name="限制区域" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Sequential="True" Name="0. 注册 + 自动开关 （代码注释）" Id="d9473560-55a9-4f70-bcbe-2634431b591c" RegularExpression="^.{15}\S+ 01:" Description="接受：永久字典：HoneyBeeRanking&#13;&#10;- channel: 发消息的频道，不存在时为默认值 &quot;p&quot;&#13;&#10;&#13;&#10;接受：永久表格：HoneyBeeRanking&#13;&#10;- hexId: row.Values[0]&#13;&#10;- name:  row.Values[1]&#13;&#10;- times: row.Values[2]&#13;&#10;- lastUpdated: row.Values[3]&#13;&#10;&#13;&#10;具名回调：HoneyBeeRanking&#13;&#10;参数：&#13;&#10;- check：&#13;&#10;  根据当前小队成员，输出当前是否应该启用：变量 tmp_on = 0 或 1&#13;&#10;- ranking：&#13;&#10;  生成当前排行并发送&#13;&#10;- recent：&#13;&#10;  生成最近一批上舰的名字列表并发送">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="详见触发器描述" DescriptionOverride="True" />
<Action OrderNumber="2" ExecScriptExpression="using System;&#13;&#10;using System.Collections.Generic;&#13;&#10;using System.Linq;&#13;&#10;using Triggernometry;&#13;&#10;using Triggernometry.Variables;&#13;&#10;using static Triggernometry.PluginBridges.BridgeFFXIV;&#13;&#10;using static Triggernometry.Interpreter.StaticHelpers;&#13;&#10;&#13;&#10;&#13;&#10;RealPlugin.plug.RegisterNamedCallback(&#13;&#10;    &quot;HoneyBeeRanking&quot;,&#13;&#10;    new Action&lt;object, string&gt;(HoneyBeeRanking.Callback),&#13;&#10;    null,&#13;&#10;    registrant: &quot;蜂蜂小甜心 大航海排行 by 阿洛&quot;&#13;&#10;);&#13;&#10;&#13;&#10;public class HoneyBeeRanking&#13;&#10;{&#13;&#10;    string channel; // 发消息的频道&#13;&#10;    bool isSimp; // 使用简体中文（国服）&#13;&#10;    Dictionary&lt;string, VariableDictionary&gt; currentPlayers;&#13;&#10;&#13;&#10;    List&lt;Player&gt; Ranking;&#13;&#10;    List&lt;string&gt; RecentHexIds;&#13;&#10;&#13;&#10;    public HoneyBeeRanking()&#13;&#10;    {&#13;&#10;        isSimp = !GetMyself().GetValue(&quot;name&quot;).ToString().Contains(&quot; &quot;);&#13;&#10;        channel = GetDictVariable(true, &quot;HoneyBeeRanking&quot;)?.GetValue(&quot;channel&quot;)?.ToString() ?? &quot;&quot;;&#13;&#10;        if (string.IsNullOrWhiteSpace(channel)) &#13;&#10;            channel = &quot;p&quot;;&#13;&#10;        currentPlayers = GetAllEntities()&#13;&#10;            .Where(vd =&gt; vd.GetValue(&quot;id&quot;).ToString().StartsWith(&quot;10&quot;))&#13;&#10;            .ToDictionary(vd =&gt; vd.GetValue(&quot;id&quot;).ToString(), vd =&gt; vd);&#13;&#10;    }&#13;&#10;&#13;&#10;    public static void Callback(object _, string arg)&#13;&#10;    { &#13;&#10;        var instance = new HoneyBeeRanking();&#13;&#10;        switch (arg.ToLower().Trim())&#13;&#10;        {&#13;&#10;            case &quot;check&quot;:       // 当前队伍中有超过三个已记录的人则开启（输出变量 tmp_on）&#13;&#10;                var recordedIds = new HashSet&lt;string&gt;(instance.ParseRecordedPlayersFromTable().Select(p =&gt; p.HexId));&#13;&#10;                var count = instance.currentPlayers.Keys.Count(p =&gt; recordedIds.Contains(p));&#13;&#10;                SetScalarVariable(false, &quot;tmp_on&quot;, count &gt;= 3 ? &quot;1&quot; : &quot;0&quot;);&#13;&#10;                break;&#13;&#10;            case &quot;ranking&quot;:     // 生成当前排行并发送&#13;&#10;                instance.OutputRanking();       break;&#13;&#10;            case &quot;recent&quot;:      // 生成最近一批上舰的名字列表并发送&#13;&#10;                instance.OutputRecentNames();   break;&#13;&#10;            default: throw new Exception(&quot;HoneyBeeRanking：不支持的参数&quot;);&#13;&#10;        }&#13;&#10;    }&#13;&#10;&#13;&#10;    /// &lt;summary&gt; 生成最近一批上舰的名字列表并发送。 &lt;/summary&gt;&#13;&#10;    void OutputRecentNames()&#13;&#10;    {&#13;&#10;        RecentHexIds = GetListVariable(false, &quot;HoneyBeeRecent&quot;).Values.Select(v =&gt; v.ToString()).ToList();&#13;&#10;        SetListVariable(false, &quot;HoneyBeeRecent&quot;, null);&#13;&#10;&#13;&#10;        // /p &lt;se.6&gt;&#13;&#10;        // ━━━━━━━━━━━━━━━━━&#13;&#10;        // ♥ 蜂蜂小甜心 甜到你心中～ ♥&#13;&#10;        // ♥ 歡迎兩位新艦長上艦～ ♥&#13;&#10;        // ☆ Aaaaa Bbbbb ☆&#13;&#10;        // ☆ 阿阿阿 ☆&#13;&#10;&#13;&#10;        string cnt = &quot;&quot;;&#13;&#10;        if (RecentHexIds.Count &gt; 1)&#13;&#10;        {&#13;&#10;            cnt = (isSimp ? &quot;零一两三四五六七八&quot; : &quot;零一兩三四五六七八&quot;)[RecentHexIds.Count] + &quot;位&quot;;&#13;&#10;        }&#13;&#10;&#13;&#10;        string output = $@&quot;/{channel} &lt;se.6&gt;&#13;&#10;{sepBold}&#13;&#10;♥ 蜂蜂小甜心  ☆  甜到你心中 ♥&#13;&#10;&quot;;&#13;&#10;        if (isSimp)     output += $&quot;♥ 从今天起～成为我的小工蜂 ♥\n♥ 欢迎{cnt}新舰长上舰～ ♥&quot;;&#13;&#10;        else            output += $&quot;♥ 从今天起～成為我的小工蜂 ♥\n♥ 歡迎{cnt}新艦長上艦～ ♥&quot;;&#13;&#10;        output += $&quot;\n☆ {string.Join(&quot; ☆\n☆ &quot;, RecentHexIds.Select(id =&gt; GetPlayerDesc(id)))} ☆&quot;;&#13;&#10;        RealPlugin.plug.InvokeNamedCallback(&quot;command&quot;, output);&#13;&#10;    }&#13;&#10;&#13;&#10;    /// &lt;summary&gt; 从已解析的当前玩家中，根据 ID 生成描述，如 [职业] 名字。 &lt;/summary&gt;&#13;&#10;    string GetPlayerDesc(string hexId, string bkupName = null)&#13;&#10;    {&#13;&#10;        if (currentPlayers.TryGetValue(hexId, out var vd))&#13;&#10;        {&#13;&#10;            var name = $&quot;{vd.GetValue(&quot;name&quot;)}&quot;;&#13;&#10;            //if (vd.GetValue(&quot;id&quot;).ToString() == PlayerHexId) // 演示用&#13;&#10;            //    name = &quot;Argument Exception&quot;;&#13;&#10;            return $&quot;[{vd.GetValue(isSimp ? &quot;jobCN2&quot; : &quot;jobEN3&quot;)}] {name}&quot;;&#13;&#10;        }&#13;&#10;        else return bkupName ?? hexId; // 不应进入此分支&#13;&#10;    }&#13;&#10;&#13;&#10;    static string sepBold = &quot;━━━━━━━━━━━━━━━━━&quot;;&#13;&#10;    static string sepThin = &quot;─────────────────&quot;;&#13;&#10;&#13;&#10;    /// &lt;summary&gt; 生成当前排行并发送。 &lt;/summary&gt;&#13;&#10;    void OutputRanking()&#13;&#10;    {&#13;&#10;        var currentPlayerIds = new HashSet&lt;string&gt;(currentPlayers.Keys);&#13;&#10;        Ranking = ParseRecordedPlayersFromTable()&#13;&#10;            .Where(p =&gt; currentPlayerIds.Contains(p.HexId))&#13;&#10;            .OrderByDescending(p =&gt; p.Times)&#13;&#10;            .ThenBy(p =&gt; p.LastUpdated)&#13;&#10;            .ToList();&#13;&#10;        GenerateRanking();&#13;&#10;&#13;&#10;        /* /p &lt;se.6&gt;&#13;&#10;         ━━━━━━━━━━━━━━━━━&#13;&#10;         ☆ 蜂蜂小甜心 ☆ 小姐的 大♡航♡海～&#13;&#10;         ─────────────────&#13;&#10;         　　5 次　　Aaaaa Bbbbb&#13;&#10;         　　3 次　　Cccccccc Dddddddd&#13;&#10;         　　3 次　　阿阿阿&#13;&#10;         　　1 次　　Eeeeee&#13;&#10;         ━━━━━━━━━━━━━━━━━&#13;&#10;         */&#13;&#10;&#13;&#10;        string output = $&quot;/{channel} &lt;se.6&gt;\n\n{sepBold}\n☆ 蜂蜂小甜心 ☆  ♥  ☆ 大航海排行 ☆\n&quot;;&#13;&#10;        if (Ranking.Count() == 0) return;&#13;&#10;        output += string.Join(&quot;\n&quot;, Ranking.Select(p =&gt; p.ToRankingString(this))) + &quot;\n&quot; + sepBold;&#13;&#10;        RealPlugin.plug.InvokeNamedCallback(&quot;command&quot;, &quot;/e \n♡ 清空排行：/e bee reset&quot;);&#13;&#10;        RealPlugin.plug.InvokeNamedCallback(&quot;command&quot;, output);&#13;&#10;    }&#13;&#10;&#13;&#10;    /// &lt;summary&gt; 从永久表格中解析所有已记录的玩家数据。 &lt;/summary&gt;&#13;&#10;    IEnumerable&lt;Player&gt; ParseRecordedPlayersFromTable() &#13;&#10;        =&gt; GetTableVariable(true, &quot;HoneyBeeRanking&quot;)?.Rows&#13;&#10;            ?.Select(row =&gt; new Player(&#13;&#10;                hexId: row.Values[0],&#13;&#10;                name:  row.Values[1],&#13;&#10;                times: row.Values[2],&#13;&#10;                lastUpdated: row.Values[3]))&#13;&#10;            ?? Enumerable.Empty&lt;Player&gt;();&#13;&#10;&#13;&#10;    /// &lt;summary&gt; 计算排名，考虑并列 &lt;/summary&gt;&#13;&#10;    void GenerateRanking()&#13;&#10;    {&#13;&#10;        int rank = 1;&#13;&#10;        for (int i = 0; i &lt; Ranking.Count; i++)&#13;&#10;        {&#13;&#10;            Ranking[i].Rank = (i &gt;= 1 &amp;&amp; Ranking[i].Times == Ranking[i - 1].Times) // 当前的次数和前一个相同&#13;&#10;                ? Ranking[i - 1].Rank : rank;&#13;&#10;            rank++;&#13;&#10;        }&#13;&#10;    }&#13;&#10;&#13;&#10;    public class Player&#13;&#10;    {&#13;&#10;        public string HexId { get; set; }&#13;&#10;        public string Name { get; set; }&#13;&#10;        public int Times { get; set; }&#13;&#10;        public double LastUpdated { get; set; }&#13;&#10;        public int Rank { get; set; }&#13;&#10;&#13;&#10;        public Player(object hexId, object name, object times, object lastUpdated)&#13;&#10;        {&#13;&#10;            HexId = hexId.ToString();&#13;&#10;            Name = name.ToString();&#13;&#10;            Times = int.Parse(times.ToString(), System.Globalization.CultureInfo.InvariantCulture);&#13;&#10;            LastUpdated = double.Parse(lastUpdated.ToString(), System.Globalization.CultureInfo.InvariantCulture);&#13;&#10;        }&#13;&#10;&#13;&#10;        public string ToRankingString(HoneyBeeRanking instance)&#13;&#10;        {&#13;&#10;            string rank = Context.ToXIVChar(Rank.ToString(), true);&#13;&#10;            string times = Times.ToString();&#13;&#10;            times = new string(' ', (3 - times.Length) * 2) + times; // 左侧补全空格对齐&#13;&#10;            string player = instance.GetPlayerDesc(HexId, Name);&#13;&#10;            return $&quot;{rank}　{times} 次　　{player}&quot;;&#13;&#10;        }&#13;&#10;    }&#13;&#10;}" ActionType="ExecuteScript" Description="Bee ❤ Bee ❤ Bee ❤ Bee ❤ Bee ❤ Bee ❤ Bee ❤ Bee ❤ Bee" DescBgColor="fac" DescTextColor="824" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ecallback:HoneyBeeRanking}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" NamedCallbackName="HoneyBeeRanking" NamedCallbackParam="check" ActionType="NamedCallback" />
<Action OrderNumber="4" LogMessageText="Bee:on:${if: 0${v:tmp_on} ? 1 : 0 }" LogProcess="True" ActionType="LogMessage" />
<Action OrderNumber="5" VariableName="tmp_on" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="false" Name="1. 上舰记录 =&gt; 2" Id="62bf7efe-d96e-4a18-9ef5-a6f7147593e1" RegularExpression="^.{15}\S+ 1A:F56:[^:]*:[^:]*:[^:]*:[^:]*:(?&lt;tid&gt;1.{7}):(?&lt;tn&gt;[^:]+):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="为新 ID 新建一行" DescriptionOverride="True" />
<Action OrderNumber="2" TableVariableOp="Set" TableVariableName="HoneyBeeRanking" TableVariableExpression="${tid}" TableVariableX="1" TableVariableY="${pt:HoneyBeeRanking.height} + 1" TableSourcePersist="True" ActionType="TableVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${pt:HoneyBeeRanking.vlookup(${tid}, 1)}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" ActionType="Placeholder" Description="填充为四列的表格：ID  名字  次数  时间" DescriptionOverride="True" />
<Action OrderNumber="4" VariableOp="SetString" VariableName="tmp_row" VariableExpression="${pt:HoneyBeeRanking.vlookup(${tid}, 1)}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="5" TableVariableOp="Set" TableVariableName="HoneyBeeRanking" TableVariableExpression="${tn}" TableVariableX="2" TableVariableY="${v:tmp_row}" TableSourcePersist="True" ActionType="TableVariable" Asynchronous="False" />
<Action OrderNumber="6" TableVariableOp="Set" TableVariableExpressionType="Numeric" TableVariableName="HoneyBeeRanking" TableVariableExpression="${_this} + 1" TableVariableX="3" TableVariableY="${v:tmp_row}" TableSourcePersist="True" ActionType="TableVariable" Asynchronous="False" />
<Action OrderNumber="7" TableVariableOp="Set" TableVariableExpressionType="Numeric" TableVariableName="HoneyBeeRanking" TableVariableExpression="round(${_timestampms} / 100) / 10" TableVariableX="4" TableVariableY="${v:tmp_row}" TableSourcePersist="True" ActionType="TableVariable" Asynchronous="False" />
<Action OrderNumber="8" ActionType="Placeholder" Description="记录新的 ID&#13;&#10;" DescriptionOverride="True" />
<Action OrderNumber="9" ListVariableOp="Push" ListVariableName="HoneyBeeRecent" ListVariableExpression="${tid}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="10" LogMessageText="Bee:recent" LogProcess="True" ActionType="LogMessage" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="false" Name="3. 重开时播报排行" Id="1cccab02-8ffe-48ca-be0c-c9140513f08f" RegularExpression="^.{15}\S+ 21:.{8}:4000000[36]">
<Actions>
<Action OrderNumber="1" NamedCallbackName="HoneyBeeRanking" NamedCallbackParam="ranking" ActionType="NamedCallback" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="开关指令 /e bee on/off" Id="60da1afd-c422-42f0-8757-2da97ecbb981" RegularExpression="^.{15}\S+ 00:0038:: *bee +(?&lt;on&gt;on|off) *$">
<Actions>
<Action OrderNumber="1" LogMessageText="Bee:on:${if: ${on} == on ? 1 : 0 }" LogProcess="True" ActionType="LogMessage" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 上舰后播报最近上舰的人" Id="12f51ffd-a3ae-45a2-8b92-95a8d3189a48" RegularExpression="^Bee:recent" PrevActions="Interrupt">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="延迟 以同时播报一起上舰的人" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" ExecutionDelayExpression="500" />
<Action OrderNumber="3" NamedCallbackName="HoneyBeeRanking" NamedCallbackParam="recent" ActionType="NamedCallback" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="f87247e4-cb5f-485a-b916-1108dccd036b" Name="不限区域" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="[F] 开启/关闭" Id="07792adb-37b5-463e-8414-905a28b49e5e" RegularExpression="^Bee:on:(?&lt;on&gt;.)">
<Actions>
<Action OrderNumber="1" NamedCallbackName="command" NamedCallbackParam="/e &lt;se.9&gt;&#13;&#10;大航海排行：${if: ${on} ? ON : OFF }&#13;&#10;可以使用指令${if: ${on} ? &quot;禁用：/e bee off&quot; : &quot;启用：/e bee on&quot; }" ActionType="NamedCallback" />
<Action OrderNumber="2" UseTTSTextExpression="大航海排行已${if: ${on} ? 开启 : 关闭 }" ActionType="UseTTS" />
<Action OrderNumber="3" TriggerOp="DisableTrigger" TriggerId="62bf7efe-d96e-4a18-9ef5-a6f7147593e1" ActionType="Trigger">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${on}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" TriggerOp="DisableTrigger" TriggerId="1cccab02-8ffe-48ca-be0c-c9140513f08f" ActionType="Trigger">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${on}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" TriggerOp="EnableTrigger" TriggerId="62bf7efe-d96e-4a18-9ef5-a6f7147593e1" ActionType="Trigger">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${on}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" TriggerOp="EnableTrigger" TriggerId="1cccab02-8ffe-48ca-be0c-c9140513f08f" ActionType="Trigger">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${on}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="清空指令 /e bee reset" Id="7c2d0ba9-f29b-4b4a-a9c0-6b12c0e33edd" RegularExpression="^.{15}\S+ 00:0038:: *bee +reset *$">
<Actions>
<Action OrderNumber="1" TableVariableName="HoneyBeeRanking" TableSourcePersist="True" ActionType="TableVariable" />
<Action OrderNumber="2" UseTTSTextExpression="清空啦～" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="发送排行 /e bee rank" Id="8ed12f03-6616-4972-97c1-abc88e5ca15c" RegularExpression="^.{15}\S+ 00:0038:: *bee +rank *$" PrevActions="Interrupt">
<Actions>
<Action OrderNumber="1" NamedCallbackName="HoneyBeeRanking" NamedCallbackParam="ranking" ActionType="NamedCallback" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="调试 /e bee test" Id="89a20cc7-a842-4e75-a9a6-b2d2723460d6" RegularExpression="^.{15}\S+ 00:0038::bee test">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="tmp_id" VariableExpression="${if: 0x0${_me.targetid} = 0 ? ${_me.id} : ${_me.targetid} }" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="[00:00:00.000] 0 1A:F56:0:0:0:0:${_entity[${v:tmp_id}].id}:${_entity[${v:tmp_id}].name}:。。。" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
<Action OrderNumber="3" VariableName="tmp_id" ActionType="Variable" Asynchronous="False" />
</Actions>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers>
<Trigger Enabled="false" Source="None" Name="❤ 使用 Bee 读 ❤" Id="280316cb-5ac9-4ef7-9d46-0b01d3b8d3b9" RegularExpression="">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="by 阿洛" DescBgColor="fff" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" Asynchronous="False" Description="❤ 蜂蜂小甜心 ❤" DescBgColor="bfd" DescTextColor="1a3" DescriptionOverride="True" />
<Action OrderNumber="3" ActionType="Placeholder" Asynchronous="False" Description="❤ 大航海排行 ❤" DescBgColor="e8fff4" DescTextColor="1c8" DescriptionOverride="True" />
<Action OrderNumber="4" ActionType="Placeholder" Asynchronous="False" Description="❤ 使用说明 ❤" DescBgColor="fff8aa" DescTextColor="b80" DescriptionOverride="True" />
<Action OrderNumber="5" ActionType="Placeholder" Asynchronous="False" Description="   默认不会启动，不需要手动禁用 ❤" DescBgColor="ffe" DescTextColor="e55" DescriptionOverride="True" />
<Action OrderNumber="6" ActionType="Placeholder" Asynchronous="False" Description="   每次有人 ❤❤❤❤ 上舰时会在队内发送上舰公告 ❤" DescBgColor="ffe" DescTextColor="c90" DescriptionOverride="True" />
<Action OrderNumber="7" ActionType="Placeholder" Asynchronous="False" Description="   每次团灭后会发送当前大航海排行榜 ❤" DescBgColor="ffe" DescTextColor="c90" DescriptionOverride="True" />
<Action OrderNumber="8" ActionType="Placeholder" Asynchronous="False" Description="   每次进本时会自动开关 ❤" DescBgColor="ffe" DescTextColor="c90" DescriptionOverride="True" />
<Action OrderNumber="9" ActionType="Placeholder" Asynchronous="False" Description="   进本时会发送默语消息 + TTS 提示当前是否开启 ❤" DescBgColor="ffe" DescTextColor="c90" DescriptionOverride="True" />
<Action OrderNumber="10" ActionType="Placeholder" Asynchronous="False" Description="   会自动根据国服或国际服选用简繁体字库 ❤" DescBgColor="ffe" DescTextColor="c90" DescriptionOverride="True" />
<Action OrderNumber="11" ActionType="Placeholder" Asynchronous="False" Description="   ACT 重启后记录也会保留，直至手动清空记录 ❤" DescBgColor="ffe" DescTextColor="c90" DescriptionOverride="True" />
<Action OrderNumber="12" ActionType="Placeholder" Asynchronous="False" Description="   记录中用内置 ID 而非名字存储玩家，所以如果玩家跨大区后不会视为同一个人 ❤" DescBgColor="ffe" DescTextColor="c90" DescriptionOverride="True" />
<Action OrderNumber="13" ActionType="Placeholder" Asynchronous="False" Description="❤ 指令列表 ❤" DescBgColor="fbd" DescTextColor="a13" DescriptionOverride="True" />
<Action OrderNumber="14" ActionType="Placeholder" Asynchronous="False" Description="   使用指令 /e bee on 或 /e bee off 手动开关（仅副本内） ❤" DescBgColor="fff0f8" DescTextColor="c58" DescriptionOverride="True" />
<Action OrderNumber="15" ActionType="Placeholder" Asynchronous="False" Description="   使用指令 /e bee rank 发送当前排行（仅副本内） ❤" DescBgColor="fff0f8" DescTextColor="c58" DescriptionOverride="True" />
<Action OrderNumber="16" ActionType="Placeholder" Asynchronous="False" Description="   使用指令 /e bee reset 清空排行 ❤" DescBgColor="fff0f8" DescTextColor="c58" DescriptionOverride="True" />
<Action OrderNumber="17" ActionType="Placeholder" Asynchronous="False" Description="   只看这里的说明就可以，不需要手动执行触发器 ❤" DescBgColor="fff0f8" DescTextColor="c58" DescriptionOverride="True" />
<Action OrderNumber="18" ActionType="Placeholder" Asynchronous="False" Description="   你也可以关闭 “区域限制” 分组下的 2 3 两个触发器，想发送排行时手动用指令 ❤" DescBgColor="fff0f8" DescTextColor="c58" DescriptionOverride="True" />
<Action OrderNumber="19" ActionType="Placeholder" Asynchronous="False" Description="❤ 注意事项 ❤" DescBgColor="faa" DescTextColor="a22" DescriptionOverride="True" />
<Action OrderNumber="20" ActionType="Placeholder" Asynchronous="False" Description="   请勿将此排行榜用于出警队友！仅供娱乐 ❤" DescBgColor="fee" DescTextColor="e66" DescriptionOverride="True" />
<Action OrderNumber="21" ActionType="Placeholder" Asynchronous="False" Description="   上舰往往意味着主动救场而非机制出错，上舰次数不代表犯错次数" DescBgColor="fee" DescTextColor="e66" DescriptionOverride="True" />
<Action OrderNumber="22" ActionType="Placeholder" Asynchronous="False" Description="   使用此工具意味着你将发送文本到小队频道，野队未经同意请慎用" DescBgColor="fee" DescTextColor="e66" DescriptionOverride="True" />
<Action OrderNumber="23" ActionType="Placeholder" Asynchronous="False" Description="   （可能会死哦～ 拂拂晓甜心 来为你送终 ❤" DescBgColor="fee" DescTextColor="e66" DescriptionOverride="True" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_ffxivzoneid}" ExpressionTypeL="String" ExpressionR="1228" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="false" Name="不需要手动关闭，默认不会运行" Id="39b0f670-c3c6-4684-ac14-587b84158ac6" RegularExpression="">
<Actions />
</Trigger>
</Triggers>
</Folder>
<Folder Id="7201bd03-3b21-4b4a-bb29-d7a15fbf2b6d" Name="M1-4 宝宝椅" Enabled="true">
<Folders>
<Folder FFXIVZoneFilterEnabled="True" FfxivZoneFilterRegularExpression="^(122[5-9]|123[0-2])$" Id="a5bff7d1-95b8-4bec-ae1e-c7e250f02a90" Name=".总体控制（区域）" Enabled="true">
<Folders>
<Folder Id="cb3cfcfa-0321-4484-bd12-2abac245b62a" Name="转录日志" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="1B TargetIcon" Id="899edd67-8901-4d0a-b188-eac51208933d" RegularExpression="^(?&lt;time&gt;.{14}) \S+ 1B:(?&lt;id&gt;.{8}):(?&lt;name&gt;[^:]*):.{9}:(?&lt;type&gt;.{4}):">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="1B_first" VariableExpression="${type}" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${evar:1B_first}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="2" LogMessageText="${time} ProcessedLog AA:1B:${id}:${name}:${n: 0x${type} - 0x${v:1B_first}}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="10F ActorSetPos" Id="2b845c7c-7e7b-4a88-9331-616c74d0280a" RegularExpression="^(?&lt;time&gt;.{14}) \S+ 10F:(?&lt;id&gt;4.{7}):(?&lt;h&gt;[^:]+):[^:]+:[^:]+:(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):(?&lt;z&gt;[^:]+)$">
<Actions>
<Action OrderNumber="1" DictVariableOp="GetEntityById" DictVariableName="tmp_entity" DictVariableValue="${id}" ActionType="DictVariable" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="${time} ProcessedLog AA:10F:${id}:${d:tmp_entity[name]}:${d:tmp_entity[bnpcid]}:${x}:${y}:${z}:${h}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="false" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${d:tmp_entity[bnpcid]}" ExpressionTypeL="String" ExpressionR="9020" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" DictVariableName="tmp_entity" ActionType="DictVariable" Asynchronous="False" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="540e52aa-0b27-44ef-8500-c71ab7c22b78" Name="标点" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="标点保存（有人标点）" Id="9b6e891e-e325-421d-bbad-017fbb63f354" RegularExpression="^.{15}\S+ 1C:">
<Actions>
<Action OrderNumber="1" NamedCallbackName="place" NamedCallbackParam="save" ActionType="NamedCallback" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="标点重载（重新挑战 / 进入战斗）" Id="8f70908c-d0ff-4c65-9515-9042ca6f149e" RegularExpression="^.{15}\S+ (21:.{8}:40000006|104:.:1:.:1)">
<Actions>
<Action OrderNumber="1" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" />
<Action OrderNumber="2" NamedCallbackName="place" NamedCallbackParam="save" ActionType="NamedCallback" ExecutionDelayExpression="500" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder FFXIVZoneFilterEnabled="True" FfxivZoneFilterRegularExpression="123[02]" Id="4b0b33ac-6ad9-454f-9e39-039d8db3f5b3" Name="记录职能（简易）" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="setter" Id="2a87511f-deee-4cf4-a59a-efaeb879b589" RegularExpression="^myIdx:(?&lt;idx&gt;\d)(:(?&lt;delay&gt;[^:]*))?">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="myIdx:序号:TTS延迟秒数，延迟为负数时不播报 TTS" DescriptionOverride="True" />
<Action OrderNumber="2" NamedCallbackName="command" NamedCallbackParam="/e &#13;&#10;${if: ${f:contain(&quot; &quot;):${_me}} ? 已存儲職能 : 已存储职能 }：${?l: MT, ST, H1, H2, D1, D2, D3, D4 [${idx}]}。&#13;&#10;${if: ${f:contain(&quot; &quot;):${_me}} ? 如有誤，可手動修改，如 : &quot;如有误，可手动修改，如&quot; } /e MT。" ActionType="NamedCallback" />
<Action OrderNumber="3" VariableOp="SetString" VariableName="myIdx" VariableExpression="${idx}" ActionType="Variable" />
<Action OrderNumber="4" UseTTSTextExpression="已记录 ${?l: MT, ST, H1, H2, D1, D2, D3, D4 [${idx}]}。" ActionType="UseTTS" ExecutionDelayExpression="(0${delay}) * 1000">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="0${delay}" ExpressionTypeL="Numeric" ExpressionR="0" ExpressionTypeR="String" ConditionType="NumericGreaterEqual" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="进本/倒计时时提示设置" Id="1236c0dd-5a9f-4f0b-a89b-4beb18f017c5" RegularExpression="^.{15}\S+ 21:.{8}:4000000(?&lt;type&gt;[16])|^.{15}\S+ (?&lt;isCD&gt;10C):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="尚未设置自身职能。" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx}" ExpressionTypeL="String" ExpressionR="^[1-8]$" ExpressionTypeR="String" ConditionType="RegexNotMatch" />
</Condition>
</Action>
<Action OrderNumber="2" NamedCallbackName="command" NamedCallbackParam="/e 尚未设置自身职能。${if: 0x0${isCD} ? &quot;&lt;se.10&gt;&quot; : &quot;&quot; }&#13;&#10;可输入宏设置，大小写不限，如：&#13;&#10;自身是 MT：/e mt&#13;&#10;自身是 H1：/e h1&#13;&#10;自身是 D4：/e d4   " ActionType="NamedCallback" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx}" ExpressionTypeL="String" ExpressionR="^[1-8]$" ExpressionTypeR="String" ConditionType="RegexNotMatch" />
</Condition>
</Action>
<Action OrderNumber="3" UseTTSTextExpression="已设置职能：${?l: MT, ST, H1, H2, D1, D2, D3, D4 [${v:myIdx}]}" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx}" ExpressionTypeL="String" ExpressionR="^[1-8]$" ExpressionTypeR="String" ConditionType="RegexMatch" />
<ConditionSingle Enabled="true" ExpressionL="${type}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" NamedCallbackName="command" NamedCallbackParam="/e 已设置自身职能：${?l: MT, ST, H1, H2, D1, D2, D3, D4 [${v:myIdx}]} &lt;se.10&gt;&#13;&#10;可输入宏设置，大小写不限，如：&#13;&#10;自身是 MT：/e mt&#13;&#10;自身是 H1：/e h1&#13;&#10;自身是 D4：/e d4   " ActionType="NamedCallback" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:myIdx}" ExpressionTypeL="String" ExpressionR="^[1-8]$" ExpressionTypeR="String" ConditionType="RegexMatch" />
<ConditionSingle Enabled="true" ExpressionL="${type}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_ffxivzoneid}" ExpressionTypeL="String" ExpressionR="^12(26|28|30|32)$" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="接收宏 如 /e MT" Id="ad2cb72f-a16c-479e-a21c-cb8bc295dc64" RegularExpression="^.{15}\S+ 00:0038:: *([MmSs][Tt]|[TtHhDd][1-4]) *$">
<Actions>
<Action OrderNumber="1" LogMessageText="myIdx:${?d: &#13;&#10;  MT = 1, T1 = 1,  &#13;&#10;  ST = 2, T2 = 2, &#13;&#10;  H1 = 3, &#13;&#10;  H2 = 4, &#13;&#10;  D1 = 5, &#13;&#10;  D2 = 6, &#13;&#10;  D3 = 7, &#13;&#10;  D4 = 8  &#13;&#10;  [${f:toupper:$1}]&#13;&#10;}" LogProcess="True" ActionType="LogMessage" Asynchronous="False" />
<Action OrderNumber="2" Asynchronous="False" />
</Actions>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers>
<Trigger Enabled="true" Name="初始化" Id="d83f3c98-846c-452e-99fc-f010ff35a4c3" RegularExpression="^.{15}\S+ 104:.:1:.:1">
<Actions>
<Action OrderNumber="1" VariableOp="UnsetRegexUniversal" VariableName="^M[1234]s_" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="倒计时5秒" Id="1f2a35bc-9c89-42e1-b9eb-c0adbcf7adc1" RegularExpression="^M[1234]s_cd5:(?&lt;t&gt;\d+\.?\d*)$">
<Actions>
<Action OrderNumber="1" SystemBeepFreqExpression="freq(C6)" SystemBeepLengthExpression="200" ExecutionDelayExpression="1000 * (${t} - 4)" />
<Action OrderNumber="2" SystemBeepFreqExpression="freq(D6)" SystemBeepLengthExpression="200" ExecutionDelayExpression="1000" />
<Action OrderNumber="3" SystemBeepFreqExpression="freq(E6)" SystemBeepLengthExpression="200" ExecutionDelayExpression="1000" />
<Action OrderNumber="4" SystemBeepFreqExpression="freq(G6)" SystemBeepLengthExpression="200" ExecutionDelayExpression="1000" />
<Action OrderNumber="5" SystemBeepFreqExpression="freq(C7)" SystemBeepLengthExpression="300" ExecutionDelayExpression="1000" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="团灭中断动作" Id="eb267020-c3ca-4bd1-817e-4fea4e04ec39" RegularExpression="^.{15}\S+ 21:.{8}:400000(03|05)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" ExecutionDelayExpression="500" />
<Action OrderNumber="2" FolderOp="CancelFolder" FolderId="06acefa4-7d1a-4752-800f-5e82910a75fb" ActionType="Folder">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_ffxivzoneid}" ExpressionTypeL="String" ExpressionR="1226" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" FolderOp="CancelFolder" FolderId="9fd73a73-0048-4b15-9535-ba2367fc36ca" ActionType="Folder">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_ffxivzoneid}" ExpressionTypeL="String" ExpressionR="1228" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" FolderOp="CancelFolder" FolderId="ae1dc724-e14b-4542-899b-ed03ea50a625" ActionType="Folder">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_ffxivzoneid}" ExpressionTypeL="String" ExpressionR="1230" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" FolderOp="CancelFolder" FolderId="6b375e8b-87c1-47fc-b89e-5157ae648393" ActionType="Folder">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_ffxivzoneid}" ExpressionTypeL="String" ExpressionR="1232" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="场地标点" Id="b88412d9-6123-4495-9643-a7ff49767fe5" RegularExpression="^.{15}\S+ 21:.{8}:40000001">
<Actions>
<Action OrderNumber="1" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, 0&#13;&#10;Scale: 5&#13;&#10;A:  0, -2&#13;&#10;B:  2,  0&#13;&#10;C:  0,  1.6&#13;&#10;D: -2,  0&#13;&#10;1: -2, -1&#13;&#10;2:  2, -1&#13;&#10;3:  2,  1&#13;&#10;4: -2,  1&#13;&#10;Local: false" ActionType="NamedCallback">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_ffxivzoneid}" ExpressionTypeL="String" ExpressionR="1226" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Circle&#13;&#10;O: 100, 100, 0&#13;&#10;Waymarks: A1D4C3B2&#13;&#10;R:  8.25&#13;&#10;R2: 8.1√2&#13;&#10;Local: false" ActionType="NamedCallback">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_ffxivzoneid}" ExpressionTypeL="String" ExpressionR="1228" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Circle&#13;&#10;O: 100, 100, 0&#13;&#10;Waymarks: A1D4C3B2&#13;&#10;R:  6.1√2&#13;&#10;Local: false" ActionType="NamedCallback">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_ffxivzoneid}" ExpressionTypeL="String" ExpressionR="1230" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Circle&#13;&#10;O: 100, 100, 0&#13;&#10;Waymarks: A1D4C3B2&#13;&#10;R:  10&#13;&#10;R2: 5√2&#13;&#10;Local: false" ActionType="NamedCallback">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_ffxivzoneid}" ExpressionTypeL="String" ExpressionR="1232" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="8680dbc4-bb95-44d7-b65c-9ba36eedefb2" Name="M1-4n" Enabled="true">
<Folders>
<Folder FFXIVZoneFilterEnabled="True" FfxivZoneFilterRegularExpression="^1227$" Id="8761fa34-4c7e-42ff-a404-0867431e8fbb" ZoneFilterRegularExpression="[M級]3" Name="M2" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="直线 LockOn" Id="c629c991-ef06-4a7f-869c-6d9ae945189e" RegularExpression="^.{15}\S+ 107:(?&lt;sid&gt;4.{7}):917E:">
<Actions>
<Action OrderNumber="1" NamedCallbackName="LockOn" NamedCallbackParam="${_entity[${sid}].address}, g3d2_lazer_8_42_0t" ActionType="NamedCallback" ExecutionDelayExpression="700" Asynchronous="False" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder FFXIVZoneFilterEnabled="True" FfxivZoneFilterRegularExpression="^1231$" Id="ab45a4ed-102b-4566-8133-1cdec1e705f2" Name="M4" Enabled="true">
<Folders>
<Folder Id="c22bf2ad-9722-4dbf-836c-f391a5ad8b00" Name="前后激光" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="前后激光" Id="718652b2-49ff-475e-8b16-6082ef71136d" RegularExpression="^.{15}\S+ 1A:B9A:([^:]*:){6}2D(?&lt;type&gt;3|4):" PrevActions="Interrupt">
<Actions>
<Action OrderNumber="1" ListVariableOp="Push" ListVariableName="M4n_激光" ListVariableExpression="${?d: 3 = 后, 4 = 前 [${type}]}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="2" UseTTSTextExpression="${l:M4n_激光[-1]}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="3" ListVariableOp="Push" ListVariableName="M4n_激光_穿" ListVariableExpression="${f:ifequal(${l:M4n_激光[-1]}, &quot;停&quot;, &quot;穿&quot;):${l:M4n_激光[-2]}}" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:M4n_激光.size}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="NumericGreater" />
</Condition>
</Action>
<Action OrderNumber="4" NamedCallbackName="command" NamedCallbackParam="/e &#13;&#10;　${l:M4n_激光.join(&quot;  &quot;)}&#13;&#10;　  ${l:M4n_激光_穿.join(&quot;  &quot;)}" ActionType="NamedCallback" Asynchronous="False" />
<Action OrderNumber="5" ListVariableName="M4n_激光" ActionType="ListVariable" ExecutionDelayExpression="5000" Asynchronous="False" />
<Action OrderNumber="6" ListVariableName="M4n_激光_穿" ActionType="ListVariable" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="播报" Id="fcebb133-d789-4fd4-a9f0-0d4a88fb252f" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:(?&lt;aid&gt;92AD|92B0|9B4F|9B5[567]):[^:]*:[^:]*:[^:]*:(?&lt;t&gt;[^:]+):">
<Actions>
<Action OrderNumber="1" ListVariableOp="Copy" ListVariableName="M4n_激光_穿" ListVariableTarget="tmp_激光_穿" ActionType="ListVariable" ExecutionDelayExpression="${t} * 1000" Asynchronous="False" />
<Action OrderNumber="2" UseTTSTextExpression="${l:tmp_激光_穿[1]}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="3" UseTTSTextExpression="${l:tmp_激光_穿[2]}" ActionType="UseTTS" ExecutionDelayExpression="1725" Asynchronous="False" />
<Action OrderNumber="4" UseTTSTextExpression="${l:tmp_激光_穿[3]}" ActionType="UseTTS" ExecutionDelayExpression="1725" Asynchronous="False" />
<Action OrderNumber="5" UseTTSTextExpression="${l:tmp_激光_穿[4]}" ActionType="UseTTS" ExecutionDelayExpression="1725" Asynchronous="False" />
<Action OrderNumber="6" UseTTSTextExpression="${l:tmp_激光_穿[5]}" ActionType="UseTTS" ExecutionDelayExpression="1725" Asynchronous="False" />
<Action OrderNumber="7" UseTTSTextExpression="${l:tmp_激光_穿[6]}" ActionType="UseTTS" ExecutionDelayExpression="1725" Asynchronous="False" />
<Action OrderNumber="8" ListVariableName="tmp_激光_穿" ActionType="ListVariable" Asynchronous="False" />
</Actions>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers>
<Trigger Enabled="true" Name="分身左右刀（绝对方向）" Id="928b825d-b6b4-4772-bddb-b4338370d8a1" RegularExpression="^.{15}\S+ 111:(?&lt;id&gt;4.{7}):003F:(?&lt;wid&gt;21|79):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${?d: 0=前, 1=左, 2=后, 3=右 [${n: roundir(${_entity[${id}].h} + (${wid} = 21 ? pi/2 : -pi/2), 4)}]}" ActionType="UseTTS" ExecutionDelayExpression="500" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="碎地板" Id="4921c4b4-5611-4139-9ff8-2b2036a45067" RegularExpression="^.{15}\S+ 15:4.{7}:[^:]+:92A(?&lt;type&gt;C|B):">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="M4n_离子簇_x" VariableExpression="${type} == C ? 85 : 115" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scaleX: ${v:M4n_离子簇_x} &gt; 100 ? 1 : -1&#13;&#10;&#13;&#10;4: 0.00, -18&#13;&#10;3: 3.73, -18&#13;&#10;2: 7.46, -18&#13;&#10;1: 11.2, -18 &#13;&#10;D: 15, -18 &#13;&#10;C: 15, -12 &#13;&#10;B: 15, -6 &#13;&#10;A: 15, -0 " ActionType="NamedCallback" Asynchronous="False" Description="安全侧" DescBgColor="dff" DescriptionOverride="True" />
<Action OrderNumber="3" UseTTSTextExpression="${?d: C = 左, B = 右 [${type}]}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="clear" ActionType="NamedCallback" ExecutionDelayExpression="9500" Asynchronous="False" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="本体左右刀" Id="f2f8c8b3-3995-4307-88b8-f572c2c2b3c6" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:(?&lt;aid&gt;92B[CD]):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${?d: 92BC=左, 92BD=右 [${aid}]}" ActionType="UseTTS" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder FFXIVZoneFilterEnabled="True" FfxivZoneFilterRegularExpression="^1229$" Id="2562899b-3a9f-4d31-a1b1-b037bd809545" ZoneFilterRegularExpression="[M級]3" Name="M3" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="冲两次" Id="2d957a27-6ed1-4643-9358-aab68aa3fd4e" RegularExpression="^.{15}\S+ 107:4.{7}:9AD(?&lt;type&gt;[CDEF]):(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="去${?d: C = 右, D = 右, E = 左, F = 左 [${type}]}侧，然后${?d: C = 对穿, D = 同侧, E = 对穿, F = 同侧 [${type}]}" ActionType="UseTTS" />
<Action OrderNumber="2" UseTTSTextExpression="${?d: C = 穿到对侧, D = 留在同侧, E = 穿到对侧, F = 留在同侧 [${type}]}" ActionType="UseTTS" ExecutionDelayExpression="5600" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="冲一次" Id="bcaf8efa-e0fe-4d0f-98e6-be87690f830f" RegularExpression="^.{15}\S+ 107:4.{7}:9AD(?&lt;type&gt;[45]):(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="去${?d: 4 = 右, 5 = 左 [${type}]}侧" ActionType="UseTTS" />
</Actions>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers />
</Folder>
<Folder FFXIVZoneFilterEnabled="True" FfxivZoneFilterRegularExpression="^1226$" Id="06acefa4-7d1a-4752-800f-5e82910a75fb" ZoneFilterRegularExpression="[M級]1" Name="M1s by 阿洛" Enabled="true">
<Folders>
<Folder Id="1885bfe5-7338-4bcd-8073-1f3cd1f1ef51" Name="杂项" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="AoE Bloody Scratch" Id="6591bb26-3510-4642-a58d-37526f506c0c" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9494:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="AoE" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="死刑 Biscuit Maker" Id="43c644d2-6c15-45b9-acbf-b8220e7b6245" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9495:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="死刑换T" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_me.isT}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="2" UseTTSTextExpression="换T死刑" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_me.isH}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" UseTTSTextExpression="死刑" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_me.isM}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_me.isTH}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="开场引导扇形" Id="ff2de3a6-0481-42e8-80e8-720c2dbd3f04" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:943C:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${?d: 0 = 斜点出圈, 1 = 正点引导 [${_me.isTH}]}" ActionType="UseTTS" />
<Action OrderNumber="2" ActionType="Placeholder" ExecutionDelayExpression="5500" />
<Action OrderNumber="3" UseTTSTextExpression="${?d: 0 = 正点引导, 1 = 斜点出圈 [${_me.isTH}]}" ActionType="UseTTS" />
<Action OrderNumber="4" ActionType="Placeholder" ExecutionDelayExpression="3000" />
<Action OrderNumber="5" UseTTSTextExpression="去斜点" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="恢复地板 击退分散" Id="fb439fd9-4f92-4dd5-9569-f72f9fab4085" RegularExpression="^.{15}\S+ 101:.{8}:00080004:0(?&lt;type&gt;0|3)">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="击退，${?d: 0 = 左上、右下, 3 = 右上、左下 [${type}]}，场地基准" ActionType="UseTTS" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;θ: ${type} ? -π/4 : π/4&#13;&#10;&#13;&#10;3: 0,  3.6&#13;&#10;1: 0,  1.2&#13;&#10;2: 0, -1.2&#13;&#10;4: 0, -3.6" ActionType="NamedCallback" DescBgColor="dff" />
<Action OrderNumber="3" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="8300" DescBgColor="dff" />
<Action OrderNumber="4" UseTTSTextExpression="分散" ActionType="UseTTS" ExecutionDelayExpression="700" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="阶段：Nine Lives" Id="ba76201b-d142-4440-89d7-fdbeb0d52b5c" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9461:">
<Actions>
<Action OrderNumber="1" VariableOp="Increment" VariableName="M1s_phase" ActionType="Variable" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="75b7cf90-637b-47f3-acf4-94aa94185735" Name="B. 拆地板" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="3. 地板形状（外）" Id="241787e2-e82d-4a72-9413-ab82a5e884b2" RegularExpression="^M1s_floor:(\d)(\d)(\d)$">
<Actions>
<Action OrderNumber="1" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scaleX: $1 ? 1 : -1&#13;&#10;θ: $3 ? -π : -π/2&#13;&#10;&#13;&#10;1: 5, -15&#13;&#10;4: -5, 15" ActionType="NamedCallback" DescBgColor="dff" />
<Action OrderNumber="2" UseTTSTextExpression="${?d: 0 = 横向, 1 = 竖向 [$3]}" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="0. 初始化 （AoE）" Id="e34b6857-8d6b-4909-8ea1-8bb1d202c2b6" RegularExpression="^.{15}\S+ 107:4.{7}:9494:">
<Actions>
<Action OrderNumber="1" VariableName="M1s_floor" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1. 获取地板攻击" Id="3caea526-5636-4b11-b9d4-d35cd41bdeb9" RegularExpression="^.{15}\S+ 107:4.{7}:(9443|996C):(?&lt;x&gt;11[45][^:]+|9[45][^:]+):(79|80)" Description="&#13;&#10;□□□□&#13;&#10;■□■□&#13;&#10;□■□■&#13;&#10;□□□□&#13;&#10;右２３４左６７８右０&#13;&#10;2 11 13    1 8 14    7 9 16    4 6 12    3 10 15    2 5 16    4 6 13    1 9 15    3 11    8 14&#13;&#10;&#13;&#10;□■□□&#13;&#10;□□■□&#13;&#10;□■□□&#13;&#10;□□■□&#13;&#10;右２３４左６７８９右&#13;&#10;2 11 13    1 8 14    7 9 16    4 6 12    3 10 15    4 5 13    1 8 16    5 9 12    3 14    6 11 &#13;&#10;&#13;&#10;□□□□&#13;&#10;□■□■&#13;&#10;■□■□&#13;&#10;□□□□&#13;&#10;右２３左５６７左９０&#13;&#10;4 5 11    7 12 14    2 13 15    1 8 10    3 6 16    2 9 15    5 7 16    1 4 10    3 13    12 14&#13;&#10;&#13;&#10;□□■□&#13;&#10;□■□□&#13;&#10;□□■□&#13;&#10;□■□□&#13;&#10;右２３左５６７左９０&#13;&#10;4 5 11    7 12 14    2 13 15    1 8 10    3 6 16    4 9 15    1 7 13    5 8 10    2 16    9 12">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="地板从左上向右依次编号为 1-16，四种情况：" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" Description="2 11 13    1 8 14    7 9 16    4 6 12    3 10 15    2 5 16    4 6 13    1 9 15    3 11    8 14 （反～型）" DescriptionOverride="True" />
<Action OrderNumber="3" ActionType="Placeholder" Description="2 11 13    1 8 14    7 9 16    4 6 12    3 10 15    4 5 13    1 8 16    5 9 12    3 14    6 11 （反Ｓ型）" DescriptionOverride="True" />
<Action OrderNumber="4" ActionType="Placeholder" Description="4 5 11    7 12 14    2 13 15    1 8 10    3 6 16    2 9 15    5 7 16    1 4 10    3 13    12 14（～型）" DescriptionOverride="True" />
<Action OrderNumber="5" ActionType="Placeholder" Description="4 5 11    7 12 14    2 13 15    1 8 10    3 6 16    4 9 15    1 7 13    5 8 10    2 16    9 12 （Ｓ型）" DescriptionOverride="True" />
<Action OrderNumber="6" ActionType="Placeholder" Description="只检查 2/4 号地板，即第一行 2/4 列：第一次可判断如何躲避，第三次可判断地板具体形状" DescriptionOverride="True" />
<Action OrderNumber="7" ActionType="Placeholder" Description="详见描述" DescriptionOverride="True" />
<Action OrderNumber="8" VariableOp="SetString" VariableName="M1s_floor" VariableExpression="${v:M1s_floor}${n: ${x} &gt; 100}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="9" LogMessageText="M1s_floor:${v:M1s_floor}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 躲避方式 + 地板形状（内）" Id="cb12b390-2cf8-4ce3-9419-78d7cbcf8707" RegularExpression="^M1s_floor:(\d)$">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="2 11 13    1 8 14    7 9 16    4 6 12    3 10 15    2 5 16    4 6 13    1 9 15    3 11    8 14 （反～型）" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" Description="2 11 13    1 8 14    7 9 16    4 6 12    3 10 15    4 5 13    1 8 16    5 9 12    3 14    6 11 （反Ｓ型）" DescriptionOverride="True" />
<Action OrderNumber="3" ActionType="Placeholder" Description="4 5 11    7 12 14    2 13 15    1 8 10    3 6 16    2 9 15    5 7 16    1 4 10    3 13    12 14（～型）" DescriptionOverride="True" />
<Action OrderNumber="4" ActionType="Placeholder" Description="4 5 11    7 12 14    2 13 15    1 8 10    3 6 16    4 9 15    1 7 13    5 8 10    2 16    9 12 （Ｓ型）" DescriptionOverride="True" />
<Action OrderNumber="5" UseTTSTextExpression="左下开始，${?d: 0 = 穿两次, 1 = 穿一次 [$1]}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scaleX: $1 ? 1 : -1&#13;&#10;&#13;&#10;1: fakeclear&#13;&#10;2: 5, -5&#13;&#10;3: -5, 5&#13;&#10;4: fakeclear" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="7" LogProcess="True" UseTTSTextExpression="去右下，${?d: 0=稍后回去, 1 = 不要回去 [$1]}" ActionType="UseTTS" ExecutionDelayExpression="11000" Asynchronous="False" />
<Action OrderNumber="8" LogProcess="True" UseTTSTextExpression="回左下" ActionType="UseTTS" ExecutionDelayExpression="4000" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="$1" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="9" VariableName="M1s_floor" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="10" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="65000" Asynchronous="False" DescBgColor="dff" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="4b00ec66-a71e-46c7-9b4f-778409b743f2" Name="C. 击飞/眩晕" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="1.1 读条击飞/眩晕 Elevate ..." Id="72dac0cd-47c2-4dc9-a02b-1b7c6956c707" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:944(?&lt;type&gt;6|8):">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="M1s_punch_isStun" VariableExpression="${type} == 8" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="Increment" VariableName="M1s_punch_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="M1s_punch:${n: ${v:M1s_punch_n} / 2}:${v:M1s_punch_tid}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M1s_punch_n} % 2" ExpressionTypeL="Numeric" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 播报点名" Id="d05762ca-438c-4172-acf3-8da9f713fa4b" RegularExpression="^M1s_punch:(?&lt;n&gt;\d):(?&lt;tid&gt;.{8})">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="首次点名，不是自己：" DescriptionOverride="True" />
<Action OrderNumber="2" Asynchronous="False" />
<Action OrderNumber="3" UseTTSTextExpression="${?d: 0 = 击飞, 1 = 原地眩晕 [${v:M1s_punch_isStun}]}，点名${?d: 0=T奶, 1=DPS [${_entity[${tid}].isD}]}" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${n}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="4" ActionType="Placeholder" Asynchronous="False" Description="非首次点名，不是自己：" DescriptionOverride="True" />
<Action OrderNumber="5" UseTTSTextExpression="${?d: 0 = 击飞, 1 = 原地眩晕 [${v:M1s_punch_isStun}]}" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${n}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="6" ActionType="Placeholder" Asynchronous="False" Description="点名自己：" DescriptionOverride="True" />
<Action OrderNumber="7" UseTTSTextExpression="${?d: 0 = 击飞, 1 = 原地眩晕 [${v:M1s_punch_isStun}]}点自己" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="8" NamedCallbackName="mark" NamedCallbackParam="{&#13;&#10;    &quot;ActorID&quot;: 0x${tid},&#13;&#10;    &quot;MarkType&quot;: &quot;stop1&quot;,&#13;&#10;    &quot;LocalOnly&quot;: true &#13;&#10;}" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dfd" />
<Action OrderNumber="9" NamedCallbackName="mark" NamedCallbackParam="{&#13;&#10;    &quot;ActorID&quot;: 0xE0000000,&#13;&#10;    &quot;MarkType&quot;: &quot;stop1&quot;,&#13;&#10;    &quot;LocalOnly&quot;: true &#13;&#10;}" ActionType="NamedCallback" ExecutionDelayExpression="10 * 1000" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1.2 获取点名" Id="43ff68e9-befa-462c-b87d-ed3815e8e2c0" RegularExpression="^.{15}\S+ 1B:(?&lt;tid&gt;1.{7}):[^:]*:[^:]*:[^:]*:021A">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="M1s_punch_tid" VariableExpression="${tid}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="Increment" VariableName="M1s_punch_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="M1s_punch:${n: ${v:M1s_punch_n} / 2}:${v:M1s_punch_tid}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M1s_punch_n} % 2" ExpressionTypeL="Numeric" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="3. 分摊 / 职能分散" Id="d11f333f-68e7-427b-b8d3-7481d637458e" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:949(?&lt;type&gt;7|9):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${?d: 7 = 分摊, 9 = 职能分散 [${type}]}" ActionType="UseTTS" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="d75a4adf-4ef0-4afb-9eea-e551dbd2a1cc" Name="A1. 记录1   原地左右刀 + 双分身左右刀" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="1. 左右刀 + 储存" Id="0474f7b3-46fd-479c-a9ba-aba9603841d0" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:943(?&lt;type&gt;6|9):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="phase = 1" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="M1s_isLSafe" VariableExpression="${type} = 6" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" SystemBeepFreqExpression="" UseTTSTextExpression="${?d: 1 = 去左侧, 0 = 去右侧 [${v:M1s_isLSafe}]}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scaleX: ${v:M1s_isLSafe} ? -1 : 1&#13;&#10;1: 1.1, -5.1&#13;&#10;3: 1.1, -1.7&#13;&#10;4: 1.1,  1.7&#13;&#10;2: 1.1,  5.1" ActionType="NamedCallback" Asynchronous="False" Description="[同] 1234 标安全侧" DescBgColor="dff" DescriptionOverride="True" />
<Action OrderNumber="5" ActionType="Placeholder" ExecutionDelayExpression="5600" Asynchronous="False" />
<Action OrderNumber="6" SystemBeepFreqExpression="" UseTTSTextExpression="穿" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="7" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scaleX: ${v:M1s_isLSafe} ? 1 : -1&#13;&#10;1: 1.1, -5.1&#13;&#10;3: 1.1, -1.7&#13;&#10;4: 1.1,  1.7&#13;&#10;2: 1.1,  5.1" ActionType="NamedCallback" Asynchronous="False" Description="[同] 1234 标安全侧" DescBgColor="dff" DescriptionOverride="True" />
<Action OrderNumber="8" ActionType="Placeholder" ExecutionDelayExpression="3000" Asynchronous="False" />
<Action OrderNumber="9" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M1s_phase}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="3. 播报" Id="921b13fd-a250-4473-9d9b-1a6608bff960" RegularExpression="^M1s_分身1">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="phase = 1" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" Description="两个分身的向量和的 dir-8" DescriptionOverride="True" />
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="tmp_dir-8" VariableExpression="roundvec(${v:M1s_分身1_Σx} - 200, ${v:M1s_分身1_Σy} - 200, -8)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" ActionType="Placeholder" Description="增加左右刀的偏移（90 度）" DescriptionOverride="True" />
<Action OrderNumber="5" VariableOp="SetNumeric" VariableName="tmp_dir-8" VariableExpression="(${v:tmp_dir-8} + (${v:M1s_isLSafe} ? -2 : 2)) %% 8" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="6" VariableOp="SetNumeric" VariableName="tmp_θ" VariableExpression="(${v:tmp_dir-8} + 0.5) * π/4 - π" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="7" ActionType="Placeholder" Description="播报" DescriptionOverride="True" />
<Action OrderNumber="8" VariableOp="SetString" VariableName="tmp_directionStr" VariableExpression="${?d: 0=上偏左, 1=左偏上, 2=左偏下, 3=下偏左, 4=下偏右, 5=右偏下, 6=右偏上, 7=上偏右 [${v:tmp_dir-8}]}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="9" UseTTSTextExpression="${v:tmp_directionStr}安全" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="10" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;θ: ${v:tmp_θ}&#13;&#10;1: 0, -2&#13;&#10;2: 0, -5&#13;&#10;3: 0, -8&#13;&#10;4: 0, -11" ActionType="NamedCallback" Asynchronous="False" Description="[同] 1234 标安全方向" DescBgColor="dff" DescriptionOverride="True" />
<Action OrderNumber="11" VariableName="tmp_dir-8" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="12" VariableName="tmp_θ" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="13" ActionType="Placeholder" ExecutionDelayExpression="14300" />
<Action OrderNumber="14" UseTTSTextExpression="去${v:tmp_directionStr}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="15" VariableName="tmp_directionStr" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="16" ActionType="Placeholder" ExecutionDelayExpression="5800" />
<Action OrderNumber="17" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="18" UseTTSTextExpression="穿到对侧" ActionType="UseTTS" Asynchronous="False" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M1s_phase}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="2. 获取分身" Id="77653ddb-a385-4b42-be3c-958af5fe9fe0" RegularExpression="^.{15}\S+ AA:10F:4.{7}:[^:]*:17196:(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):(?&lt;z&gt;[^:]+):(?&lt;h&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="phase = 1" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="Increment" VariableName="M1s_分身1_Σx" VariableExpression="${x}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="Increment" VariableName="M1s_分身1_Σy" VariableExpression="${y}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" LogMessageText="M1s_分身1" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M1s_分身1_Σy}" ExpressionTypeL="String" ExpressionR="150" ExpressionTypeR="String" ConditionType="NumericGreater" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M1s_phase}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
</Triggers>
</Folder>
<Folder Id="aeff8438-9cee-4af8-8efd-4ab74eea58ac" Name="A2. 记录2   2/4分摊 + 跳跃扇形 + 分身2/4分摊" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="1. 分摊 + 储存" Id="efccc3e5-419a-49f6-aad7-1a58fd08f586" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:945(?&lt;type&gt;D|F):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="phase = 2" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="M1s_isDouble" VariableExpression="${type} == F" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" SystemBeepFreqExpression="" UseTTSTextExpression="准备${?d: 0 = 两人分摊, 1 = 四四分摊 [${v:M1s_isDouble}]}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;&#13;&#10;1: 0, -6&#13;&#10;2: 6, 0&#13;&#10;3: 0, 6&#13;&#10;4: -6, 0" ActionType="NamedCallback" Asynchronous="False" Description="[同] 两人" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M1s_isDouble}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;&#13;&#10;1: -6, 1&#13;&#10;2: 6, 1&#13;&#10;3: 6, -1&#13;&#10;4: -6, -1" ActionType="NamedCallback" Asynchronous="False" Description="[同] 双组" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M1s_isDouble}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" ActionType="Placeholder" ExecutionDelayExpression="5000" Asynchronous="False" />
<Action OrderNumber="7" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M1s_phase}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="2. 跳跃扇形" Id="7fcb3976-5a6d-4502-8340-563b6104e975" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:(?&lt;aid&gt;9457|982F):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="phase = 2" DescriptionOverride="True" />
<Action OrderNumber="2" UseTTSTextExpression="跳到${?d: 9457 = 左西, 982F = 右东 [${aid}]}，${?d: 0 = 斜点出圈, 1 = 正点引导 [${_me.isTH}]}" ActionType="UseTTS" />
<Action OrderNumber="3" ActionType="Placeholder" ExecutionDelayExpression="6600" />
<Action OrderNumber="4" UseTTSTextExpression="${?d: 0 = 正点引导, 1 = 斜点出圈 [${_me.isTH}]}" ActionType="UseTTS" />
<Action OrderNumber="5" ActionType="Placeholder" ExecutionDelayExpression="3000" />
<Action OrderNumber="6" UseTTSTextExpression="去斜点，稍后${?d: 0 = 两人分摊, 1 = 四四分摊 [${v:M1s_isDouble}]}" ActionType="UseTTS" />
<Action OrderNumber="7" ActionType="Placeholder" ExecutionDelayExpression="3000" />
<Action OrderNumber="8" UseTTSTextExpression="${?d: 0 = 两人分摊, 1 = 四四分摊 [${v:M1s_isDouble}]}" ActionType="UseTTS" />
<Action OrderNumber="9" ActionType="Placeholder" ExecutionDelayExpression="3000" />
<Action OrderNumber="10" UseTTSTextExpression="准备 AoE" ActionType="UseTTS" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M1s_phase}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
</Triggers>
</Folder>
<Folder Id="c6de4849-5e4c-4da0-8e9d-b9736689f155" Name="A3. 记录34  跳跃左右刀 + 跳跃扇形" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="2. 记录跳跃左右刀" Id="85387e90-7a72-4fbe-8881-b9bc9d014377" RegularExpression="^.{15}\S+ AA:10F:(?&lt;id&gt;4.{7}):[^:]*:17196:(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):(?&lt;z&gt;[^:]+):(?&lt;h&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="phase = 3" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="M1s_LeapLR_isR" VariableExpression="${v:M1s_LeapLR_isOriginalR} = (${y} &gt; 100)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="M1s_LeapLR_isS" VariableExpression="${y} &gt; 100" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" VariableOp="SetString" VariableName="M1s_Leap_${id}_isFan" VariableExpression="0" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="5" UseTTSTextExpression="${f:pick(${n: ${y} &gt; 100 }): 北侧, 南侧}记录${f:pick(${v:M1s_LeapLR_isR}): 左, 右}${f:pick(${v:M1s_LeapLR_isOut}): 内, 外}" ActionType="UseTTS" Asynchronous="False" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M1s_phase}" ExpressionTypeL="String" ExpressionR="3" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="1. 跳跃左右刀 Leaping One-two Paw" Id="76205432-e554-4164-b024-481d66877593" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:(?&lt;aid&gt;944[DEF]|9450):" PrevActionsRefire="Deny" PeriodRefire="Deny" RefirePeriodExpression="10000">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="跳跃左右刀，${?d: 944D = 左外, 944E = 左内, 944F = 右内, 9450 = 右外 [${aid}]}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="M1s_LeapLR_isOriginalR" VariableExpression="${aid} == 944F || ${aid} == 9450" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="M1s_LeapLR_isOut" VariableExpression="${aid} == 944D || ${aid} == 9450" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scaleX: (${v:M1s_LeapLR_isOriginalR} ? 1 : -1) * (${v:M1s_LeapLR_isOut} ? 11.1 : 8.9)&#13;&#10;&#13;&#10;1: 1, -5.1&#13;&#10;3: 1, -1.7&#13;&#10;4: 1,  1.7&#13;&#10;2: 1,  5.1" ActionType="NamedCallback" Asynchronous="False" Description="[同] 1234 标安全侧" DescBgColor="dff" DescriptionOverride="True" />
<Action OrderNumber="5" ActionType="Placeholder" ExecutionDelayExpression="6800" Asynchronous="False" />
<Action OrderNumber="6" UseTTSTextExpression="穿" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="7" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scaleX: (${v:M1s_LeapLR_isOriginalR} ? 1 : -1) * (${v:M1s_LeapLR_isOut} ? 8.9 : 11.1)&#13;&#10;&#13;&#10;1: 1, -5.1&#13;&#10;3: 1, -1.7&#13;&#10;4: 1,  1.7&#13;&#10;2: 1,  5.1" ActionType="NamedCallback" Asynchronous="False" Description="[同] 1234 标安全侧" DescBgColor="dff" DescriptionOverride="True" />
<Action OrderNumber="8" ActionType="Placeholder" ExecutionDelayExpression="2000" Asynchronous="False" />
<Action OrderNumber="9" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="3. 跳跃扇形" Id="1a7d383f-2bf3-43d3-84ae-0051669e48a2" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:(?&lt;aid&gt;9457|982F):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="phase = 4" DescriptionOverride="True" />
<Action OrderNumber="2" UseTTSTextExpression="跳到${?d: 9457 = 左侧, 982F = 右侧 [${aid}]}，${?d: 0 = 斜点出圈, 1 = 正点引导 [${_me.isTH}]}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="3" ActionType="Placeholder" Asynchronous="False" Description="若跳跃左右刀原本和存储的方向相反，则说明跳跃扇形原本和储存的方向相同" DescriptionOverride="True" />
<Action OrderNumber="4" VariableOp="SetNumeric" VariableName="M1s_LeapFan_isR" VariableExpression="(${aid} == 982F) = (${v:M1s_LeapLR_isR} != ${v:M1s_LeapLR_isOriginalR})" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="5" VariableOp="SetNumeric" VariableName="M1s_Leap_isSameSide" VariableExpression="${v:M1s_LeapFan_isR} == ${v:M1s_LeapLR_isR}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="6" ActionType="Placeholder" ExecutionDelayExpression="6600" Asynchronous="False" />
<Action OrderNumber="7" UseTTSTextExpression="${?d: 0 = 正点引导, 1 = 斜点出圈 [${_me.isTH}]}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="8" ActionType="Placeholder" ExecutionDelayExpression="3000" Asynchronous="False" />
<Action OrderNumber="9" UseTTSTextExpression="去斜点" ActionType="UseTTS" Asynchronous="False" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M1s_phase}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="4. 记录跳跃扇形" Id="3939f080-e4d5-47d6-b9fd-6f5da69b1160" RegularExpression="^.{15}\S+ AA:10F:(?&lt;id&gt;4.{7}):[^:]*:17196:(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):(?&lt;z&gt;[^:]+):(?&lt;h&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="phase = 4" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetString" VariableName="M1s_Leap_${id}_isFan" VariableExpression="1" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" UseTTSTextExpression="${f:pick(${n: ${y} &gt; 100 }): 北侧, 南侧}${f:pick(${v:M1s_LeapFan_isR}): 左, 右}扇形，${f:pick(${n: ${y} &gt; 100 }): 南侧, 北侧}${f:pick(${v:M1s_LeapLR_isR}): 左, 右}${f:pick(${v:M1s_LeapLR_isOut}): 内, 外}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="4" ActionType="Placeholder" Description="用于连线分身触发机制播报的标识" DescriptionOverride="True" />
<Action OrderNumber="5" VariableOp="SetString" VariableName="M1s_Leap_recorded" VariableExpression="1" ActionType="Variable" ExecutionDelayExpression="2000" Asynchronous="False" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M1s_phase}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="5. 激活分身 =&gt; 6" Id="01101f21-523e-4387-8d1e-a98fd4516527" RegularExpression="^.{15}\S+ 23:(?&lt;id&gt;4.{7}):[^:]*:.{8}:[^:]*:[^:]*:[^:]*:0066">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="${v:M1s_Leap_recorded} = 1" DescriptionOverride="True" />
<Action OrderNumber="2" LogMessageText="M1s_Leap:isFan:${v:M1s_Leap_${id}_isFan}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
<Action OrderNumber="3" VariableName="M1s_Leap_recorded" ActionType="Variable" Asynchronous="False" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M1s_Leap_recorded}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="6.1 先左右刀" Id="50ef0848-36a1-431a-a028-287c5608bdbd" RegularExpression="^M1s_Leap:isFan:0">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="去${f:pick(${v:M1s_LeapLR_isR}): 左侧, 右侧}${f:pick(${v:M1s_LeapLR_isOut}): 场内, 场外}，双分摊" ActionType="UseTTS" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scaleX: (${v:M1s_LeapLR_isR} ? 1 : -1) * (${v:M1s_LeapLR_isOut} ? 11.1 : 8.9)&#13;&#10;&#13;&#10;1: 1, -5&#13;&#10;3: 1, -3&#13;&#10;4: 1,  3&#13;&#10;2: 1,  5" ActionType="NamedCallback" Asynchronous="False" Description="[同] 1234 标安全侧" DescBgColor="dff" DescriptionOverride="True" />
<Action OrderNumber="3" ActionType="Placeholder" ExecutionDelayExpression="16000" Asynchronous="False" />
<Action OrderNumber="4" SystemBeepFreqExpression="" UseTTSTextExpression="穿" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="5" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scaleX: (${v:M1s_LeapLR_isR} ? 1 : -1) * (${v:M1s_LeapLR_isOut} ? 8.9 : 11.1)&#13;&#10;&#13;&#10;1: 1, -5&#13;&#10;3: 1, -3&#13;&#10;4: 1,  3&#13;&#10;2: 1,  5" ActionType="NamedCallback" Asynchronous="False" Description="[同] 1234 标安全侧" DescBgColor="dff" DescriptionOverride="True" />
<Action OrderNumber="6" ActionType="Placeholder" ExecutionDelayExpression="2000" Asynchronous="False" />
<Action OrderNumber="7" SystemBeepFreqExpression="" UseTTSTextExpression="${f:pick(${v:M1s_Leap_isSameSide}): 去对侧, 在同侧}引导扇形" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="8" NamedCallbackName="AdvWm" NamedCallbackParam="action: circle&#13;&#10;center: (${v:M1s_LeapFan_isR} ? 110 : 90), (${v:M1s_LeapLR_isS} ? 95 : 105), 0&#13;&#10;r: 3&#13;&#10;θ: ${v:M1s_LeapLR_isS} ? 0 : π&#13;&#10;waymarks: 1432" ActionType="NamedCallback" Asynchronous="False" Description="[同] 1234 标分身正点" DescBgColor="dff" DescriptionOverride="True" />
<Action OrderNumber="9" ActionType="Placeholder" ExecutionDelayExpression="25000" Asynchronous="False" />
<Action OrderNumber="10" Asynchronous="False" />
<Action OrderNumber="11" ActionType="Placeholder" ExecutionDelayExpression="9000" Asynchronous="False" />
<Action OrderNumber="12" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="6.2 先扇形" Id="c898e800-8e9a-49b4-971f-2fead6ee202e" RegularExpression="^M1s_Leap:isFan:1">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="去${f:pick(${v:M1s_LeapFan_isR}): 左侧, 右侧}引导扇形" ActionType="UseTTS" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="action: circle&#13;&#10;center: (${v:M1s_LeapFan_isR} ? 110 : 90), (${v:M1s_LeapLR_isS} ? 95 : 105), 0&#13;&#10;r: 3&#13;&#10;θ: ${v:M1s_LeapLR_isS} ? 0 : π&#13;&#10;waymarks: 1432" ActionType="NamedCallback" Asynchronous="False" Description="[同] 1234 标分身正点" DescBgColor="dff" DescriptionOverride="True" />
<Action OrderNumber="3" ActionType="Placeholder" ExecutionDelayExpression="17000" Asynchronous="False" />
<Action OrderNumber="4" Asynchronous="False" />
<Action OrderNumber="5" ActionType="Placeholder" ExecutionDelayExpression="10000" Asynchronous="False" />
<Action OrderNumber="6" UseTTSTextExpression="${f:pick(${v:M1s_Leap_isSameSide}): 去对侧, 在同侧}，${f:pick(${v:M1s_LeapLR_isOut}): 场内, 场外}，双分摊" ActionType="UseTTS" />
<Action OrderNumber="7" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scaleX: (${v:M1s_LeapLR_isR} ? 1 : -1) * (${v:M1s_LeapLR_isOut} ? 11.1 : 8.9)&#13;&#10;&#13;&#10;1: 1, -5&#13;&#10;3: 1, -3&#13;&#10;4: 1,  3&#13;&#10;2: 1,  5" ActionType="NamedCallback" Asynchronous="False" Description="[同] 1234 标安全侧" DescBgColor="dff" DescriptionOverride="True" />
<Action OrderNumber="8" ActionType="Placeholder" ExecutionDelayExpression="20000" Asynchronous="False" />
<Action OrderNumber="9" SystemBeepFreqExpression="" UseTTSTextExpression="穿" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="10" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scaleX: (${v:M1s_LeapLR_isR} ? 1 : -1) * (${v:M1s_LeapLR_isOut} ? 8.9 : 11.1)&#13;&#10;&#13;&#10;1: 1, -5&#13;&#10;3: 1, -3&#13;&#10;4: 1,  3&#13;&#10;2: 1,  5" ActionType="NamedCallback" Asynchronous="False" Description="[同] 1234 标安全侧" DescBgColor="dff" DescriptionOverride="True" />
<Action OrderNumber="11" ActionType="Placeholder" ExecutionDelayExpression="2000" Asynchronous="False" />
<Action OrderNumber="12" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="false" Source="None" Name="Debug Log 2024-08-01 02:32" Id="12f7fc08-51d8-495e-8b8a-a0f7c0f6b9c3" RegularExpression="">
<Actions>
<Action OrderNumber="1" LogMessageText="[20:10:38.340] 260 104:1:1:0:1" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="2" ActionType="Placeholder" ExecutionDelayExpression="1.70 * 1000" />
<Action OrderNumber="3" LogMessageText="[20:10:38.340] StartsCasting 14:400141E2:Black Cat:9461:Nine Lives:400141E2:Black Cat:2.700:99.99:99.99:0.00:-3.11" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="4" LogMessageText="[20:11:07.831] StartsCasting 14:400141E2:Black Cat:9461:Nine Lives:400141E2:Black Cat:2.700:99.99:99.99:0.00:3.14" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="5" LogMessageText="[20:14:04.748] StartsCasting 14:400141E2:Black Cat:9461:Nine Lives:400141E2:Black Cat:2.700:99.99:99.99:0.00:3.13" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="6" ActionType="Placeholder" ExecutionDelayExpression="1.70 * 1000" />
<Action OrderNumber="7" LogMessageText="[20:14:09.827] StartsCasting 14:400141E2:Black Cat:944D:Leaping One-two Paw:400141E2:Black Cat:4.700:99.99:99.99:0.00:3.13" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="8" ActionType="Placeholder" ExecutionDelayExpression="3.65 * 1000" />
<Action OrderNumber="9" LogMessageText="[20:14:20.790] ProcessedLog AA:10F:400141E0:Soulshade:17196:100.0000:105.0000:0.0000:-3.1416" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="10" LogMessageText="[20:14:20.879] Tether 23:400141E0:Soulshade:400141E2:Black Cat:0000:0000:0066:400141E2:000F:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="11" ActionType="Placeholder" ExecutionDelayExpression="1.71 * 1000" />
<Action OrderNumber="12" LogMessageText="[20:14:25.915] StartsCasting 14:400141E2:Black Cat:9461:Nine Lives:400141E2:Black Cat:2.700:89.98:99.99:0.00:3.14" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="13" ActionType="Placeholder" ExecutionDelayExpression="1.75 * 1000" />
<Action OrderNumber="14" LogMessageText="[20:14:31.180] StartsCasting 14:400141E2:Black Cat:9457:Leaping Quadruple Crossing:400141E2:Black Cat:4.700:89.98:99.99:0.00:2.68" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="15" ActionType="Placeholder" ExecutionDelayExpression="5.63 * 1000" />
<Action OrderNumber="16" LogMessageText="[20:14:48.062] ProcessedLog AA:10F:400141DF:Soulshade:17196:100.0000:95.0000:0.0000:-0.0001" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="17" LogMessageText="[20:14:48.151] Tether 23:400141DF:Soulshade:400141E2:Black Cat:0000:0000:0066:400141E2:000F:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="18" ActionType="Placeholder" ExecutionDelayExpression="4.35 * 1000" />
<Action OrderNumber="19" LogMessageText="[20:15:32.265] Tether 23:400141E0:Soulshade:400141E2:Black Cat:0000:0000:0066:400141E2:000F:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="20" ActionType="Placeholder" ExecutionDelayExpression="10.39 * 1000" />
<Action OrderNumber="21" LogMessageText="[20:15:01.119] Tether 23:400141DF:Soulshade:400141E2:Black Cat:0000:0000:0066:400141E2:000F:0000" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
</Actions>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers />
</Folder>
<Folder FFXIVZoneFilterEnabled="True" FfxivZoneFilterRegularExpression="^1228$" Id="9fd73a73-0048-4b15-9535-ba2367fc36ca" Name="M2s by 阿洛" Enabled="true">
<Folders>
<Folder Id="5e4f403b-e49a-4ed2-86f2-f52e906e2dd6" Name="杂项" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="AoE Call Me Honey" Id="8cdaf134-126e-4d91-a598-f7cf8602cd54" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9183:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="AoE" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="钢铁 Loveseeker" Id="822a723d-b3c7-41bf-bb9c-78f8458a7d0f" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9B7E:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="钢铁" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="死刑顺劈 Stinging Slash" Id="c8be6b24-17f4-4703-868a-5e965b151e00" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:919B:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="分散死刑" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_me.isT}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="2" UseTTSTextExpression="双死刑，远离正面" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_me.isT}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="死刑分摊 Killer Sting" Id="bd3a8ebe-d399-46ba-b648-134e038d7823" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:919C:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="分摊死刑" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_me.isT}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="2" UseTTSTextExpression="双死刑" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_me.isH} || ${_me.isM}" ExpressionTypeL="Numeric" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="记录自身 1/4 场地" Id="555300c7-9632-403c-9d37-a6ba35e0fd57" RegularExpression="^.{15}\S+ 1[56]:4.{7}:[^:]+:(918[9A]|9B0[EF]):[^:]*:(?&lt;tid&gt;[^:]+):">
<Actions>
<Action OrderNumber="1" ListVariableOp="Push" ListVariableExpressionType="Numeric" ListVariableName="M2s_myDir-4" ListVariableExpression="roundvec(${_me.x} - 100, ${_me.y} - 100, -4)" ActionType="ListVariable" />
<Action OrderNumber="2" ListVariableOp="SortByKeys" ListVariableName="M2s_myDir-4" ListVariableExpression="n-: ${l:M2s_myDir-4.count(${_this})}, n-: ${_idx}" ActionType="ListVariable" />
<Action OrderNumber="3" VariableOp="SetString" VariableName="M2s_myDirText" VariableExpression="${f:pick(${l:M2s_myDir-4[1]}): 左前, 左后, 右后, 右前}" ActionType="Variable" />
<Action OrderNumber="4" ActionType="Placeholder" Description="次数最多的最后一次记录" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
</Triggers>
</Folder>
<Folder Id="25ff8571-4ba5-4241-801f-c35fbf7146bf" Name="A. 月环/直线 + 分散/分摊" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="2.2 月环 Tempting Twist" Id="a9d16732-db2a-4e6e-a327-c28f12144e3b" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:(?&lt;aid&gt;9187|9B0D):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="月环，稍后${v:M2s_myDirText}${if: ${v:M2s_isSpread} ? 分散 : 分摊 }" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="action: circle&#13;&#10;center: 100, 100, 0&#13;&#10;r: 4.75&#13;&#10;waymarks: A1D4C3B2" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="3" UseTTSTextExpression="${if: ${v:M2s_isSpread} ? 全员分散 : 两人分摊 }" ActionType="UseTTS" ExecutionDelayExpression="6400" Asynchronous="False" />
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scale: 10.4&#13;&#10;1: -1, -1&#13;&#10;2:  1, -1&#13;&#10;3:  1,  1&#13;&#10;4: -1,  1&#13;&#10;---&#13;&#10;action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scale: 10.1&#13;&#10;A: -1, -1&#13;&#10;B:  1, -1&#13;&#10;C:  1,  1&#13;&#10;D: -1,  1" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M2s_isSpread}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;A:  -9.11, -17.08&#13;&#10;B:   9.11, -17.08&#13;&#10;1: -11.52,  -8.11&#13;&#10;2:  11.52,  -8.11&#13;&#10;3: -11.52,   8.11&#13;&#10;4:  11.52,   8.11&#13;&#10;C:  -9.11,  17.08&#13;&#10;D:   9.11,  17.08" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M2s_isSpread}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" LogMessageText="M2s_cd5:4.2" LogProcess="True" ActionType="LogMessage" Asynchronous="False" />
<Action OrderNumber="7" VariableName="M2s_isSpread" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="8" ActionType="Placeholder" ExecutionDelayExpression="4600" Asynchronous="False" />
<Action OrderNumber="9" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1. 记录分散分摊 Splash/Drop of Venom/Love" Id="1c01f22b-cc0c-48ab-b6e5-1800862b1261" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:(?&lt;aid&gt;918[45]|9B0[89]):">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="M2s_isSpread" VariableExpression="${aid} == 9184 || ${aid} == 9B08" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" UseTTSTextExpression="记录${if: ${v:M2s_isSpread} ? 分散 : 分摊 }" ActionType="UseTTS" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2.1 直条  Honey Beeline" Id="6627af89-885c-44c0-8bcd-b94412ccde53" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:(?&lt;aid&gt;9186|9B0C):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="去两侧，稍后${v:M2s_myDirText}${if: ${v:M2s_isSpread} ? 分散 : 分摊 }" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;A: 0, -18.75&#13;&#10;B: 8.25,  0&#13;&#10;C: 0,  18.75&#13;&#10;D: -8.25, 0&#13;&#10;&#13;&#10;---&#13;&#10;&#13;&#10;action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scaleX: 8.25&#13;&#10;scaleY: ${v:M2s_isSpread} ? 13 : 5&#13;&#10;1: -1, -1&#13;&#10;2:  1, -1&#13;&#10;3:  1,  1&#13;&#10;4: -1,  1" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="3" UseTTSTextExpression="${if: ${v:M2s_isSpread} ? 全员分散 : 两人分摊 }" ActionType="UseTTS" ExecutionDelayExpression="6000" Asynchronous="False" />
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scale: 4.9&#13;&#10;1: -1, -1&#13;&#10;2:  1, -1&#13;&#10;3:  1,  1&#13;&#10;4: -1,  1&#13;&#10;---&#13;&#10;action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scaleX: ${v:M2s_isSpread} ? 4.75 : 4.4&#13;&#10;scaleY: ${v:M2s_isSpread} ? 13 : 4.4&#13;&#10;A: -1, -1&#13;&#10;B:  1, -1&#13;&#10;C:  1,  1&#13;&#10;D: -1,  1" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="5" VariableName="M2s_isSpread" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="6" LogMessageText="M2s_cd5:4.9" LogProcess="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_me.isHR}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="7" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="5100" Asynchronous="False" DescBgColor="dff" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="8da1cc94-4a01-4965-94c8-a27ed6ccd9c7" Name="B. 运动会" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Sequential="True" Name="1. 爱心层数 buff" Id="d45f87c4-dcc0-468f-888c-bd72fe30368d" RegularExpression="^.{15}\S+ 1A:F5(?&lt;type&gt;[23456]):[^:]*:[^:]*:[^:]*:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="M2s_❤" VariableExpression="${type} - 2" ActionType="Variable" />
<Action OrderNumber="2" UseTTSTextExpression="${v:M2s_❤}层" ActionType="UseTTS">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:M2s_❤}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
<ConditionGroup Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M2s_phase}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${ev:M2s_live2_报过层数}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</ConditionGroup>
</Condition>
</Action>
<Action OrderNumber="3" VariableOp="SetString" VariableName="M2s_live2_报过层数" VariableExpression="1" ActionType="Variable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M2s_phase}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="0. 进入阶段" Id="c291a6ad-278b-4cd9-a0b7-f64c4bf57f29" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9C2(?&lt;type&gt;[456]):">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="M2s_phase" VariableExpression="${type} - 3" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="UnsetRegexUniversal" VariableName="^M2s_live2" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M2s_phase}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" VariableOp="UnsetRegexUniversal" VariableName="^M2s_live3" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M2s_phase}" ExpressionTypeL="String" ExpressionR="3" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" UseTTSTextExpression="${?d: 4=壹运, 5=贰运, 6=三运 [${type}]}，AoE" ActionType="UseTTS" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="阶段结束" Id="b3b0eb5c-6f08-4bac-9e0c-0c9c2cbb22af" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:918F:">
<Actions>
<Action OrderNumber="1" VariableOp="Increment" VariableName="M2s_phase" VariableExpression="0.5" ActionType="Variable" />
<Action OrderNumber="2" UseTTSTextExpression="转场AoE" ActionType="UseTTS" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="e85eccef-c9c3-4afa-b434-dfd1e304ac9d" Name="C. 钢铁月环 + 正斜" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="钢铁月环组合技" Id="83be7354-2ee7-4196-9712-df972dd91ac0" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:91A(?&lt;type&gt;C|D):">
<Actions>
<Action OrderNumber="1" LogMessageText="M2s_${?d: C = 月环斜, D = 钢铁正 [${type}]}" LogProcess="True" ActionType="LogMessage" DescBgColor="dff" />
<Action OrderNumber="2" UseTTSTextExpression="斜点外" ActionType="UseTTS" ExecutionDelayExpression="5800" />
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="action: circle &#13;&#10;center: 100, 100, 0&#13;&#10;r: 8.25&#13;&#10;waymarks: ADCB&#13;&#10;---&#13;&#10;action: circle &#13;&#10;center: 100, 100, 0&#13;&#10;r: 8.1 * √2&#13;&#10;θ: -3/4 * π&#13;&#10;waymarks: 1432&#13;&#10;" ActionType="NamedCallback" ExecutionDelayExpression="200" DescBgColor="dff" />
<Action OrderNumber="4" LogMessageText="M2s_${?d: C = 钢铁正, D = 月环斜 [${type}]}" LogProcess="True" ActionType="LogMessage" ExecutionDelayExpression="2800" DescBgColor="dff" />
<Action OrderNumber="5" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="3200" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="- 月环斜" Id="2f80efa3-7013-4584-8b19-4eb10e257be0" RegularExpression="^M2s_月环斜">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="斜点内" ActionType="UseTTS" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="action: circle &#13;&#10;center: 100, 100, 0&#13;&#10;r: 15&#13;&#10;waymarks: ADCB&#13;&#10;---&#13;&#10;action: circle &#13;&#10;center: 100, 100, 0&#13;&#10;r: 7 - 1.1 * √2&#13;&#10;θ: -3/4 * π&#13;&#10;waymarks: 1432&#13;&#10;" ActionType="NamedCallback" ExecutionDelayExpression="200" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="- 钢铁正" Id="e3ec8342-5e5d-44ed-a673-57dd641f1508" RegularExpression="^M2s_钢铁正">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="正点外" ActionType="UseTTS" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="action: circle &#13;&#10;center: 100, 100, 0&#13;&#10;r: 8.25&#13;&#10;waymarks: ADCB&#13;&#10;---&#13;&#10;action: circle &#13;&#10;center: 100, 100, 0&#13;&#10;r: 8.1 * √2&#13;&#10;θ: -3/4 * π&#13;&#10;waymarks: 1432&#13;&#10;" ActionType="NamedCallback" ExecutionDelayExpression="200" DescBgColor="dff" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="f40c715b-89b1-47f6-bcb0-e9586b6d9cda" Name="软狂暴" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="0. 软狂暴" Id="b1e980ad-fe63-4bdd-a0e6-d9add80ccc30" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:91AA:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="AoE，八方站位" ActionType="UseTTS" />
<Action OrderNumber="2" ListVariableName="M2s_final" ActionType="ListVariable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="4. 移除 debuff" Id="e066479b-3bb6-41b8-ad03-62214c7355c6" RegularExpression="^.{15}\S+ 1E:F5(C|D):(?:[^:]|: )+:[^:]+:.{8}:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${tid}].address}, 0" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="2" SystemBeepFreqExpression="freq(C7)">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="2. 文本播报" Id="1fe48427-da79-47c9-b5e9-7c7e135096c7" RegularExpression="^.{15}\S+ 1A:F5C:" PrevActionsRefire="Deny" PeriodRefire="Deny" RefirePeriodExpression="1000">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="tmp_data" VariableExpression="/e ⏎　   α  　  β  " ActionType="Variable" ExecutionDelayExpression="1000" />
<Action OrderNumber="2" VariableOp="SetString" VariableName="tmp_data" VariableExpression="${v:tmp_data}⏎${f:toxivchar:1} ${_entity[${l:M2s_final[1]}].jobCN2} - ${_entity[${l:M2s_final[2]}].jobCN2}" ActionType="Variable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:M2s_final[2]}" ExpressionTypeL="String" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" VariableOp="SetString" VariableName="tmp_data" VariableExpression="${v:tmp_data}⏎${f:toxivchar:2} ${_entity[${l:M2s_final[3]}].jobCN2} - ${_entity[${l:M2s_final[4]}].jobCN2}" ActionType="Variable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:M2s_final[4]}" ExpressionTypeL="String" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" VariableOp="SetString" VariableName="tmp_data" VariableExpression="${v:tmp_data}⏎${f:toxivchar:3} ${_entity[${l:M2s_final[5]}].jobCN2} - ${_entity[${l:M2s_final[6]}].jobCN2}" ActionType="Variable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:M2s_final[6]}" ExpressionTypeL="String" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" VariableOp="SetString" VariableName="tmp_data" VariableExpression="${v:tmp_data}⏎${f:toxivchar:4} ${_entity[${l:M2s_final[7]}].jobCN2} - ${_entity[${l:M2s_final[8]}].jobCN2}" ActionType="Variable">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:M2s_final[8]}" ExpressionTypeL="String" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" NamedCallbackName="command" NamedCallbackParam="${v:tmp_data}" ActionType="NamedCallback" />
<Action OrderNumber="7" VariableName="tmp_data" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="3. 播报组" Id="1d4872ed-5bb5-42f7-86ae-dfedf2d06f29" RegularExpression="^M2s_final:(?&lt;group&gt;\d):(?&lt;α&gt;[^:]+):(?&lt;β&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="第${group}组" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="2" UseTTSTextExpression="等待抬血，找${_entity[${if: ${α} == ${_me.id} ? ${β} : ${α} }].jobCN2}炸毒" ActionType="UseTTS" ExecutionDelayExpression="(${group} - 1) * 16000" Asynchronous="False" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${β}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
<ConditionSingle Enabled="true" ExpressionL="${α}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="1. 获取 debuff =&gt; 3" Id="09674864-35c8-4907-90c9-996cf748eb54" RegularExpression="^.{15}\S+ 1A:F5(?&lt;type&gt;C|D):(?:[^:]|: )+:(?&lt;t&gt;[^:]+):.{8}:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="tmp_group" VariableExpression="round((${t} + 4) / 16)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" ListVariableOp="Set" ListVariableName="M2s_final" ListVariableExpression="${tid}" ListVariableIndex="${v:tmp_group} * 2 - 1 + (${type} == D)" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="SetString" VariableName="tmp_members" VariableExpression="${l:M2s_final[${n: ${v:tmp_group} * 2 - 1 }]}:${l:M2s_final[${n: ${v:tmp_group} * 2 }]}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" LogMessageText="M2s_final:${v:tmp_group}:${v:tmp_members}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${f:length:${v:tmp_members}}" ExpressionTypeL="String" ExpressionR="17" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" VariableName="tmp_group" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="6" VariableName="tmp_members" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="7" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${tid}].address}, ${n:round((${t} + 4) / 16) + 418}" ActionType="NamedCallback" DescTextColor="26f" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="5c8c755f-7906-4516-b431-da7c68b1676f" Name="D1. 直条1" Enabled="true" RawEnvironmentVariables="phase = 1.5">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="范围特效" Id="8ca0d061-a4a1-461b-8178-3f40936e022c" RegularExpression="^.{15}\S+ 107:(?&lt;sid&gt;4.{7}):9198:">
<Actions>
<Action OrderNumber="1" NamedCallbackName="LockOn" NamedCallbackParam="${_entity[${sid}].address}, g3d2_lazer_8_42_0t" ActionType="NamedCallback" Asynchronous="False" />
<Action OrderNumber="2" NamedCallbackName="LockOn" NamedCallbackParam="${_entity[${sid}].address}, g3d2_lazer_8_42_0t" ActionType="NamedCallback" ExecutionDelayExpression="1800" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="0. 开始" Id="e16f19dc-2436-4f4a-a75a-4d5e7e2a3f1a" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:917D:">
<Actions>
<Action OrderNumber="1" NamedCallbackName="AdvWm" NamedCallbackParam="Scale: 18&#13;&#10;O: 100, 100, 0&#13;&#10;A: 0, -1&#13;&#10;B: 1, 0&#13;&#10;C: 0, 1&#13;&#10;D: -1, 0&#13;&#10;1: clear&#13;&#10;2: clear&#13;&#10;3: clear&#13;&#10;4: clear" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="Load" ActionType="NamedCallback" ExecutionDelayExpression="30000" Asynchronous="False" DescBgColor="dff" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M2s_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
</Triggers>
</Folder>
<Folder Id="e1c98b16-cf61-45a3-b0b2-3b404057a8d5" Name="D2. 直条2" Enabled="true" RawEnvironmentVariables="phase = 2.5">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="1. 标记场边安全点 =&gt; 2" Id="ded75e84-8063-4878-a192-4dab813ee620" RegularExpression="^.{15}\S+ 03:4.{7}:(?:[^:]*:){6}13063:9020:(?:[^:]*:){9}(?&lt;h&gt;[^:]+)" PeriodRefire="Deny" RefirePeriodExpression="2000">
<Actions>
<Action OrderNumber="1" VariableOp="Increment" VariableName="M2s_直条2_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Circle&#13;&#10;O: 100, 100, 0&#13;&#10;// 使 1 和 4 永远处于北半场（含正西）&#13;&#10;θ: dir2rad((roundir(${h}, 16) + 3) % 4 - 3, 16)&#13;&#10;R: 18.5&#13;&#10;Waymarks: 1432" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M2s_直条2_n}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="NumericLessEqual" />
</Condition>
</Action>
<Action OrderNumber="3" ActionType="Placeholder" Asynchronous="False" Description="第二次安全区即为最终分摊安全区" DescriptionOverride="True" />
<Action OrderNumber="4" LogMessageText="M2s_双分摊:dir16:${n: roundir(${h}, 16) % 4 }" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M2s_直条2_n}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M2s_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="0. 开始" Id="d89ef419-e18b-4a22-b2ca-8bc308eac018" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:917D:">
<Actions>
<Action OrderNumber="1" NamedCallbackName="AdvWm" NamedCallbackParam="Scale: 10&#13;&#10;O: 100, 100, 0&#13;&#10;A: 0, -1&#13;&#10;B: 1, 0&#13;&#10;C: 0, 1&#13;&#10;D: -1, 0&#13;&#10;1: clear&#13;&#10;2: clear&#13;&#10;3: clear&#13;&#10;4: clear" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="Load" ActionType="NamedCallback" ExecutionDelayExpression="37200" Asynchronous="False" DescBgColor="dff" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M2s_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="2. 双分摊" Id="eab050ba-9136-41f7-be96-9eff995707ee" RegularExpression="^M2s_双分摊:dir16:(?&lt;dir16&gt;\d+)">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${f:pick(${dir16}): &quot;斜点&quot;, &quot;&quot;, &quot;正点&quot;, &quot;&quot;}双分摊" ActionType="UseTTS" ExecutionDelayExpression="17500" Asynchronous="False" />
<Action OrderNumber="2" ActionType="Placeholder" ExecutionDelayExpression="2700" Asynchronous="False" />
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Circle&#13;&#10;Waymarks: ADCB&#13;&#10;R: 4.14&#13;&#10;R2: 10&#13;&#10;O: 100, 100, 0&#13;&#10;---&#13;&#10;1: clear&#13;&#10;2: clear&#13;&#10;3: clear&#13;&#10;4: clear&#13;&#10;" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${dir16}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Circle&#13;&#10;R:  10&#13;&#10;R2: 4.36&#13;&#10;O: 100, 100, 0&#13;&#10;Waymarks: A1D_C3B_&#13;&#10;---&#13;&#10;2: clear&#13;&#10;4: clear&#13;&#10;" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${dir16}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" UseTTSTextExpression="准备死刑" ActionType="UseTTS" ExecutionDelayExpression="1300" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="点名放毒" Id="59a39eb8-a5d0-46d0-9b23-74ddaeeaa68b" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]*:9193:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="点名" ActionType="UseTTS" />
<Action OrderNumber="2" LogMessageText="M2s_cd5:6" LogProcess="True" UseTTSTextExpression="点名" ActionType="LogMessage" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
</Triggers>
</Folder>
<Folder Id="bb4eb2b1-0a0d-48b9-bcc5-eb8fcdbd1a2f" Name="B2. 二运" Enabled="true" RawEnvironmentVariables="phase = 2">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="2. 初始播报" Id="365840cc-a1c3-4ca5-8065-700c13a718bb" RegularExpression="^M2s_live2:init">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${if: ${l:M2s_live2_0.contain(${_me.id})} ? 零层，北侧集合放圈 : 壹层，南侧集合躲避 }" UseTTSExclusive="False" ActionType="UseTTS" ExecutionDelayExpression="1000" Asynchronous="False" />
<Action OrderNumber="2" UseTTSTextExpression="回正中心" ActionType="UseTTS" ExecutionDelayExpression="25200" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:M2s_live2_0.contain(${_me.id})}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1. 获取初始点名" Id="f2529b3a-ea58-43d3-af9a-6831e5a89623" RegularExpression="^.{15}\S+ 1A:F5(?&lt;type&gt;[23]):[^:]*:[^:]*:[^:]*:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" ListVariableOp="Push" ListVariableName="M2s_live2_${n: ${type} - 2}" ListVariableExpression="${tid}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="M2s_live2:init" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:M2s_live2_0.size}${l:M2s_live2_1.size}" ExpressionTypeL="String" ExpressionR="44" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${l:M2s_live2_0.size}${l:M2s_live2_1.size}" ExpressionTypeL="String" ExpressionR="44" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${v:M2s_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="4. 播报分散/塔" Id="9da0676e-8e3f-4607-a875-53eef5bc9052" RegularExpression="^M2s_live2:spread">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="tmp_is散" VariableExpression="${l:M2s_live2_散.contain(${_me.id})}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="M2s_live2_dir4" VariableExpression="${_me.isD} * 2 + (${v:M2s_live2_is塔NS} = ${v:tmp_is散})" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" UseTTSTextExpression="${?d: 0 = 上北, 1 = 左西, 2 = 下南, 3 = 右东[${v:M2s_live2_dir4}]}${if: ${v:tmp_is散} ? 分散 : 踩塔 }" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Circle&#13;&#10;O: 100, 100, 0&#13;&#10;Waymarks: ADCB&#13;&#10;R: 5&#13;&#10;---&#13;&#10;Action: Circle&#13;&#10;O: 100, 100, 0 polar 11, (${v:M2s_live2_dir4} * 90 - 180)°&#13;&#10;Waymarks: 1432&#13;&#10;R: 2.75" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="5" VariableName="tmp_is散" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="8000" Asynchronous="False" DescBgColor="dff" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:M2s_live2_1.contain(${_me.id})}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="3.2 塔位置   =&gt; 4" Id="fc01ddbb-ab2b-459a-8d11-3eca20b14f39" RegularExpression="^.{15}\S+ 107:4.{7}:91A3:(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):" PrevActionsRefire="Deny" PeriodRefire="Deny" RefirePeriodExpression="1000">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="M2s_live2_is塔NS" VariableExpression="round(${x}) = 100" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="M2s_live2:spread" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:M2s_live2_is塔NS}${l:M2s_live2_散.size}" ExpressionTypeL="String" ExpressionR="12" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M2s_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="3.1 分散点名 =&gt; 4" Id="28449069-8d27-40d7-aa36-e75a156e542b" RegularExpression="^.{15}\S+ 1B:(?&lt;tid&gt;1.{7}):[^:]*:[^:]*:[^:]*:0203:">
<Actions>
<Action OrderNumber="1" ListVariableOp="Push" ListVariableName="M2s_live2_散" ListVariableExpression="${tid}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="M2s_live2:spread" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:M2s_live2_is塔NS}${l:M2s_live2_散.size}" ExpressionTypeL="String" ExpressionR="12" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="14d44faa-fb62-4a19-8f19-25f623c79c19" Name="B3. 三运" Enabled="true" RawEnvironmentVariables="phase = 3">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="1. 第一组" Id="33ff829e-c3bf-4f95-8c61-f1483d0b5566" RegularExpression="^.{15}\S+ 1A:F5E:[^:]+:(?&lt;t&gt;26[^:]*):.{8}:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="一组" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="M2s_cd5:${t}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
<Action OrderNumber="3" UseTTSTextExpression="准备${v:M2s_myDirText}放圈" ActionType="UseTTS" ExecutionDelayExpression="19000" Asynchronous="False" />
<Action OrderNumber="4" UseTTSTextExpression="去脚下，稍后${v:M2s_myDirText}踩塔" ActionType="UseTTS" ExecutionDelayExpression="22000" Asynchronous="False" />
<Action OrderNumber="5" UseTTSTextExpression="踩塔" ActionType="UseTTS" ExecutionDelayExpression="5000" Asynchronous="False" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="2. 第二组" Id="50d530de-df09-4a7d-b3a2-edb8b6dcb96e" RegularExpression="^.{15}\S+ 1A:F5E:[^:]+:(?&lt;t&gt;46[^:]*):.{8}:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="二组" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="M2s_cd5:${t}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
<Action OrderNumber="3" UseTTSTextExpression="去脚下，稍后踩塔" ActionType="UseTTS" ExecutionDelayExpression="21000" Asynchronous="False" />
<Action OrderNumber="4" UseTTSTextExpression="踩塔" ActionType="UseTTS" ExecutionDelayExpression="5000" Asynchronous="False" />
<Action OrderNumber="5" UseTTSTextExpression="准备${v:M2s_myDirText}放圈" ActionType="UseTTS" ExecutionDelayExpression="13000" Asynchronous="False" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers />
</Folder>
<Folder FFXIVZoneFilterEnabled="True" FfxivZoneFilterRegularExpression="^1230$" Id="ae1dc724-e14b-4542-899b-ed03ea50a625" ZoneFilterRegularExpression="[M級]3" Name="M3s by 阿洛" Enabled="true">
<Folders>
<Folder Id="28fd465c-a9f7-40fb-a52c-25064291065e" Name="杂项" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="死刑分摊 Knuckle Sandwich" Id="4b6dae1e-9618-4fab-b20d-154272e3aad8" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9423:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="死刑分摊" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="多段 AoE" Id="9445ad1b-9938-4d54-a088-f1ecdb76d9cb" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9425:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="多段 AoE" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="嗑药 Doping Draught" Id="318c3a49-e4ef-4965-9f31-abe82c3ac53b" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:(?&lt;aid&gt;9407|9427|9998):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="第${?d: 9407 = 1, 9427 = 2, 9998 = 3 [${aid}]}瓶药" ActionType="UseTTS" />
<Action OrderNumber="2" VariableOp="SetString" VariableName="M3s_药_n" VariableExpression="${?d: 9407 = 1, 9427 = 2, 9998 = 3 [${aid}]}" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="转转转" Id="2364fa76-79ed-46b3-b64c-16e78b8d4cec" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9BAF:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="回中心，准备八方分散" ActionType="UseTTS" ExecutionDelayExpression="9800" />
<Action OrderNumber="2" UseTTSTextExpression="外侧八方分散" ActionType="UseTTS" ExecutionDelayExpression="4000" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="cc130e8c-eb55-49a7-917a-7e271e02df85" Name="B. 击退塔" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="0. 初始化" Id="148dcd23-f5c1-4dcc-af9a-37e5a4d9971f" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:93FB:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="击退塔" ActionType="UseTTS" />
<Action OrderNumber="2" VariableOp="UnsetRegexUniversal" VariableName="^M3s_塔" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="3a. 扇形毒雾" Id="439e1d17-60bf-4156-a01a-27286a49ec21" RegularExpression="^.{15}\S+ 107:4.{7}:93FE:(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):(?&lt;z&gt;[^:]+):(?&lt;h&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#13;&#10;θ: 0${h} + π&#13;&#10;O: 100, 100, 0&#13;&#10;// 中心塔边缘内切&#13;&#10;Start: 0, -2.75&#13;&#10;// 紧贴 boss 背身位分界线&#13;&#10;End:  0, -13.58&#13;&#10;Waymarks: ABCD1&#13;&#10;---&#13;&#10;2: fakeclear&#13;&#10;3: fakeclear&#13;&#10;4: fakeclear" ActionType="NamedCallback" ExecutionDelayExpression="1500" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="2" UseTTSTextExpression="击退到背面" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="5250" Asynchronous="False" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1. 塔方向" Id="7d5b0c97-419a-48a0-afef-c8a91efae329" RegularExpression="^.{15}\S+ 101:.{8}:00020004:0(?&lt;type&gt;5|6):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="1-4：四角；5/7：AC；6/8：BD" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="M3s_塔_isWE" VariableExpression="${type} = 6" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="tmp_dir4" VariableExpression="((${v:myIdx} - 1) % 4 &gt;= 2) &lt;&lt; 1 | ${v:M3s_塔_isWE}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" UseTTSTextExpression="${f:pick(${v:tmp_dir4}): 上北, 左西, 下南, 右东 }踩塔" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="5" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, 0&#13;&#10;θ: dir2rad(${v:tmp_dir4}, 4)&#13;&#10;ScaleX: (${v:myIdx} % 2) ? 1 : -1&#13;&#10;A:  2.45, -7.74, -1&#13;&#10;C:  1.14, -7.08, -1&#13;&#10;---&#13;&#10;Action: Linear&#13;&#10;O: 100, 100, 0&#13;&#10;θ: dir2rad(${v:tmp_dir4}, 4)&#13;&#10;ScaleX: (${v:myIdx} % 2) ? 1 : -1&#13;&#10;Start: 2.97, -5.06, -1.2&#13;&#10;End:   8.63,  6.27, -2.2&#13;&#10;Waymarks: B1234D" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="6" VariableName="tmp_dir4" ActionType="Variable" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="3b. 二连冲" Id="ed5182b5-b133-4478-9e02-da383ddb8eb4" RegularExpression="^.{15}\S+ 107:4.{7}:9AE(?&lt;type&gt;[89AB]):(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):(?&lt;z&gt;[^:]+):(?&lt;h&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="8c 左手侧安全 穿   9d 左手侧安全 停   ae 右手侧安全 穿   bf 右手侧安全 停" DescriptionOverride="True" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="θ: dir2rad((roundvec(${x}-100, ${y}-100, 4) + (0x${type} &lt;= 9 ? 1 : 2)) % 4, -4)&#13;&#10;O: 100, 100, 0&#13;&#10;&#13;&#10;A:  0, 0&#13;&#10;B:  0, -2.75&#13;&#10;C:  0, -5.50&#13;&#10;1:  0,   -13.9√2&#13;&#10;2:  0,    -6.1√2&#13;&#10;D:  0,     -10√2&#13;&#10;3: -3.9√2, -10√2&#13;&#10;4:  3.9√2, -10√2" ActionType="NamedCallback" ExecutionDelayExpression="600" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="3" UseTTSTextExpression="朝 Boss ${if: 0x${type} &lt;= 9 ? 右侧 : 左侧 }击退" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#13;&#10;θ: dir2rad((roundvec(${x}-100, ${y}-100, 4) + (0x${type} % 3 = 2 ? -1 : 1)) % 4, 4)&#13;&#10;O: 100, 100, 0&#13;&#10;Start: -13.9, -6.1&#13;&#10;End:    13.9, -6.1&#13;&#10;Waymarks: 12ABCD34" ActionType="NamedCallback" ExecutionDelayExpression="5200" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="5" UseTTSTextExpression="${if: 0x${type} % 2 = 0 ? 对穿 : 留在同侧 }" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="5000" Asynchronous="False" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2a. 第一次 Boss 移动" Id="5bd292df-756f-4443-acb0-e974cb3fe6c6" RegularExpression="^.{15}\S+ 108:4.{7}:93F4:[^:]*:[^:]*:(?&lt;x&gt;(108|91)[^:]+):(?&lt;y&gt;(108|91)[^:]+):">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="M3s_塔_BossDir-4" VariableExpression="roundvec(${x}-100, ${y}-100, -4)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" ActionType="Placeholder" Asynchronous="False" Description="自己的第二个塔的方位" DescriptionOverride="True" />
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="tmp_myDir-4" VariableExpression="(${?l: 2,1,0,3,2,1,0,3 [${v:myIdx}]} + ${v:M3s_塔_isWE}) % 4" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" ActionType="Placeholder" Asynchronous="False" Description="Boss 跳跃后的位置 相对 自己的第二个塔 偏逆时针方向几个 90 度，0-3" DescriptionOverride="True" />
<Action OrderNumber="5" VariableOp="SetNumeric" VariableName="tmp_Boss相对自身逆" VariableExpression="(${v:M3s_塔_BossDir-4} - ${v:tmp_myDir-4}) %% 4" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="6" ActionType="Placeholder" Asynchronous="False" Description="自己是否是击退第二次时不需要摸 boss 的远程职业" DescriptionOverride="True" />
<Action OrderNumber="7" VariableOp="SetNumeric" VariableName="tmp_isRanged" VariableExpression="${_me.isHR} &amp;&amp; !(${_me.jobEN3} == RDM)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="8" UseTTSTextExpression="${f:pick(${v:tmp_Boss相对自身逆}): &quot;靠塔中心击退&quot;, &quot;顺时针偏右击退&quot;, &quot;贴塔边缘击退&quot;, &quot;逆时针偏左击退&quot; }" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="9" ActionType="Placeholder" Asynchronous="False" Description="同侧或对侧" DescriptionOverride="True" />
<Action OrderNumber="10" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#13;&#10;O: 100, 100, 0&#13;&#10;θ: dir2rad(${v:tmp_myDir-4} + 2, -4)&#13;&#10;Start: 0, ${v:tmp_Boss相对自身逆} = 2 ? 12.81 : 14.31, -1.2&#13;&#10;End:  0, (${v:tmp_Boss相对自身逆} = 2 ? 12.81 : 14.31) - 19, -2.2&#13;&#10;Waymarks: ABCD1234" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:tmp_Boss相对自身逆}" ExpressionTypeL="String" ExpressionR="[02]" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Action>
<Action OrderNumber="11" ActionType="Placeholder" Asynchronous="False" Description="邻位" DescriptionOverride="True" />
<Action OrderNumber="12" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#13;&#10;O: 100, 100, 0 polar 11√2, dir2rad(${v:tmp_myDir-4}, -4)&#13;&#10;θ: dir2rad(${v:tmp_myDir-4} + 2, -4) + (${v:tmp_isRanged} ? 9 : 29)° * (${v:tmp_Boss相对自身逆} = 1 ? -1 : 1)&#13;&#10;Start: 0,  -2.75, -1.2&#13;&#10;End:   0, -21.75, -2.2&#13;&#10;Waymarks: ABCD1234" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:tmp_Boss相对自身逆}" ExpressionTypeL="String" ExpressionR="[13]" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Action>
<Action OrderNumber="13" VariableName="tmp_myDir-4" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="14" VariableName="tmp_Boss相对自身逆" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="15" VariableName="tmp_isRanged" ActionType="Variable" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2b. 第二次 Boss 移动" Id="5857a6d1-b6dc-4d6b-ac5a-948ec4f0eb9b" RegularExpression="^.{15}\S+ 108:4.{7}:93F4:[^:]*:[^:]*:(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="M3s_塔_BossDir4" VariableExpression="roundvec(${x}-100, ${y}-100, 4)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" ActionType="Placeholder" Asynchronous="False" Description="自己的第二个塔的方位" DescriptionOverride="True" />
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="tmp_myDir-4" VariableExpression="(${?l: 2,1,0,3,2,1,0,3 [${v:myIdx}]} + ${v:M3s_塔_isWE}) % 4" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" ActionType="Placeholder" Asynchronous="False" Description="以 自己的第二个塔 为北，Boss 跳跃后的位置处于哪个 dir-4" DescriptionOverride="True" />
<Action OrderNumber="5" VariableOp="SetNumeric" VariableName="tmp_BossRelDir-4" VariableExpression="(${v:M3s_塔_BossDir-4} - ${v:tmp_myDir-4} - 1) %% 4" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="6" ActionType="Placeholder" Asynchronous="False" Description="自己是否是击退第二次时不需要摸 boss 的远程职业" DescriptionOverride="True" />
<Action OrderNumber="7" VariableOp="SetNumeric" VariableName="tmp_isRanged" VariableExpression="${_me.isHR} &amp;&amp; !(${_me.jobEN3} == RDM)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="8" UseTTSTextExpression="${f:pick(${v:tmp_BossRelDir-4}): &quot;顺时针偏右击退&quot;, &quot;顺时针偏右击退&quot;, &quot;逆时针偏左击退&quot;, &quot;逆时针偏左击退&quot; }" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="9" ActionType="Placeholder" Asynchronous="False" Description="远" DescriptionOverride="True" />
<Action OrderNumber="10" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#13;&#10;O: 100, 100, 0 polar 11√2, dir2rad(${v:tmp_myDir-4}, -4)&#13;&#10;θ: dir2rad(${v:tmp_myDir-4} + 2, -4) + (${v:tmp_isRanged} ? 12 : 18)° * (${v:tmp_BossRelDir-4} = 1 ? -1 : 1)&#13;&#10;Start: 0, (${v:tmp_isRanged} ?  -2 :  -2.75), -1&#13;&#10;End:   0, (${v:tmp_isRanged} ? -21 : -21.75), -2.2&#13;&#10;Waymarks: ABCD1234" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:tmp_BossRelDir-4}" ExpressionTypeL="String" ExpressionR="[12]" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Action>
<Action OrderNumber="11" ActionType="Placeholder" Asynchronous="False" Description="近" DescriptionOverride="True" />
<Action OrderNumber="12" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#13;&#10;O: 100, 100, 0 polar 11√2, dir2rad(${v:tmp_myDir-4}, -4)&#13;&#10;θ: dir2rad(${v:tmp_myDir-4} + 2, -4) + (${v:tmp_isRanged} ? 9 : 29)° * (${v:tmp_BossRelDir-4} = 0 ? -1 : 1)&#13;&#10;Start: 0,  -2, -1&#13;&#10;End:   0, -21, -2.2&#13;&#10;Waymarks: ABCD1234" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:tmp_BossRelDir-4}" ExpressionTypeL="String" ExpressionR="[03]" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Action>
<Action OrderNumber="13" VariableName="tmp_myDir-4" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="14" VariableName="tmp_BossRelDir-4" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="15" VariableName="tmp_isRanged" ActionType="Variable" Asynchronous="False" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="round(l1d(${x}, ${y}, 100, 100))" ExpressionTypeL="Numeric" ExpressionR="15" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
</Triggers>
</Folder>
<Folder Id="376d67e5-eeb5-42d3-bc77-c1191574aaaa" Name="C. 分身锁链" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="2b.2 第二次：记录 Boss 方向 =&gt; 3" Id="7bde3437-23f3-4cfe-b3ab-6f7a9e79330e" RegularExpression="^.{15}\S+ 107:4.{7}:9BD7:[^:]+:[^:]+:[^:]+:(?&lt;h&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="M3s_死宣_Boss_dir4" VariableExpression="roundir(${h}, 4)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="M3s_死宣:真:${v:M3s_死宣_真_安全dir4}:假:${v:M3s_死宣_假_安全dir4}:Boss:${v:M3s_死宣_Boss_dir4}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${ev:M3s_死宣_真_安全dir4}${ev:M3s_死宣_假_安全dir4}${ev:M3s_死宣_Boss_dir4}" ExpressionTypeL="String" ExpressionR="111" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1. 获取连线分身 (调试时取消 BNpcID 条件)" Id="4decd9b8-6986-4770-8cef-653049332187" RegularExpression="^.{15}\S+ 1A:FB3:[^:]+:[^:]*:(?&lt;sid&gt;4.{7}):[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="时间：第一次11 第二次16" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetString" VariableName="M3s_死宣_连线id" VariableExpression="${sid}" ActionType="Variable" />
</Actions>
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
<ConditionSingle Enabled="true" ExpressionL="${_entity[${sid}].bnpcid}" ExpressionTypeL="String" ExpressionR="17099" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="0. 初始化" Id="e6c82f2e-96b3-4fe7-a6b4-eb5990c9faf2" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:93E7:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="锁链" ActionType="UseTTS" />
<Action OrderNumber="2" VariableOp="UnsetRegexUniversal" VariableName="^M3s_死宣" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2b.1 第二次：记录分身安全区方向 =&gt; 3" Id="e806c5eb-f745-414f-a7bf-9bdf8cea9e28" RegularExpression="^.{15}\S+ 107:(?&lt;sid&gt;4.{7}):9BD(?&lt;type&gt;[8A]):(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):(?&lt;z&gt;[^:]+):(?&lt;h&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="记录真（没连线）假（连线）两个分身原本的安全区方向" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="M3s_死宣_${if: ${v:M3s_死宣_连线id} == ${sid} ? 假 : 真 }_安全dir4" VariableExpression="(roundvec(${x}-100, ${y}-100, 4) + (${type} == 8 ? 1 : -1)) %% 4" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="M3s_死宣:真:${v:M3s_死宣_真_安全dir4}:假:${v:M3s_死宣_假_安全dir4}:Boss:${v:M3s_死宣_Boss_dir4}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${ev:M3s_死宣_真_安全dir4}${ev:M3s_死宣_假_安全dir4}${ev:M3s_死宣_Boss_dir4}" ExpressionTypeL="String" ExpressionR="111" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2a.  第一次：记录分身安全区方向 =&gt; 3" Id="e4377b54-eb8f-4f9f-ac43-ee26590b39b4" RegularExpression="^.{15}\S+ 107:(?&lt;sid&gt;4.{7}):9B2(?&lt;type&gt;[CE]):(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):(?&lt;z&gt;[^:]+):(?&lt;h&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="同时有两个读条，赋予锁链的实体的读条实际位置在分身的对侧，角度固定正北（9B2C 左手侧安全）；" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" Asynchronous="False" Description="另一组 9B3[45] 是施放直条的实体，方向正确但位置在直条中线起始处" DescriptionOverride="True" />
<Action OrderNumber="3" ActionType="Placeholder" Asynchronous="False" Description="记录真（没连线）假（连线）两个分身原本的安全区方向" DescriptionOverride="True" />
<Action OrderNumber="4" VariableOp="SetNumeric" VariableName="M3s_死宣_${if: ${v:M3s_死宣_连线id} == ${sid} ? 假 : 真 }_安全dir4" VariableExpression="(roundvec(${x}-100, ${y}-100, 4) + (${type} == C ? 1 : -1)) %% 4" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="5" LogMessageText="M3s_死宣:真:${v:M3s_死宣_真_安全dir4}:假:${v:M3s_死宣_假_安全dir4}:Boss:-1" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${ev:M3s_死宣_真_安全dir4}${ev:M3s_死宣_假_安全dir4}" ExpressionTypeL="String" ExpressionR="11" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${v:M3s_药_n}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="3. 播报" Id="ef2e286a-37d2-4c10-9233-2742759048b2" RegularExpression="^M3s_死宣:真:(?&lt;真Dir4&gt;.):假:(?&lt;假Dir4&gt;.):Boss:(?&lt;bossDir4&gt;.+)">
<Actions>
<Action OrderNumber="1" NamedCallbackName="command" NamedCallbackParam="/e ${_event}" Enabled="False" ActionType="NamedCallback" Asynchronous="False" DescBgColor="fdd" />
<Action OrderNumber="2" VariableOp="SetString" VariableName="M3s_死宣_初始dir-4" VariableExpression="${?d: 03 = 0, 01 = 3, 10 = 1, 12 = 0, 21 = 2, 23 = 1, 32 = 3, 30 = 2 [${真Dir4}${假Dir4}]}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="SetString" VariableName="M3s_死宣_最终dir-4" VariableExpression="${?d: 03 = 1, 01 = 2, 10 = 2, 12 = 3, 21 = 3, 23 = 0, 32 = 0, 30 = 1 [${真Dir4}${假Dir4}]}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" ActionType="Placeholder" Asynchronous="False" Description="如果 boss 背面对准初始安全点，【以第一次安全区为北】打左还是右 （无此变量时代表正面对准安全点）" DescriptionOverride="True" />
<Action OrderNumber="5" VariableOp="SetString" VariableName="M3s_死宣_Boss打安全区右" VariableExpression="0" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="(${bossDir4} - ${v:M3s_死宣_初始dir-4}) %% 4" ExpressionTypeL="Numeric" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${bossDir4}" ExpressionTypeL="String" ExpressionR="-1" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" VariableOp="SetString" VariableName="M3s_死宣_Boss打安全区右" VariableExpression="1" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="(${bossDir4} - ${v:M3s_死宣_初始dir-4}) %% 4" ExpressionTypeL="Numeric" ExpressionR="3" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${bossDir4}" ExpressionTypeL="String" ExpressionR="-1" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="7" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#13;&#10;θ: dir2rad(${v:M3s_死宣_初始dir-4}, -4)&#13;&#10;Scale: √2&#13;&#10;1:    0, -8.3&#13;&#10;2:    0, -6.1&#13;&#10;3: -1.1, -7.2&#13;&#10;4:  1.1, -7.2" ActionType="NamedCallback" Asynchronous="False" Description="不需要考虑 Boss：" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:M3s_死宣_Boss打安全区右}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="8" UseTTSTextExpression="去${f:pick(${v:M3s_死宣_初始dir-4}): 左上, 左下, 右下, 右上}，${if: 0${bossDir4} = -1 ? &quot;&quot; : &quot;不管本体&quot; }" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:M3s_死宣_Boss打安全区右}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="9" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#13;&#10;θ: dir2rad(${v:M3s_死宣_初始dir-4}, -4)&#13;&#10;ScaleY: √2&#13;&#10;ScaleX: ${v:M3s_死宣_Boss打安全区右} ? √2: -√2&#13;&#10;2:   0, -6.1&#13;&#10;3: 1.1, -7.2&#13;&#10;4: 2.2, -8.3&#13;&#10;1: 1.1, -9.4" ActionType="NamedCallback" Asynchronous="False" Description="需要考虑 Boss：" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:M3s_死宣_Boss打安全区右}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="10" UseTTSTextExpression="去${f:pick(${v:M3s_死宣_初始dir-4}): 左上, 左下, 右下, 右上}，面向 Boss 偏${if: ${v:M3s_死宣_Boss打安全区右} ? 左 : 右 }" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:M3s_死宣_Boss打安全区右}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="11" ActionType="Placeholder" ExecutionDelayExpression="4000" Asynchronous="False" />
<Action OrderNumber="12" UseTTSTextExpression="准备去${if: (${v:M3s_死宣_最终dir-4} - ${v:M3s_死宣_初始dir-4}) %% 4 = 1 ? 右 : 左 }" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="13" NamedCallbackName="AdvWm" NamedCallbackParam="Action: Linear&#13;&#10;Start: 100, 100, -1.0 polar 6.1√2, dir2rad(${v:M3s_死宣_初始dir-4}, -4)&#13;&#10;End:   100, 100, -2.5 polar 6.1√2, dir2rad(${v:M3s_死宣_最终dir-4}, -4)&#13;&#10;Waymarks: __ABCD__" ActionType="NamedCallback" Asynchronous="False" Description="两次之间的指路" DescBgColor="dff" />
<Action OrderNumber="14" ActionType="Placeholder" ExecutionDelayExpression="${bossDir4} = -1 ? 1800 : 3800" Asynchronous="False" />
<Action OrderNumber="15" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#13;&#10;θ: dir2rad(${v:M3s_死宣_最终dir-4}, -4)&#13;&#10;Scale: √2&#13;&#10;1:    0, -8.3&#13;&#10;2:    0, -6.1&#13;&#10;3: -1.1, -7.2&#13;&#10;4:  1.1, -7.2" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="16" SystemBeepLengthExpression="200" Asynchronous="False" />
<Action OrderNumber="17" NamedCallbackName="AdvWm" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="5200" Asynchronous="False" DescBgColor="dff" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="39025d85-9aaf-4cbd-aa05-3c049a71a56b" Name="D. 长短炸弹" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="1. 己方长短线" Id="21fc1bf3-eec0-46cc-b756-3c0862e217e2" RegularExpression="^.{15}\S+ 1A:FB(?&lt;type&gt;8|9):[^:]+:[^:]+:.{8}:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${?d: 8 = 短线，外侧分散, 9 = 长线，中心集合 [${type}]}" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M3s_药_n}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="2a. 炸弹短线（第一次特效）" Id="1dee65f6-e7ff-471e-b9d1-25dab9d7efe7" RegularExpression="^.{15}\S+ 1A:FAF:[^:]+:(?&lt;t&gt;[^:]+):.{8}:[^:]*:(?&lt;tid&gt;4.{7}):">
<Actions>
<Action OrderNumber="1" NamedCallbackName="LockOn" NamedCallbackParam="${_entity[${tid}].address}, m0311trg_t0v" ActionType="NamedCallback" ExecutionDelayExpression="600" DescTextColor="26f" />
<Action OrderNumber="2" NamedCallbackName="LockOn" NamedCallbackParam="${_entity[${tid}].address}, m0311trg_t0v" ActionType="NamedCallback" ExecutionDelayExpression="3200" DescTextColor="26f" />
<Action OrderNumber="3" NamedCallbackName="LockOn" NamedCallbackParam="${_entity[${tid}].address}, m0311trg_t0v" ActionType="NamedCallback" ExecutionDelayExpression="3200" DescTextColor="26f" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M3s_药_n}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="2c. 炸弹长线（第二次）=&gt; 3" Id="e9923403-83a9-4e92-8519-27c8afd1aa76" RegularExpression="^.{15}\S+ 1A:FB0:[^:]+:(?&lt;t&gt;[^:]+):.{8}:[^:]*:(?&lt;tid&gt;4.{7}):">
<Actions>
<Action OrderNumber="1" VariableOp="Increment" VariableName="M3s_炸弹_Σx" VariableExpression="${_entity[${tid}].x}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="Increment" VariableName="M3s_炸弹_Σy" VariableExpression="${_entity[${tid}].y}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="M3s_炸弹:dir-4:${n: roundvec(${v:M3s_炸弹_Σx} - 400, ${v:M3s_炸弹_Σy} - 400, -4)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M3s_炸弹_Σx}" ExpressionTypeL="String" ExpressionR="350" ExpressionTypeR="String" ConditionType="NumericGreater" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M3s_药_n}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="0. 初始化" Id="47162a30-c9db-422b-96d6-991df42776b1" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:93FF:">
<Actions>
<Action OrderNumber="1" VariableOp="UnsetRegexUniversal" VariableName="^M3s_炸弹" ActionType="Variable" />
<Action OrderNumber="1" UseTTSTextExpression="炸弹" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="3. 标记安全区" Id="fef00dd1-3c1d-4af7-be94-2a40a990a2c9" RegularExpression="^M3s_炸弹:dir-4:(?&lt;dir&gt;.)">
<Actions>
<Action OrderNumber="1" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#13;&#10;θ: dir2rad(0${dir} + 2, 4)&#13;&#10;Scale: 1.1&#13;&#10;1: 1, 1&#13;&#10;3: 3, 1&#13;&#10;4: 1, 3&#13;&#10;2: 3, 3" ActionType="NamedCallback" DescBgColor="dff" />
<Action OrderNumber="2" UseTTSTextExpression="${f:pick(${dir}): 左上, 左下, 右下, 右上}安全" ActionType="UseTTS" />
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100&#13;&#10;θ: dir2rad(0${dir}, 4)&#13;&#10;Scale: 1.1&#13;&#10;1: 1, 1&#13;&#10;3: 3, 1&#13;&#10;4: 1, 3&#13;&#10;2: 3, 3" ActionType="NamedCallback" ExecutionDelayExpression="18500" DescBgColor="dff" />
<Action OrderNumber="4" UseTTSTextExpression="对穿" ActionType="UseTTS" />
<Action OrderNumber="5" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M3s_药_n}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="2b. 炸弹长线（第一次特效）" Id="08590676-a635-446b-a9c0-f08bb68d0d47" RegularExpression="^.{15}\S+ 1A:FB0:[^:]+:(?&lt;t&gt;[^:]+):.{8}:[^:]*:(?&lt;tid&gt;4.{7}):">
<Actions>
<Action OrderNumber="1" NamedCallbackName="LockOn" NamedCallbackParam="${_entity[${tid}].address}, m0311trg_t0v" ActionType="NamedCallback" ExecutionDelayExpression="11800" DescTextColor="26f">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M3s_药_n}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M3s_药_n}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Trigger>
</Triggers>
</Folder>
<Folder Id="5831c0b1-3e3d-4703-962f-0abb154ddf54" Name="A. 分散分摊" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="核爆击退 + 分散分摊" Id="215b6138-2106-4f49-995f-c62889bd9fdb" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:93(?&lt;type&gt;D[EF]|E[01]):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${?d: DE = 核爆远离, DF = 准备击退, E0 = 核爆远离, E1 = 准备击退 [${type}]}，${?d: DE = 全员分散, DF = 全员分散, E0 = 两人分摊, E1 = 两人分摊 [${type}]}" ActionType="UseTTS" />
<Action OrderNumber="2" UseTTSTextExpression="${?d: DE = 全员分散, DF = 全员分散, E0 = 两人分摊, E1 = 两人分摊 [${type}]}" ActionType="UseTTS" ExecutionDelayExpression="7700" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="钢铁月环 + 分散分摊" Id="1e2009c9-7f77-4b09-bb36-7602b4222efd" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:93E(?&lt;type&gt;[89AB]):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${?d: 8 = 钢铁, 9 = 月环, A = 钢铁, B = 月环 [${type}]}，${?d: 8 = 八方分散, 9 = 八方分散, A = 两人分摊, B = 两人分摊 [${type}]}" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="组合技 + 分散分摊" Id="4f19ee73-2c7c-4b72-9062-d63d2d5fec6d" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:(?&lt;aid&gt;940A|9752):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="AoE，最后${?d: 940A = 分摊, 9752 = 分散 [${aid}]}" ActionType="UseTTS" />
<Action OrderNumber="2" LogMessageText="M3s_cd5:15.4" LogProcess="True" ActionType="LogMessage">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_me.isTM}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" ActionType="Placeholder" ExecutionDelayExpression="13000" />
<Action OrderNumber="4" UseTTSTextExpression="钢铁" ActionType="UseTTS" />
<Action OrderNumber="5" ActionType="Placeholder" ExecutionDelayExpression="2500" />
<Action OrderNumber="6" UseTTSTextExpression="月环，AoE" ActionType="UseTTS" />
<Action OrderNumber="7" ActionType="Placeholder" ExecutionDelayExpression="5000" />
<Action OrderNumber="8" UseTTSTextExpression="击退${?d: 940A = 分摊, 9752 = 分散 [${aid}]}" ActionType="UseTTS" />
<Action OrderNumber="9" ActionType="Placeholder" ExecutionDelayExpression="6000" />
<Action OrderNumber="10" UseTTSTextExpression="${?d: 940A = 两人分摊, 9752 = 全体分散 [${aid}]}" ActionType="UseTTS" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="64297a3f-589c-42e6-81de-db32b233849b" Name="E. 导火索" Enabled="true" RawEnvironmentVariables="phase = 导火索">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="0. 初始化" Id="77299390-1056-4b40-8b5c-a2aa7f5c9882" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:93EE:">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="M3s_phase" VariableExpression="${env:phase}" ActionType="Variable" />
<Action OrderNumber="2" UseTTSTextExpression="导火索，预站位" ActionType="UseTTS" />
<Action OrderNumber="3" VariableOp="UnsetRegexUniversal" VariableName="^M3s_导火索" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 处理" Id="35550bee-83c8-4fb7-a2ea-f288315ce724" RegularExpression="^M3s_导火索_线">
<Actions>
<Action OrderNumber="1" ListVariableOp="Copy" ListVariableName="M3s_导火索_dir8_${if: ${v:M3s_导火索_is短} ? 短 : 长 }" ListVariableTarget="tmp_dir8" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="2" ListVariableOp="SortByKeys" ListVariableName="tmp_dir8" ListVariableExpression="n: (8 - ${_this}) % 8" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="SetString" VariableName="tmp_myDir8" VariableExpression="${l:tmp_dir8[${n: (${v:myIdx} - 1) % 4 + 1 }]}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" VariableOp="SetNumeric" VariableName="M3s_导火索_myIdx" VariableExpression="(${v:myIdx} - 1) % 4 + 1 + (${v:M3s_导火索_is短} ? 0 : 4)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="5" VariableOp="SetString" VariableName="M3s_导火索_mySparkId" VariableExpression="${l:M3s_导火索_SparkIds[${n: ${v:tmp_myDir8} + 1}]}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="6" UseTTSTextExpression="去${f:pick(${v:tmp_myDir8}): 上北, 左上, 左西, 左下, 下南, 右下, 右东, 右上}，${if: ${v:M3s_导火索_is短} ? 短 : 长 }线${n: (${v:myIdx} - 1) % 4 + 1 }号" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="7" ListVariableName="tmp_dir8" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="8" VariableName="tmp_myDir8" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="9" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${v:M3s_导火索_mySparkId}].address}, 659" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="10" LogMessageText="M3s_cd5:9.0" LogProcess="True" LogProcessACT="True" ActionType="LogMessage">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:M3s_导火索_is短}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="0${v:myIdx} % 4" ExpressionTypeL="Numeric" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1.1 获取火花 =&gt; 2" Id="c587cc07-2074-41bf-9e9e-ec5d63c2fdfc" RegularExpression="^.{15}\S+ AA:10F:(?&lt;id&gt;4.{7}):[^:]*:17098:(?&lt;x&gt;[^:]*):(?&lt;y&gt;[^:]*):(?&lt;z&gt;[^:]*):(?&lt;h&gt;[^:]*)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="r = 10.6 or 14.6" DescriptionOverride="True" />
<Action OrderNumber="2" ListVariableOp="Push" ListVariableExpressionType="Numeric" ListVariableName="M3s_导火索_dir8_${if: d(${x}, ${y}, 100, 100) &lt; 12 ? 短 : 长 }" ListVariableExpression="roundir(${h} + π, 8)" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="3" ListVariableOp="Set" ListVariableName="M3s_导火索_SparkIds" ListVariableExpression="${id}" ListVariableIndex="roundir(${h} + π, 8) + 1" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="4" LogMessageText="M3s_导火索_线:近dir8:${l:M3s_导火索_dir8_短.join(&quot;&quot;)}:远dir8:${l:M3s_导火索_dir8_长.join(&quot;&quot;)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:M3s_导火索_is短}${l:M3s_导火索_dir8_短.size}${l:M3s_导火索_dir8_长.size}" ExpressionTypeL="String" ExpressionR="144" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M3s_phase}" ExpressionTypeL="String" ExpressionR="${env:phase}" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="1.2 获取自身 buff =&gt; 2" Id="9d120019-a03b-4399-802a-b4d767e7adf5" RegularExpression="^.{15}\S+ 1A:FB4:[^:]+:(?&lt;t&gt;[^:]+):.{8}:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="t = 26 or 44" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="M3s_导火索_is短" VariableExpression="${t} &lt; 35" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="M3s_导火索_线:近dir8:${l:M3s_导火索_dir8_短.join(&quot;&quot;)}:远dir8:${l:M3s_导火索_dir8_长.join(&quot;&quot;)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:M3s_导火索_is短}${l:M3s_导火索_dir8_短.size}${l:M3s_导火索_dir8_长.size}" ExpressionTypeL="String" ExpressionR="144" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="3. 爆炸计数" Id="a02ad3b2-3362-43e2-8679-882880902a6b" RegularExpression="^.{15}\S+ 108:.{8}:93F3:">
<Actions>
<Action OrderNumber="1" VariableOp="Increment" VariableName="M3s_导火索_炸_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" UseTTSTextExpression="看血量踩线" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M3s_导火索_炸_n} + 1" ExpressionTypeL="Numeric" ExpressionR="${v:M3s_导火索_myIdx}" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" SystemBeepFreqExpression="freq(C6, ${?l: 0, 2, 4, 5, 7, 9, 11, 12[${v:M3s_导火索_炸_n}]})" SystemBeepLengthExpression="250" Asynchronous="False" />
</Actions>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers />
</Folder>
<Folder FFXIVZoneFilterEnabled="True" FfxivZoneFilterRegularExpression="^1232$" Id="6b375e8b-87c1-47fc-b89e-5157ae648393" ZoneFilterRegularExpression="[M級]4" Name="M4s by 阿洛" Enabled="true">
<Folders>
<Folder Id="6f50c8d2-a58e-4d8b-bf10-0088af7be483" Name="杂项" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="P1 宙斯之怒 Wrath of Zeus" Id="cf9e5a68-6f54-4323-8927-46c1cad091e5" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:95EF:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="AoE" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="P1 直线死刑 Wicked Jolt" Id="8019aa76-412a-4299-a025-1bd9daf26864" RegularExpression="^.{15}\S+ 14:(?&lt;sid&gt;4.{7}):[^:]+:95F0:">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="tmp_isTargeted" VariableExpression="${_entity[${sid}].targetid} == ${_me.id}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" UseTTSTextExpression="直线死刑换T" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${_me.isT}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" UseTTSTextExpression="直线死刑" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_me.isT}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="5" UseTTSTextExpression="挑衅" ActionType="UseTTS" ExecutionDelayExpression="8000" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${v:tmp_isTargeted}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${_entity[${sid}].targetid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="6" VariableName="tmp_isTargeted" ActionType="Variable" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="P1 多段分摊 Wicked Bolt" Id="9b9f1abc-b580-47fa-b258-68e0d1b6dc0f" RegularExpression="^.{15}\S+ 14:(?&lt;sid&gt;4.{7}):[^:]+:92C2:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="多段分摊 ${f:ifequal(${_me.id}, &quot;准备拉怪&quot;, &quot;&quot;):${_entity[${sid}].targetid}}" ActionType="UseTTS" />
<Action OrderNumber="2" UseTTSTextExpression="拉走" ActionType="UseTTS" ExecutionDelayExpression="9000">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_entity[${sid}].targetid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="P2 火雷直条 Wicked Special" Id="696aac90-84c5-45bf-885e-8841efecbfa2" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:961(?&lt;type&gt;0|2):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="条件：不是 Twilight" DescriptionOverride="True" />
<Action OrderNumber="2" UseTTSTextExpression="${?d: 0 = 两侧, 2 = 中间 [${type}]}" ActionType="UseTTS" />
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 165, 0&#13;&#10;scaleX: ${type} = 0 ? 11.25 : 3.75&#13;&#10;scaleY: 3&#13;&#10;&#13;&#10;A: -1, -3&#13;&#10;B: -1, -1&#13;&#10;C: -1,  1&#13;&#10;D: -1,  3&#13;&#10;1:  1, -3&#13;&#10;2:  1, -1&#13;&#10;3:  1,  1&#13;&#10;4:  1,  3" ActionType="NamedCallback" DescBgColor="dff" />
<Action OrderNumber="4" ActionType="Placeholder" Description="Sunrise 阶段不复原" DescriptionOverride="True" />
<Action OrderNumber="5" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="6000" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_phase}" ExpressionTypeL="String" ExpressionR="Sunrise" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_phase}" ExpressionTypeL="String" ExpressionR="Twilight" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="P2 转场后 AoE Cross Tail Switch" Id="8fc504a7-9977-4717-8d0f-4f2594b21f3c" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:95F2:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="超大AoE" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="P1 AoE Azure / Wicked Thunder" Id="8d465ffb-a218-4f2b-a814-d9cea29d9e82" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:(962F|949B):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="AoE" ActionType="UseTTS" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="时间轴" Id="70bd0b54-32b4-409d-8387-564b52420588" RegularExpression="^.{15}\S+ 104:.:1:.:1">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="准备爆发药" ActionType="UseTTS" ExecutionDelayExpression="292 * 1000" />
<Action OrderNumber="2" UseTTSTextExpression="准备爆发药" ActionType="UseTTS" ExecutionDelayExpression="300 * 1000" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="295ecfcb-0e1f-452f-8d04-eb179387997d" Name="A. 五条线" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="1.1 场边读条五条激光 =&gt; 2" Id="f99b5463-130e-44c6-bfff-13e705ea9d90" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:(?&lt;aid&gt;8DEF|9671):">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="M4s_线_is紫线偏左" VariableExpression="${aid} == 8DEF" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="Increment" VariableName="M4s_线_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="M4s_线1" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_线_n}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="4. 播报分散1站位" Id="6940fabc-ec6f-4843-a87c-ecab85fc8120" RegularExpression="^M4s_线2">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${f:pick(${v:M4s_线_is激光偏下}):下半格, 上半格}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, ${v:M4s_线_is激光偏下} ? 97.5 : 102.5, 0&#13;&#10;scaleX: 4.5&#13;&#10;&#13;&#10;A: -1, -15&#13;&#10;B: -1,  -5&#13;&#10;C: -1,   5&#13;&#10;D: -1,  15&#13;&#10;1:  1, -15&#13;&#10;2:  1,  -5&#13;&#10;3:  1,   5&#13;&#10;4:  1,  15" ActionType="NamedCallback" Asynchronous="False" Description="标记第一轮全员分散位置（紫线先外）" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_线_is紫线先外}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: ${v:M4s_线_is紫线偏左} ? 98.5 : 101.5, ${v:M4s_线_is激光偏下} ? 97.5 : 102.5, 0&#13;&#10;scaleX: 17.25&#13;&#10;&#13;&#10;A: -1, -15&#13;&#10;B: -1,  -5&#13;&#10;C: -1,   5&#13;&#10;D: -1,  15&#13;&#10;1:  1, -15&#13;&#10;2:  1,  -5&#13;&#10;3:  1,   5&#13;&#10;4:  1,  15" ActionType="NamedCallback" Asynchronous="False" Description="标记第一轮全员分散位置（紫线先内）" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_线_is紫线先外}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" ActionType="Placeholder" ExecutionDelayExpression="4800" />
<Action OrderNumber="5" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: ${v:M4s_线_is紫线偏左} ? 98.5 : 101.5, 100, 0&#13;&#10;scaleX: 17.25&#13;&#10;&#13;&#10;A: -1, -15&#13;&#10;B: -1,  -5&#13;&#10;C: -1,   5&#13;&#10;D: -1,  15&#13;&#10;1:  1, -15&#13;&#10;2:  1,  -5&#13;&#10;3:  1,   5&#13;&#10;4:  1,  15" ActionType="NamedCallback" Asynchronous="False" Description="标记第二轮全员分散位置（紫线先外）" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_线_is紫线先外}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scaleX: 5&#13;&#10;&#13;&#10;A: -1, -15&#13;&#10;B: -1,  -5&#13;&#10;C: -1,   5&#13;&#10;D: -1,  15&#13;&#10;1:  1, -15&#13;&#10;2:  1,  -5&#13;&#10;3:  1,   5&#13;&#10;4:  1,  15" ActionType="NamedCallback" Asynchronous="False" Description="标记第二轮全员分散位置（紫线先内）" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_线_is紫线先外}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="3. 激活紫线" Id="ec171e0b-675a-4d13-a49a-208762806463" RegularExpression="^.{15}\S+ 101:.{8}:00200010:0(?&lt;type&gt;[78CD])" PrevActions="Interrupt" PeriodRefire="Deny" RefirePeriodExpression="15000">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="cd 15 s" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="M4s_线_is紫线先外" VariableExpression="${type} == 7 || ${type} == C" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" UseTTSTextExpression="${f:pick(${v:M4s_线_is紫线先外}): 外侧分散, 内侧分散}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="4" ActionType="Placeholder" Description="后续生成场边激光实体时再纵向微调一次" DescriptionOverride="True" />
<Action OrderNumber="5" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scaleX: 4.5&#13;&#10;&#13;&#10;A: -1, -15&#13;&#10;B: -1,  -5&#13;&#10;C: -1,   5&#13;&#10;D: -1,  15&#13;&#10;1:  1, -15&#13;&#10;2:  1,  -5&#13;&#10;3:  1,   5&#13;&#10;4:  1,  15" ActionType="NamedCallback" Asynchronous="False" Description="标记第一轮全员分散位置（紫线先外），不考虑横向激光" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_线_is紫线先外}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: ${v:M4s_线_is紫线偏左} ? 98.5 : 101.5, 100, 0&#13;&#10;scaleX: 17.25&#13;&#10;&#13;&#10;A: -1, -15&#13;&#10;B: -1,  -5&#13;&#10;C: -1,   5&#13;&#10;D: -1,  15&#13;&#10;1:  1, -15&#13;&#10;2:  1,  -5&#13;&#10;3:  1,   5&#13;&#10;4:  1,  15" ActionType="NamedCallback" Asynchronous="False" Description="标记第一轮全员分散位置（紫线先内），不考虑横向激光" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_线_is紫线先外}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="7" ActionType="Placeholder" Asynchronous="False" Description="自己是近战且要远离时 提示音" DescriptionOverride="True" />
<Action OrderNumber="8" LogMessageText="M4s_cd5:5.8" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${_me.isTM}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_线_is紫线先外}" ExpressionTypeL="Numeric" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="5. 分散点名 * 4" Id="e164772e-865b-4cd3-ab28-0a4e135a3fb7" RegularExpression="^.{15}\S+ 1[56]:4.{7}:[^:]*:95E6:[^:]*:(?&lt;tid&gt;1.{7}):([^:]*:){38}0:">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="记录四个人分别是否是 TH，然后根据多数职能判断点名的是哪组，以防减员造成乱点名时错报" DescriptionOverride="True" />
<Action OrderNumber="2" ListVariableOp="Push" ListVariableExpressionType="Numeric" ListVariableName="M4s_线_分散_isTH" ListVariableExpression="${_entity[${tid}].isTH}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="SetString" VariableName="M4s_线_分散_被点名" VariableExpression="1" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="4" ActionType="Placeholder" Description="记录四次后" DescriptionOverride="True" />
<Action OrderNumber="5" VariableOp="SetNumeric" VariableName="M4s_线_isTH" VariableExpression="${l:M4s_线_分散_isTH.sum} &gt;= 3" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${l:M4s_线_分散_isTH.size}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" UseTTSTextExpression="${f:pick(${v:M4s_线_is紫线先外}): 去中间列, 去两侧}，${f:pick(${v:M4s_线_isTH}): T奶, DPS}引导 " ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${l:M4s_线_分散_isTH.size}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${_me.job}" ExpressionTypeL="String" ExpressionR="BLU" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="6. 远近 播报分散2站位" Id="7ac90173-aa7d-434e-8092-2aa9427797a3" RegularExpression="^.{15}\S+ 1A:B9A:[^:]+:(?&lt;t&gt;[^:]+):.{8}:[^:]*:.{8}:[^:]*:(?&lt;type&gt;2F[67]):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="M4s_远近_n = 0              ${?d: 2F6 = 近, 2F7 = 远 [${type}]}" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="Increment" VariableName="M4s_远近_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="M4s_线_isSelf远" VariableExpression="0${v:M4s_线_分散_被点名} = (${type} == 2F6)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" UseTTSTextExpression="${f:pick(${v:M4s_线_isSelf远}): 靠近, 远离}${f:pick(0${v:M4s_线_分散_被点名}): 引导, 躲开}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="5" FolderId="d405cc4f-cd0a-4bd3-b6f8-64b4cbb9e327" ActionType="Folder" />
<Action OrderNumber="6" ActionType="Placeholder" Asynchronous="False" Description="自己是近战且要远离时 提示音" DescriptionOverride="True" />
<Action OrderNumber="7" LogMessageText="M4s_cd5:5.3" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${_me.isTM}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_线_isSelf远} || ${v:M4s_线_is紫线先外}" ExpressionTypeL="Numeric" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="8" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;&#13;&#10;${f:pick(${v:M4s_线_isSelf远}):A, B}: fakeclear&#13;&#10;${f:pick(${v:M4s_线_isSelf远}):D, C}: fakeclear&#13;&#10;${f:pick(${v:M4s_线_isSelf远}):1, 2}: fakeclear&#13;&#10;${f:pick(${v:M4s_线_isSelf远}):4, 3}: fakeclear" ActionType="NamedCallback" Asynchronous="False" Description="移除不属于自己的点" DescBgColor="dff" DescriptionOverride="True" />
<Action OrderNumber="9" ActionType="Placeholder" ExecutionDelayExpression="5600" Asynchronous="False" />
<Action OrderNumber="10" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="0${v:M4s_远近_n}" ExpressionTypeL="Numeric" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="1.2 场边第一排小怪 =&gt; 2 / 4" Id="d6913c3d-a812-45eb-a88b-42e27f5fbca8" RegularExpression="^.{15}\S+ 03:4.{7}:([^:]*:){6}13059:17324:([^:]*:){7}(?&lt;y&gt;82|87)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="只看第一行的 y 是 82.5 还是 87.5" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="M4s_线_is激光偏下" VariableExpression="${y} &gt; 85" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="Increment" VariableName="M4s_线_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" LogMessageText="M4s_线1" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_线_n}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" LogMessageText="M4s_线2" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_线_n}" ExpressionTypeL="String" ExpressionR="3" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 播报初始站位" Id="3bfc740f-10d0-432f-8535-a7e504c0798c" RegularExpression="^M4s_线1">
<Actions>
<Action OrderNumber="1" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: ${v:M4s_线_is紫线偏左} ? 98.5 : 101.5, ${v:M4s_线_is激光偏下} ? 97.5 : 102.5, 0&#13;&#10;&#13;&#10;A: -4, -15&#13;&#10;B: -4,  -5&#13;&#10;C: -4,   5&#13;&#10;D: -4,  15&#13;&#10;1:  4, -15&#13;&#10;2:  4,  -5&#13;&#10;3:  4,   5&#13;&#10;4:  4,  15" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="2" UseTTSTextExpression="${f:pick(${v:M4s_线_is紫线偏左}):中线偏左, 中线偏右}，${f:pick(${v:M4s_线_is激光偏下}):下半格, 上半格}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scaleX: 4.5&#13;&#10;&#13;&#10;A: -1, -15&#13;&#10;B: -1,  -5&#13;&#10;C: -1,   5&#13;&#10;D: -1,  15&#13;&#10;1:  1, -15&#13;&#10;2:  1,  -5&#13;&#10;3:  1,   5&#13;&#10;4:  1,  15" ActionType="NamedCallback" ExecutionDelayExpression="7200" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: ${v:M4s_线_is紫线偏左} ? 98.5 : 101.5, 100, 0&#13;&#10;scaleX: 8&#13;&#10;&#13;&#10;A: -1, -15&#13;&#10;B: -1,  -5&#13;&#10;C: -1,   5&#13;&#10;D: -1,  15&#13;&#10;1:  1, -15&#13;&#10;2:  1,  -5&#13;&#10;3:  1,   5&#13;&#10;4:  1,  15" Enabled="False" ActionType="NamedCallback" ExecutionDelayExpression="7200" Asynchronous="False" DescBgColor="dff" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="a685f9d0-ac6a-46a0-9efc-67fe3a43f62d" Name="C. 电容 Electric Condenser" Enabled="true">
<Folders>
<Folder Id="5e03f922-e0cd-4e25-8650-ebb680f5dbb4" Name="电容1 4*4" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="2. 初始安全区" Id="ccce884d-51b6-415d-a659-e9279e7c4342" RegularExpression="^M4s_电容1_dir-4计数:(?&lt;n&gt;(?&lt;n0&gt;.).(?&lt;n2&gt;.).)">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="M4s_电容1_dir-4_L" VariableExpression="${n0} = 1 ? 0 : 1" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="M4s_电容1_dir-4_R" VariableExpression="${n2} = 1 ? 2 : 3" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" UseTTSTextExpression="${?d: 1221 = 前半场, 2112 = 后半场, 1212 = 左上或右下, 2121 = 右上或左下 [${n}]}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 95, ${n0} = 1 ? 95 : 105, 0&#13;&#10;scale: 2&#13;&#10;&#13;&#10;A: -1, -1&#13;&#10;B:  1, -1&#13;&#10;C: -1,  1&#13;&#10;D:  1,  1&#13;&#10;&#13;&#10;---&#13;&#10;&#13;&#10;action: place&#13;&#10;center: 105, ${n2} = 2 ? 95 : 105, 0&#13;&#10;scale: 2&#13;&#10;&#13;&#10;1: -1, -1&#13;&#10;2:  1, -1&#13;&#10;3: -1,  1&#13;&#10;4:  1,  1" ActionType="NamedCallback" Asynchronous="False" Description="标记安全点   左半场 ABCD   右半场 1234" DescBgColor="dff" DescriptionOverride="True" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="0. 开始" Id="a24518ae-502d-46e7-9c73-f5f35e16f14f" RegularExpression="^.{15}\S+ 101:.{8}:00200010:01">
<Actions>
<Action OrderNumber="1" DictVariableOp="Build" DictVariableTarget="M4s_电容1_dir-4" DictVariableValue="=,0=0, 1=0, 2=0, 3=0" ActionType="DictVariable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="SetString" VariableName="M4s_电容_phase" VariableExpression="1" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" UseTTSTextExpression="去正方向" UseTTSExclusive="False" ActionType="UseTTS" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1. 蓄电 * 6 =&gt; 2" Id="323010af-a9b9-4184-a6e3-003a8fead5b3" RegularExpression="^.{15}\S+ 108:4.{7}:95C7:.{8}:[^:]*:[^:]*:[^:]*:[^:]*:(?&lt;h&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" DictVariableOp="Set" DictVariableKeyType="Numeric" DictVariableValueType="Numeric" DictVariableName="M4s_电容1_dir-4计数" DictVariableKey="roundir(${h}, -4)" DictVariableValue="${_val} + 1" ActionType="DictVariable" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="M4s_电容1_dir-4计数:${d:M4s_电容1_dir-4计数[0]}${d:M4s_电容1_dir-4计数[1]}${d:M4s_电容1_dir-4计数[2]}${d:M4s_电容1_dir-4计数[3]}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${d:M4s_电容1_dir-4计数.sum}" ExpressionTypeL="String" ExpressionR="6" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="3. 左右刀 + 分散分摊" Id="ec293139-3fa6-4786-bff1-2f7e44240745" RegularExpression="^M4s_左右刀:is右:(?&lt;is右&gt;.):is散:(?&lt;is散&gt;.)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="电容 phase = 1" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetString" VariableName="tmp_dir-4" VariableExpression="${f:pick(${is右}): ${v:M4s_电容1_dir-4_L}, ${v:M4s_电容1_dir-4_R}}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" UseTTSTextExpression="${f:pick(0${v:tmp_dir-4}): 左上, 左下, 右下, 右上}分摊，${?l: 红色, 黄色, 蓝色, 紫色, 红色, 黄色, 蓝色, 紫色 [0${v:myIdx}]}点" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${is散}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" UseTTSTextExpression="${f:pick(0${v:tmp_dir-4}): 左上, 左下, 右下, 右上}分散，${?l: 脚下A, 黄色B, 蓝色C, 紫色D, 红色壹, 黄色贰, 蓝色三, 紫色四 [0${v:myIdx}]}点" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${is散}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;θ: 0${v:tmp_dir-4} * π/2&#13;&#10;&#13;&#10;A: 0.5, 7.0&#13;&#10;1: 0.5, 8.5&#13;&#10;B: 7.0, 0.5&#13;&#10;2: 8.5, 0.5&#13;&#10;C: 6, 17.25&#13;&#10;3: 6, 18.75&#13;&#10;D: 17.25, 6&#13;&#10;4: 18.75, 6" ActionType="NamedCallback" Asynchronous="False" Description="分摊" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${is散}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;θ: 0${v:tmp_dir-4} * π/2&#13;&#10;&#13;&#10;A: 0.5, 0.5&#13;&#10;B: 8.75, 8.75&#13;&#10;C: 8.75, 18&#13;&#10;D: 18, 8.75&#13;&#10;1: 0.5, 8.6&#13;&#10;2: 8.6, 0.5&#13;&#10;3: 0.5, 18&#13;&#10;4: 18, 0.5" ActionType="NamedCallback" Asynchronous="False" Description="分散" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${is散}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="7" VariableName="tmp_dir-4" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="8" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="7500" Asynchronous="False" DescBgColor="dff" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_电容_phase}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
</Triggers>
</Folder>
<Folder Id="5e6550f6-45ce-45f1-83a8-0a2097bfa66b" Name="电容2 5*5" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="2. 播报" Id="ff2560b5-e4bb-4008-883c-be67bb6c28c4" RegularExpression="^M4s_点名激光">
<Actions>
<Action OrderNumber="1" TableVariableOp="Build" TableVariableTarget="M4s_点名激光" TableVariableExpression="=,${d:M4s_点名激光_n.joinall(&quot;=&quot;, &quot;,&quot;)}" ActionType="TableVariable" Asynchronous="False" />
<Action OrderNumber="2" TableVariableOp="SortLine" TableVariableName="M4s_点名激光" TableVariableY="s: ${d:M4s_电容_is长[${_row[1]}]}, s-: ${_row[2]}, n: ${_entity[${_row[1]}].roleid}" ActionType="TableVariable" Asynchronous="False" />
<Action OrderNumber="3" ListVariableOp="SetAll" ListVariableName="tmp_result" ListVariableExpression="${f:pick(${n: ${_idx} &gt; 4 }): 短, 长} ${t:M4s_点名激光[2][${_idx}]}：${_entity[${t:M4s_点名激光[1][${_idx}]}].jobCN2} ${_entity[${t:M4s_点名激光[1][${_idx}]}].name}" ListVariableIndex="8" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${f:contain(&quot; &quot;):${_me}}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" ListVariableOp="SetAll" ListVariableName="tmp_result" ListVariableExpression="${f:pick(${n: ${_idx} &gt; 4 }): 短, 長} ${t:M4s_点名激光[2][${_idx}]}：${_entity[${t:M4s_点名激光[1][${_idx}]}].job} ${_entity[${t:M4s_点名激光[1][${_idx}]}].name}" ListVariableIndex="8" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${f:contain(&quot; &quot;):${_me}}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" NamedCallbackName="command" NamedCallbackParam="/e &#13;&#10;${l:tmp_result.join(&quot;⏎&quot;)}" ActionType="NamedCallback" Asynchronous="False" />
<Action OrderNumber="6" DictVariableValueType="Numeric" UseTTSTextExpression="${?d: &#13;&#10;  02 = 短2，两侧贴边放点名, &#13;&#10;  03 = 短3，角落放点名, &#13;&#10;  11 = 长1，人群集合, &#13;&#10;  12 = 长2，人群集合 &#13;&#10;[${d:M4s_电容_is长[${_me.id}]}${d:M4s_点名激光_n[${_me.id}]}]}" ActionType="UseTTS" ExecutionDelayExpression="2000" Asynchronous="False" />
<Action OrderNumber="7" DictVariableValueType="Numeric" UseTTSTextExpression="${?d: &#13;&#10;  02 = 短点名，人群集合, &#13;&#10;  03 = 短点名，人群集合, &#13;&#10;  11 = 长1，两侧贴边放点名, &#13;&#10;  12 = 长2，角落放点名 &#13;&#10;[${d:M4s_电容_is长[${_me.id}]}${d:M4s_点名激光_n[${_me.id}]}]}" ActionType="UseTTS" ExecutionDelayExpression="20000" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="0. 开始 长短 buff" Id="13273c52-f0b9-4e6d-9d37-e712bfad10fb" RegularExpression="^.{15}\S+ 1A:F9F:[^:]+:(?&lt;t&gt;[^:]+):.{8}:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="M4s_电容_phase" VariableExpression="2" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" DictVariableOp="Set" DictVariableValueType="Numeric" DictVariableName="M4s_电容_is长" DictVariableKey="${tid}" DictVariableValue="${t} &gt; 30" ActionType="DictVariable" Asynchronous="False" />
<Action OrderNumber="3" DictVariableValueType="Numeric" UseTTSTextExpression="${f:pick(${n: ${t} &gt; 30 }): 第一轮短点名, 第二轮肠点名}，八方分散" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="3. 左右刀 + 分散分摊" Id="8adc27fa-a099-4b05-aeac-0f8609db58fb" RegularExpression="^M4s_左右刀:is右:(?&lt;is右&gt;.):is散:(?&lt;is散&gt;.)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="电容 phase = 2" DescriptionOverride="True" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;&#13;&#10;// 面基：&#13;&#10;// θ: 0${is右} ? -π : 0&#13;&#10;&#13;&#10;// 场基：&#13;&#10;ScaleX: 0${is右} ? 1 : -1&#13;&#10;ScaleY: -1&#13;&#10;&#13;&#10;1: 0.5, 0&#13;&#10;B: 8.5, 0&#13;&#10;A: 0.5, 8.5&#13;&#10;2: 0.5, -8.5&#13;&#10;&#13;&#10;C: 10.8,  10.8&#13;&#10;D: 10.8, -10.8&#13;&#10;3: 6,  18.8&#13;&#10;4: 6, -18.8" ActionType="NamedCallback" Asynchronous="False" Description="分散" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${is散}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" UseTTSTextExpression="${if: 0${is右} ? 右 : 左 }半场分散，${?l: &#13;&#10;  Boss前方A, &#13;&#10;  正${if: 0${is右} ? 右 : 左 }B, &#13;&#10;  ${if: 0${is右} ? 右 : 左 }前C, &#13;&#10;  ${if: 0${is右} ? 右 : 左 }后D, &#13;&#10;  Boss脚下壹, &#13;&#10;  Boss身后贰, &#13;&#10;  Boss前方三, &#13;&#10;  Boss后方四 &#13;&#10;[${v:myIdx}]}点" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${is散}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;&#13;&#10;// 面基：&#13;&#10;// θ: 0${is右} ? -π : 0&#13;&#10;&#13;&#10;// 场基：&#13;&#10;ScaleX: 0${is右} ? 1 : -1&#13;&#10;ScaleY: -1&#13;&#10;&#13;&#10;A: 1.1, 8.5&#13;&#10;1: 1.1, 11.1&#13;&#10;B: 8.5, 0&#13;&#10;2: 11.1, 0&#13;&#10;C: 0.5, 0&#13;&#10;3: 1, 0, -2&#13;&#10;D: 1.1, -8.5&#13;&#10;4: 1.1, -11.1" ActionType="NamedCallback" Asynchronous="False" Description="分摊" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${is散}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" UseTTSTextExpression="${if: 0${is右} ? 右 : 左 }半场分摊，${?d: &#13;&#10;  21 = 去前方红色点，低层数, &#13;&#10;  31 = 去正${if: 0${is右} ? 右 : 左 }黄色点，高层数, &#13;&#10;  20 = 去后方紫色点，低层数, &#13;&#10;  30 = 去正中心，高层数&#13;&#10;[${n: 0${d:M4s_电容_is长[${_me.id}]} + 0${d:M4s_点名激光_n[${_me.id}]} }${_me.isTH}]}" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${is散}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="7500" Asynchronous="False" DescBgColor="dff" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_电容_phase}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="4. 地板 AoE" Id="d57bfe3a-49b7-4bbf-ad4f-eef03e8b09cb" RegularExpression="^.{15}\S+ 107:4.{7}:95CF:(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="条件：只看正点场边的" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="Increment" VariableName="M4s_电容2_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="tmp_θ" VariableExpression="θ(100, 96, ${x}, ${y})" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, -1&#13;&#10;θ: 0${v:tmp_θ}&#13;&#10;scaleY: 13.1/7&#13;&#10;&#13;&#10;A: 0, 0&#13;&#10;B: 0, 1&#13;&#10;C: 0, 2&#13;&#10;D: 0, 3&#13;&#10;1: 0, 4&#13;&#10;2: 0, 5&#13;&#10;3: 0, 6&#13;&#10;4: 0, 7" ActionType="NamedCallback" Asynchronous="False" Description="人群" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${d:M4s_电容_is长[${_me.id}]}" ExpressionTypeL="String" ExpressionR="${v:M4s_电容2_n} = 1" ExpressionTypeR="Numeric" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, -1&#13;&#10;θ: ${v:tmp_θ}&#13;&#10;scaleX: ${_me.isD} ? 13.25/7 : -13.25/7 &#13;&#10;scaleY: 13.25/7&#13;&#10;&#13;&#10;A: 0, -0&#13;&#10;B: 1, -1&#13;&#10;C: 2, -2&#13;&#10;D: 3, -3&#13;&#10;1: 4, -4&#13;&#10;2: 5, -5&#13;&#10;3: 6, -6&#13;&#10;4: 7, -7" ActionType="NamedCallback" Asynchronous="False" Description="上半场角落（非 BLU）" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${d:M4s_电容_is长[${_me.id}]} ${d:M4s_点名激光_n[${_me.id}]} ${v:M4s_电容2_n}" ExpressionTypeL="String" ExpressionR="0 3 1|1 2 2" ExpressionTypeR="String" ConditionType="RegexMatch" />
<ConditionSingle Enabled="true" ExpressionL="${_me.jobEN3}" ExpressionTypeL="String" ExpressionR="BLU" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, -1&#13;&#10;θ: ${v:tmp_θ}&#13;&#10;scaleX: ${_me.isD} ? 13.25/7 : -13.25/7 &#13;&#10;scaleY: 5.25/7&#13;&#10;&#13;&#10;A: 0, 0&#13;&#10;B: 1, 1&#13;&#10;C: 2, 2&#13;&#10;D: 3, 3&#13;&#10;1: 4, 4&#13;&#10;2: 5, 5&#13;&#10;3: 6, 6&#13;&#10;4: 7, 7" ActionType="NamedCallback" Asynchronous="False" Description="下半场贴边（非 BLU）" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${d:M4s_电容_is长[${_me.id}]} ${d:M4s_点名激光_n[${_me.id}]} ${v:M4s_电容2_n}" ExpressionTypeL="String" ExpressionR="0 2 1|1 1 2" ExpressionTypeR="String" ConditionType="RegexMatch" />
<ConditionSingle Enabled="true" ExpressionL="${_me.jobEN3}" ExpressionTypeL="String" ExpressionR="BLU" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="7" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, -1&#13;&#10;θ: ${v:tmp_θ}&#13;&#10;scale: 13.25/4&#13;&#10;&#13;&#10;A: 1, -1&#13;&#10;B: 2, -2&#13;&#10;C: 3, -3&#13;&#10;D: 4, -4&#13;&#10;1: -1, -1&#13;&#10;2: -2, -2&#13;&#10;3: -3, -3&#13;&#10;4: -4, -4" ActionType="NamedCallback" Asynchronous="False" Description="上半场角落（BLU）" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${d:M4s_电容_is长[${_me.id}]} ${d:M4s_点名激光_n[${_me.id}]} ${v:M4s_电容2_n}" ExpressionTypeL="String" ExpressionR="0 3 1|1 2 2" ExpressionTypeR="String" ConditionType="RegexMatch" />
<ConditionSingle Enabled="true" ExpressionL="${_me.jobEN3}" ExpressionTypeL="String" ExpressionR="BLU" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="8" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, -1&#13;&#10;θ: ${v:tmp_θ}&#13;&#10;scaleX: 13.25/4&#13;&#10;scaleY: 5.25/4&#13;&#10;&#13;&#10;A: 1, 1&#13;&#10;B: 2, 2&#13;&#10;C: 3, 3&#13;&#10;D: 4, 4&#13;&#10;1: -1, 1&#13;&#10;2: -2, 2&#13;&#10;3: -3, 3&#13;&#10;4: -4, 4" ActionType="NamedCallback" Asynchronous="False" Description="下半场贴边（BLU）" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${d:M4s_电容_is长[${_me.id}]} ${d:M4s_点名激光_n[${_me.id}]} ${v:M4s_电容2_n}" ExpressionTypeL="String" ExpressionR="0 2 1|1 1 2" ExpressionTypeR="String" ConditionType="RegexMatch" />
<ConditionSingle Enabled="true" ExpressionL="${_me.jobEN3}" ExpressionTypeL="String" ExpressionR="BLU" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="9" VariableName="tmp_θ" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="10" LogMessageText="M4s_cd5:6.2" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
<Action OrderNumber="11" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="6800" Asynchronous="False" DescBgColor="dff" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="round(((${x} - 100) ^ 2 + (${y} - 96) ^ 2) / 16)" ExpressionTypeL="Numeric" ExpressionR="16" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="1. 激光计数" Id="65c6e62b-bf67-4c18-b114-84609b8b723c" RegularExpression="^.{15}\S+ 1[56]:4.{7}:[^:]*:9786:[^:]*:(?&lt;tid&gt;1.{7})">
<Actions>
<Action OrderNumber="1" DictVariableOp="Set" DictVariableValueType="Numeric" DictVariableName="M4s_点名激光_n" DictVariableKey="${tid}" DictVariableValue="${_val} + 1" ActionType="DictVariable" Asynchronous="False" />
<Action OrderNumber="2" UseTTSTextExpression="${d:M4s_点名激光_n[${_me.id}]}层" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="3" DictVariableValueType="Numeric" LogMessageText="M4s_点名激光" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${d:M4s_点名激光_n.sum}" ExpressionTypeL="String" ExpressionR="16" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="ae710237-b644-448e-a025-28e6fdb34f5e" Name="左右刀  输出日志 =&gt; 电容 1/2" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="1. 本体左右刀 Sidewise Spark" Id="38f22477-a75a-4b80-a07a-e23791e48d6e" RegularExpression="^.{15}\S+ 14:(?&lt;sid&gt;4.{7}):[^:]+:95E(?&lt;type&gt;C|D):">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="M4s_左右刀_is右" VariableExpression="${type} == D" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="Increment" VariableName="M4s_左右刀_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="M4s_左右刀:is右:${v:M4s_左右刀_is右}:is散:${v:M4s_左右刀_is散}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_左右刀_n} % 2" ExpressionTypeL="Numeric" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 分散分摊" Id="34423b5e-604c-4eb2-bf83-d9826ace663a" RegularExpression="^.{15}\S+ 1A:B9A:[^:]+:(?&lt;t&gt;[^:]+):.{8}:[^:]*:.{8}:[^:]*:(?&lt;type&gt;2F[01]):">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="M4s_左右刀_is散" VariableExpression="${type} == 2F1" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="Increment" VariableName="M4s_左右刀_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="M4s_左右刀:is右:${v:M4s_左右刀_is右}:is散:${v:M4s_左右刀_is散}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_左右刀_n} % 2" ExpressionTypeL="Numeric" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers />
</Folder>
<Folder Id="e83cfe58-e8e5-4c20-8c95-8a5693dae9e2" Name="D. 离子簇1 Ion Cluster" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="2. 碎地板" Id="9374e505-3b5c-45a8-8af1-6c39e5ba9143" RegularExpression="^.{15}\S+ 15:4.{7}:[^:]+:95D(?&lt;type&gt;3|2):">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="M4s_离子簇_x" VariableExpression="${type} == 3 ? 85 : 115" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 100, 0&#13;&#10;scaleX: ${v:M4s_离子簇_x} &gt; 100 ? 1 : -1&#13;&#10;&#13;&#10;4: 0.00, -18&#13;&#10;3: 3.73, -18&#13;&#10;2: 7.46, -18&#13;&#10;1: 11.2, -18 &#13;&#10;D: 15, -18 &#13;&#10;C: 15, -12 &#13;&#10;B: 15, -6 &#13;&#10;A: 15, -0 " ActionType="NamedCallback" Asynchronous="False" Description="安全侧" DescBgColor="dff" DescriptionOverride="True" />
<Action OrderNumber="3" UseTTSTextExpression="${?d: 3 = 左, 2 = 右 [${type}]}" ActionType="UseTTS" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1. 正负 buff" Id="990ed1e0-2a48-4ab0-a55f-0aefa90df8aa" RegularExpression="^.{15}\S+ 1A:FA(?&lt;type&gt;[01]):[^:]+:62[^:]*:.{8}:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${?d: 0 = 正电，找蓝色, 1 = 负电，找黄色 [${type}]}" ActionType="UseTTS" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="M4s_离子炮_is黄" VariableExpression="${type} = 0" ActionType="Variable" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="3. 黄蓝炮" Id="89caa5d2-2617-4d99-a1c0-e98b60493fda" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:95D(?&lt;type&gt;6|7):">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="tmp_is黄前" VariableExpression="${type} = 6" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="M4s_离子炮_is前" VariableExpression="${v:tmp_is黄前} != ${v:M4s_离子炮_is黄}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" UseTTSTextExpression="${f:pick(${v:M4s_离子炮_is前}): 后, 前} ${f:pick(${_me.isT}): &quot;&quot;, &quot;贴近开减伤&quot;}" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:M4s_离子炮_is黄前}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" UseTTSTextExpression="${f:pick(${n: ${v:tmp_is黄前} = ${v:M4s_离子炮_is黄前} }): 换边, 同侧} ${f:pick(${_me.isT}): &quot;&quot;, &quot;贴近开减伤&quot;}" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:M4s_离子炮_is黄前}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" VariableOp="SetString" VariableName="M4s_离子炮_is黄前" VariableExpression="${v:tmp_is黄前}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: ${v:M4s_离子簇_x}, 100, 0&#13;&#10;scaleY: (${v:M4s_离子炮_is前} ? -1 : 1) * (${_me.isT} ? 1.1 : 5)&#13;&#10;&#13;&#10;A: fakeclear&#13;&#10;B: fakeclear&#13;&#10;C: fakeclear&#13;&#10;D: fakeclear&#13;&#10;1: -3.9, 1&#13;&#10;2: -1.3, 1&#13;&#10;3:  1.3, 1&#13;&#10;4:  3.9, 1" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:M4s_离子炮_is黄}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="4. debuff" Id="71173e8c-bd9e-45e9-8afc-5a38a1a11c00" RegularExpression="^.{15}\S+ 1A:FA(?&lt;type&gt;[2-6]):[^:]+:(?&lt;t&gt;[^:]+):.{8}:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="2-6：远 近 钢 月 紫圈" DescriptionOverride="True" />
<Action OrderNumber="2" UseTTSTextExpression="${?d: &#13;&#10;  2 = 中间靠前，远点名, &#13;&#10;  3 = 中间靠前，近点名, &#13;&#10;  4 = 去两侧，钢铁,&#13;&#10;  5 = 去两侧，月环,&#13;&#10;  6 = 去后面，大圈 &#13;&#10;[${type}]}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: ${v:M4s_离子簇_x}, 100, 0&#13;&#10;scaleY: ${v:M4s_离子炮_is前} ? -1 : 1&#13;&#10;&#13;&#10;A: 0, 3.5&#13;&#10;B: fakeclear&#13;&#10;C: fakeclear&#13;&#10;D: fakeclear&#13;&#10;1: fakeclear&#13;&#10;2: fakeclear&#13;&#10;3: fakeclear&#13;&#10;4: fakeclear" ActionType="NamedCallback" Asynchronous="False" Description="远近" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${type}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${type}" ExpressionTypeL="String" ExpressionR="3" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: ${v:M4s_离子簇_x}, 100, 0&#13;&#10;scaleX: ${_me.isTH} ? 1 : -1&#13;&#10;scaleY: ${v:M4s_离子炮_is前} ? -1 : 1&#13;&#10;&#13;&#10;A: -3, 2&#13;&#10;B:  3, 2&#13;&#10;C: fakeclear&#13;&#10;D: fakeclear&#13;&#10;1: fakeclear&#13;&#10;2: fakeclear&#13;&#10;3: fakeclear&#13;&#10;4: fakeclear" ActionType="NamedCallback" Asynchronous="False" Description="钢月" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${type}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${type}" ExpressionTypeL="String" ExpressionR="5" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: ${v:M4s_离子簇_x}, 100, 0&#13;&#10;scaleY: ${v:M4s_离子炮_is前} ? -1 : 1&#13;&#10;&#13;&#10;A: 0, 5&#13;&#10;B: fakeclear&#13;&#10;C: fakeclear&#13;&#10;D: fakeclear&#13;&#10;1: fakeclear&#13;&#10;2: fakeclear&#13;&#10;3: fakeclear&#13;&#10;4: fakeclear" ActionType="NamedCallback" Asynchronous="False" Description="紫圈" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${type}" ExpressionTypeL="String" ExpressionR="6" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" NamedCallbackName="place" NamedCallbackParam="clear" ActionType="NamedCallback" ExecutionDelayExpression="5300" Asynchronous="False" DescBgColor="dff" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="3. 黄蓝炮（无 buff 时防报错）" Id="c9d310f6-690f-49b4-b5b0-95338f487157" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:95D(?&lt;type&gt;6|7):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="没有 buff，等死吧" ActionType="UseTTS" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:M4s_离子炮_is黄}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
</Triggers>
</Folder>
<Folder Id="0c1f921b-73ef-4167-ad32-39a5635a257a" Name="E. 转场 p1 -&gt; p2" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="3. 转场时间轴" Id="61526abc-ad40-4d6c-ac9c-1086dc87278b" RegularExpression="^M4s_转场2">
<Actions>
<Action OrderNumber="1" LogMessageText="M4s_cd5:22.3" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="M4s_cd5:34.3" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
<Action OrderNumber="3" UseTTSTextExpression="二十秒转场，C点集合" ActionType="UseTTS" ExecutionDelayExpression="2300" Asynchronous="False" />
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="load" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="5" UseTTSTextExpression="十五" ActionType="UseTTS" ExecutionDelayExpression="5000" Asynchronous="False" />
<Action OrderNumber="6" UseTTSTextExpression="十" ActionType="UseTTS" ExecutionDelayExpression="5000" Asynchronous="False" />
<Action OrderNumber="7" UseTTSTextExpression="五" ActionType="UseTTS" ExecutionDelayExpression="5000" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 分散点名 * 4" Id="c533c3b6-741b-4a99-b0f6-4dd71d6303bc" RegularExpression="^.{15}\S+ 1[56]:4.{7}:[^:]*:98CE:[^:]*:(?&lt;tid&gt;1.{7}):([^:]*:){38}0:">
<Actions>
<Action OrderNumber="1" ListVariableOp="Push" ListVariableName="M4s_转场_分散" ListVariableExpression="${tid}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="2" UseTTSTextExpression="${f:pick(${l:M4s_转场_分散.contain(${_me.id})}): 靠前挡枪, 靠后躲避}" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${l:M4s_转场_分散.size}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1. 初始读条" Id="c5c9e5ac-8ad1-4068-9bbc-a0551432d3f1" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:90FE:" PrevActionsRefire="Deny" PeriodRefire="Deny" RefirePeriodExpression="1000">
<Actions>
<Action OrderNumber="1" ListVariableName="M4s_转场_分散" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="Increment" VariableName="M4s_转场_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, 0&#13;&#10;θ: -0.875 * π&#13;&#10;A:  0, -6&#13;&#10;B:  6,  0&#13;&#10;C:  0,  6&#13;&#10;D: -6,  0&#13;&#10;1:  0, -9&#13;&#10;2:  9,  0&#13;&#10;3:  0,  9&#13;&#10;4: -9,  0" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="4" ActionType="Placeholder" ExecutionDelayExpression="3030" Asynchronous="False" />
<Action OrderNumber="5" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, 0&#13;&#10;θ: -0.75 * π&#13;&#10;A:  0, -6&#13;&#10;B:  6,  0&#13;&#10;C:  0,  6&#13;&#10;D: -6,  0&#13;&#10;1:  0, -9&#13;&#10;2:  9,  0&#13;&#10;3:  0,  9&#13;&#10;4: -9,  0" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="6" ActionType="Placeholder" ExecutionDelayExpression="3030" Asynchronous="False" />
<Action OrderNumber="7" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, 0&#13;&#10;θ: -0.875 * π&#13;&#10;A:  0, -6&#13;&#10;B:  6,  0&#13;&#10;C:  0,  6&#13;&#10;D: -6,  0&#13;&#10;1:  0, -9&#13;&#10;2:  9,  0&#13;&#10;3:  0,  9&#13;&#10;4: -9,  0" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="8" ActionType="Placeholder" ExecutionDelayExpression="3030" Asynchronous="False" />
<Action OrderNumber="9" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, 0&#13;&#10;θ: -0.75 * π&#13;&#10;A:  0, -6&#13;&#10;B:  6,  0&#13;&#10;C:  0,  6&#13;&#10;D: -6,  0&#13;&#10;1:  0, -9&#13;&#10;2:  9,  0&#13;&#10;3:  0,  9&#13;&#10;4: -9,  0" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="10" ActionType="Placeholder" ExecutionDelayExpression="3030" Asynchronous="False" />
<Action OrderNumber="11" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, 0&#13;&#10;θ: -0.875 * π&#13;&#10;A:  0, -6&#13;&#10;B:  6,  0&#13;&#10;C:  0,  6&#13;&#10;D: -6,  0&#13;&#10;1:   0, -14&#13;&#10;2:  14,   0&#13;&#10;3:   0,  14&#13;&#10;4: -14,   0" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="12" UseTTSTextExpression="靠${if: ${v:myIdx} % 4 % 3 = 0 ? 后 : 前 }分散" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="13" ActionType="Placeholder" ExecutionDelayExpression="3030" Asynchronous="False" />
<Action OrderNumber="14" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, 0&#13;&#10;θ: -0.75 * π&#13;&#10;A:  0, -6&#13;&#10;B:  6,  0&#13;&#10;C:  0,  6&#13;&#10;D: -6,  0&#13;&#10;1:  0, -9&#13;&#10;2:  9,  0&#13;&#10;3:  0,  9&#13;&#10;4: -9,  0" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="15" ActionType="Placeholder" ExecutionDelayExpression="3030" Asynchronous="False" />
<Action OrderNumber="16" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, 0&#13;&#10;θ: -0.875 * π&#13;&#10;A:  0, -6&#13;&#10;B:  6,  0&#13;&#10;C:  0,  6&#13;&#10;D: -6,  0&#13;&#10;1:  0, -9&#13;&#10;2:  9,  0&#13;&#10;3:  0,  9&#13;&#10;4: -9,  0" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="17" UseTTSTextExpression="穿" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="18" LogMessageText="M4s_转场2" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_转场_n}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="0. 转阶段开始" Id="93aa2a23-4dc7-48b8-acc9-e5f8d8dec1b7" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:98D3:">
<Actions>
<Action OrderNumber="1" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, 0&#13;&#10;θ: -0.875 * π&#13;&#10;A:  0, -6&#13;&#10;B:  6,  0&#13;&#10;C:  0,  6&#13;&#10;D: -6,  0&#13;&#10;1:  0, -9&#13;&#10;2:  9,  0&#13;&#10;3:  0,  9&#13;&#10;4: -9,  0" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="1" UseTTSTextExpression="转阶段站位" ActionType="UseTTS" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="3582a182-4e71-44ed-8f72-00d82bf00ee7" Name="F. 地火" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="2. 处理地火" Id="fabc4de2-cbf0-4577-a905-a00c0fb9c841" RegularExpression="^M4s_地火:L:(?&lt;l&gt;.):R:(?&lt;r&gt;.)">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="左${?l: 壹, 贰, 叁, 肆 [${l}]}右${?l: 壹, 贰, 叁, 肆 [${r}]}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="action: circle&#13;&#10;center: 85, 140 + ${l} * 10, 0&#13;&#10;r: 2√2&#13;&#10;θ: π/4&#13;&#10;waymarks: DBAC&#13;&#10;---&#13;&#10;action: circle&#13;&#10;center: 115, 140 + ${r} * 10, 0&#13;&#10;r: 2√2&#13;&#10;θ: π/4&#13;&#10;waymarks: 4213" ActionType="NamedCallback" Asynchronous="False" Description="左右最终安全行" DescBgColor="dff" DescriptionOverride="True" />
<Action OrderNumber="3" ActionType="Placeholder" Asynchronous="False" Description="不复原标点 由火/雷直条标点复原" DescriptionOverride="True" />
<Action OrderNumber="4" UseTTSTextExpression="去第${?l: 壹, 贰, 叁, 肆 [${f:pick(${n: ${_me.x} &gt; 100}): ${l}, ${r} }]}行" ActionType="UseTTS" ExecutionDelayExpression="7800" Asynchronous="False" />
<Action OrderNumber="5" UseTTSTextExpression="准备接线" ActionType="UseTTS" ExecutionDelayExpression="10000" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1. 获取地火 =&gt; 2" Id="b8532ea8-045c-4412-95cc-842fff2c492a" RegularExpression="^.{15}\S+ 107:4.{7}:95F5:(8[45][^:]+:(?&lt;yL&gt;[^:]+):[^:]+:-1|11[45][^:]+:(?&lt;yR&gt;[^:]+):[^:]+:1)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="只捕获左右两排朝场外的两个" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="M4s_地火_rowL" VariableExpression="round((${yR} - 140) / 10)" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${yR}" ExpressionTypeL="String" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="M4s_地火_rowR" VariableExpression="round((${yL} - 140) / 10)" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${yL}" ExpressionTypeL="String" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" LogMessageText="M4s_地火:L:${v:M4s_地火_rowL}:R:${v:M4s_地火_rowR}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:M4s_地火_rowL}${ev:M4s_地火_rowR}" ExpressionTypeL="String" ExpressionR="11" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="4e839ce6-9cb5-4f1a-984f-af1f892f74c6" Name="G. 接线 Mustard Bomb" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="2. 接到/传走毒" Id="1c360923-ee2f-40de-9d6a-95c062a8635e" RegularExpression="^.{15}\S+ 1A:FA(?&lt;type&gt;[78]):[^:]+:[0-8][^:]*:.{8}:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="传走：疫苗 buff" DescriptionOverride="True" />
<Action OrderNumber="2" />
<Action OrderNumber="3" UseTTSTextExpression="${?d: 7 = 接到了, 8 = 传走了 [${type}]}" ActionType="UseTTS" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="1. 火伤 debuff" Id="ea4afa56-e2c5-42b2-802f-6cca65c24e29" RegularExpression="^.{15}\S+ 1A:B79:[^:]+:10[^:]*:.{8}:[^:]*:(?&lt;tid&gt;1.{7}):">
<Actions>
<Action OrderNumber="1" ListVariableOp="Push" ListVariableName="M4s_接线" ListVariableExpression="${tid}" VariableOp="SetString" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="2" UseTTSTextExpression="${f:pick(${l:M4s_接线.contain(${_me.id})}): 去接毒, 不用接毒}" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${l:M4s_接线.size}" ExpressionTypeL="String" ExpressionR="6" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${_me.isT}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="0. 读条" Id="474b63bf-3b22-4264-aa5c-cc4aafda4290" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:961E:">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="接线死刑" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_me.isT}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="2" UseTTSTextExpression="接线后分散" ActionType="UseTTS">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_me.isT}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" ListVariableName="M4s_接线" VariableOp="SetString" ActionType="ListVariable" Asynchronous="False" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="6267e52a-528b-4eee-aadb-5e91240f50ae" Name="H. 钢铁/击退" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="2. 释放" Id="c0aa7604-2d62-49f1-aadd-2237c136375a" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:960(?&lt;type&gt;[6-9]):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${?d: 6 = 右侧躲钢铁, 7 = 左侧击退, 8 = 左侧躲钢铁, 9 = 右侧击退 [${type}]}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="action: arc&#13;&#10;center: ${type} = 6 ? 90 : 110, 165, 0&#13;&#10;r: 19.25&#13;&#10;θ: ${type} = 6 ? π/2 : -π/2&#13;&#10;dθ: 102.44°&#13;&#10;waymarks: ${?d: 6 = 4321XXXXDCBA, 8 = ABCDXXXX1234 [${type}]}" ActionType="NamedCallback" Asynchronous="False" Description="钢铁" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${type} % 2" ExpressionTypeL="Numeric" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 165, 0&#13;&#10;scaleX: ${type} = 9 ? 1 : -1&#13;&#10;A: 7.77, 0&#13;&#10;B: 6.07, 0.92&#13;&#10;C: 6.07, -0.92&#13;&#10;D: fakeclear&#13;&#10;1: fakeclear&#13;&#10;2: fakeclear&#13;&#10;3: fakeclear&#13;&#10;4: fakeclear" ActionType="NamedCallback" Asynchronous="False" Description="击退" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${type} % 2" ExpressionTypeL="Numeric" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" ActionType="Placeholder" ExecutionDelayExpression="6000" Asynchronous="False" />
<Action OrderNumber="5" UseTTSTextExpression="${?d: 6 = 穿, 7 = 右侧击退, 8 = 穿, 9 = 左侧击退 [${type}]}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="action: arc&#13;&#10;center: ${type} = 8 ? 90 : 110, 165, 0&#13;&#10;r: 19.25&#13;&#10;θ: ${type} = 8 ? π/2 : -π/2&#13;&#10;dθ: 102.44°&#13;&#10;waymarks: ${?d: 8 = 4321XXXXDCBA, 6 = ABCDXXXX1234 [${type}]}" ActionType="NamedCallback" Asynchronous="False" Description="钢铁" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${type} % 2" ExpressionTypeL="Numeric" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="7" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 165, 0&#13;&#10;scaleX: ${type} = 7 ? 1 : -1&#13;&#10;A: 7.77, 0&#13;&#10;B: 6.07, 0.92&#13;&#10;C: 6.07, -0.92&#13;&#10;D: fakeclear&#13;&#10;1: fakeclear&#13;&#10;2: fakeclear&#13;&#10;3: fakeclear&#13;&#10;4: fakeclear" ActionType="NamedCallback" Asynchronous="False" Description="击退" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${type} % 2" ExpressionTypeL="Numeric" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="8" ActionType="Placeholder" ExecutionDelayExpression="4000" Asynchronous="False" />
<Action OrderNumber="9" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1. 记录" Id="9552990f-d585-4f46-96c6-0a358f519d0e" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:960(?&lt;type&gt;[2-5]):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="储存${?d: 2 = 左钢铁, 3 = 左击退, 4 = 右钢铁, 5 = 右击退 [${type}]}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="SetString" VariableName="M4s_store" VariableExpression="${?d: 2 = 右侧躲钢铁, 3 = 左侧击退, 4 = 左侧躲钢铁, 5 = 右侧击退 [${type}]}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="a13dabe2-4736-41ea-8aca-b68013966d33" Name="K. 链雷 Chain Lightning" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="1. 记录实体（塔读条）" Id="b3335c50-dd81-4119-927e-264dfdd5eb98" RegularExpression="^.{15}\S+ 107:(?&lt;sid&gt;4.{7}):9617:(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):">
<Actions>
<Action OrderNumber="1" DictVariableOp="Set" DictVariableValueType="Numeric" DictVariableName="M4s_链雷_isR" DictVariableKey="${sid}" DictVariableValue="${x} &gt; 100" ActionType="DictVariable" />
<Action OrderNumber="2" DictVariableOp="Set" DictVariableValueType="Numeric" DictVariableName="M4s_链雷_row" DictVariableKey="${sid}" DictVariableValue="round((${y} - 146.25) / 7.5)" ActionType="DictVariable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="4. 时间轴" Id="b0523f51-9dcb-43e2-b582-e029f6a003df" RegularExpression="^M4s_链雷:isFirst:(?&lt;isFirst&gt;.):rows:(?&lt;r1&gt;.)(?&lt;r2&gt;.)(?&lt;r3&gt;.)(?&lt;r4&gt;.)$">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" ExecutionDelayExpression="${isFirst} ? 0 : 2050" />
<Action OrderNumber="2" UseTTSTextExpression="去第${r1}行" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="3" ActionType="Placeholder" ExecutionDelayExpression="3100" />
<Action OrderNumber="4" UseTTSTextExpression="去第${r2}行" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="5" NamedCallbackName="AdvWm" NamedCallbackParam="action: place &#13;&#10;A: fakeclear&#13;&#10;1: fakeclear" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="6" ActionType="Placeholder" ExecutionDelayExpression="5400" />
<Action OrderNumber="7" UseTTSTextExpression="去第${r3}行" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="8" NamedCallbackName="AdvWm" NamedCallbackParam="action: place &#13;&#10;B: fakeclear&#13;&#10;2: fakeclear" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="9" ActionType="Placeholder" ExecutionDelayExpression="5400" />
<Action OrderNumber="10" UseTTSTextExpression="去第${r4}行，准备${v:M4s_store}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="11" NamedCallbackName="AdvWm" NamedCallbackParam="action: place &#13;&#10;C: fakeclear&#13;&#10;3: fakeclear" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="12" ActionType="Placeholder" ExecutionDelayExpression="5400" />
<Action OrderNumber="13" NamedCallbackName="AdvWm" NamedCallbackParam="action: place &#13;&#10;D: fakeclear&#13;&#10;4: fakeclear" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="14" ActionType="Placeholder" ExecutionDelayExpression="${isFirst} ? 14050 : 12000" />
<Action OrderNumber="15" UseTTSTextExpression="准备接线" ActionType="UseTTS" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 记录每轮闪电 =&gt; 3" Id="7e535607-56b8-4cd0-9eb2-28bbb2c9de74" RegularExpression="^.{15}\S+ 23:(?&lt;tid&gt;4.{7}):[^:]*:[^:]*:[^:]*:[^:]*:[^:]*:011[78]:">
<Actions>
<Action OrderNumber="1" VariableOp="Increment" VariableName="M4s_链雷_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="Increment" VariableName="M4s_链雷_Σrow" VariableExpression="${d:M4s_链雷_row[${tid}]}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="M4s_链雷:n:${n: ${v:M4s_链雷_n} / 3}:isR:${d:M4s_链雷_isR[${tid}]}:row:${n: 10 - ${v:M4s_链雷_Σrow}}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_链雷_n} % 3" ExpressionTypeL="Numeric" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" VariableName="M4s_链雷_Σrow" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_链雷_n} % 3" ExpressionTypeL="Numeric" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="0. 初始读条" Id="42cc604b-928a-415a-91fc-b35b6d0acaa3" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9614:">
<Actions>
<Action OrderNumber="1" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 165, 0&#13;&#10;scaleX: 15&#13;&#10;scaleY: 7.5&#13;&#10;A: -1, -1.5&#13;&#10;B: -1, -0.5&#13;&#10;C: -1,  0.5&#13;&#10;D: -1,  1.5&#13;&#10;1:  1, -1.5&#13;&#10;2:  1, -0.5&#13;&#10;3:  1,  0.5&#13;&#10;4:  1,  1.5" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="2" UseTTSTextExpression="准备踩塔" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="UnsetRegexUniversal" VariableName="^M4s_链雷" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" NamedCallbackName="place" NamedCallbackParam="clear" ActionType="NamedCallback" ExecutionDelayExpression="11600" Asynchronous="False" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="3. 处理闪电" Id="dfc6372f-b44a-4738-99e7-02af528b87ce" RegularExpression="^M4s_链雷:n:(?&lt;n&gt;\d+):isR:(?&lt;isR&gt;\d+):row:(?&lt;row&gt;\d+)">
<Actions>
<Action OrderNumber="1" ListVariableOp="Push" ListVariableName="M4s_链雷_${if: ${isR} ? R : L}" ListVariableExpression="${row}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 165, 0&#13;&#10;scaleX: 11.25&#13;&#10;scaleY: 7.5&#13;&#10;${?l: A, 1, B, 2, C, 3, D, 4 [${n}]}: ${isR} ? 1 : -1, ${row} - 2.5, 0" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="3" ActionType="Placeholder" Description="第 1-4 次：报当前序列" DescriptionOverride="True" />
<Action OrderNumber="4" UseTTSTextExpression="${l:M4s_链雷_${if: ${isR} ? R : L}.join(&quot;, &quot;)}" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${_me.x} &gt; 100" ExpressionTypeL="Numeric" ExpressionR="${isR}" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${n}" ExpressionTypeL="String" ExpressionR="4" ExpressionTypeR="String" ConditionType="NumericLessEqual" />
</Condition>
</Action>
<Action OrderNumber="5" ActionType="Placeholder" Description="第 5/6 次：报完整序列" DescriptionOverride="True" />
<Action OrderNumber="6" UseTTSTextExpression="${l:M4s_链雷_${if: ${isR} ? R : L}.join(&quot;, &quot;)}, ${n: 10 - ${l:M4s_链雷_${if: ${isR} ? R : L}.sum}}" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${_me.x} &gt; 100" ExpressionTypeL="Numeric" ExpressionR="${isR}" ExpressionTypeR="String" ConditionType="StringEqualCase" />
<ConditionSingle Enabled="true" ExpressionL="${n}" ExpressionTypeL="String" ExpressionR="5|6" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Action>
<Action OrderNumber="7" ActionType="Placeholder" Description="第 6 次：报两侧完整序列" DescriptionOverride="True" />
<Action OrderNumber="8" NamedCallbackName="command" NamedCallbackParam="/e &#13;&#10;左：${l:M4s_链雷_L.join(&quot; &quot;)} ${n: 10 - ${l:M4s_链雷_L.sum}}&#13;&#10;右：${l:M4s_链雷_R.join(&quot; &quot;)} ${n: 10 - ${l:M4s_链雷_R.sum}}" ActionType="NamedCallback" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${n}" ExpressionTypeL="String" ExpressionR="6" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="9" ActionType="Placeholder" Description="第 8 次：触发时间轴" DescriptionOverride="True" />
<Action OrderNumber="10" VariableOp="SetString" VariableName="tmp_side" VariableExpression="${if: ${_me.x} &gt; 100 ? R : L}" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${n}" ExpressionTypeL="String" ExpressionR="8" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Action>
<Action OrderNumber="11" LogMessageText="M4s_链雷:isFirst:${n: (${v:tmp_side} == L) = ${isR} }:rows:${l:M4s_链雷_${v:tmp_side}.join(&quot;&quot;)}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${n}" ExpressionTypeL="String" ExpressionR="8" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Action>
<Action OrderNumber="12" VariableName="tmp_side" ActionType="Variable" Asynchronous="False">
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${n}" ExpressionTypeL="String" ExpressionR="8" ExpressionTypeR="String" ConditionType="RegexMatch" />
</Condition>
</Action>
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="d42e7372-1b3f-47a5-a3da-69b372dc7ca4" Name="I. 黄昏 Twilight" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="1.2 获取分身技能 * 4 =&gt; 2" Id="46baad59-fcb9-49dc-b82f-88fbfd8bcb4f" RegularExpression="^.{15}\S+ 111:(?&lt;id&gt;4.{7}):0197:11D(?&lt;type&gt;[6789]):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="先打右11D6 后打右11D7 先打左11D8 后打左11D9 " DescriptionOverride="True" />
<Action OrderNumber="2" DictVariableOp="Set" TableVariableOp="InsertLine" TableVariableName="M4s_暮_${f:pick(${n: ${type} % 2}): 先, 后}_isR" TableVariableExpression=",${id},${n: ${type} &lt;= 7}" TableVariableY="1" ActionType="TableVariable" Asynchronous="False" />
<Action OrderNumber="3" ActionType="Placeholder" Asynchronous="False" Description="计数共 8 次 =&gt; 2" DescriptionOverride="True" />
<Action OrderNumber="4" VariableOp="Increment" VariableName="M4s_暮_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="5" LogMessageText="M4s_暮" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_暮_n}" ExpressionTypeL="String" ExpressionR="8" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="0. 初始读条" Id="77062dfc-1a75-4ab6-8dad-3a34a0be8e61" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9623:">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="M4s_phase" VariableExpression="Twilight" ActionType="Variable" />
<Action OrderNumber="2" VariableOp="UnsetRegexUniversal" VariableName="^M4s_暮" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1.1 获取分身面向 * 4 =&gt; 2" Id="56defb69-dbd9-4ae8-8790-1bb6c0d4b88b" RegularExpression="^.{15}\S+ AA:10F:(?&lt;id&gt;4.{7}):[^:]*:17323:[^:]+:[^:]+:[^:]+:(?&lt;h&gt;[^:]+)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="条件：phase" DescriptionOverride="True" />
<Action OrderNumber="2" DictVariableOp="Set" DictVariableName="M4s_暮_h" DictVariableKey="${id}" DictVariableValue="${h}" ActionType="DictVariable" Asynchronous="False" />
<Action OrderNumber="3" ActionType="Placeholder" Asynchronous="False" Description="计数共 8 次 =&gt; 2" DescriptionOverride="True" />
<Action OrderNumber="4" VariableOp="Increment" VariableName="M4s_暮_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="5" LogMessageText="M4s_暮" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_暮_n}" ExpressionTypeL="String" ExpressionR="8" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_phase}" ExpressionTypeL="String" ExpressionR="Twilight" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="2. 处理数据" Id="5118e5f2-65da-4511-a081-0dfc8cd23ee3" RegularExpression="^M4s_暮">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="合并表格：前两行为先判定的 后两行为后判定的" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" Asynchronous="False" Description="列1：id  列2：是否打右侧" DescriptionOverride="True" />
<Action OrderNumber="3" DictVariableOp="Set" TableVariableName="tmp_data" ActionType="TableVariable" Asynchronous="False" />
<Action OrderNumber="4" DictVariableOp="Set" TableVariableOp="Append" TableVariableName="M4s_暮_先_isR" TableVariableTarget="tmp_data" ActionType="TableVariable" Asynchronous="False" />
<Action OrderNumber="5" DictVariableOp="Set" TableVariableOp="Append" TableVariableName="M4s_暮_后_isR" TableVariableTarget="tmp_data" ActionType="TableVariable" Asynchronous="False" />
<Action OrderNumber="6" ActionType="Placeholder" Asynchronous="False" Description="列3：每个实体安全区的 dir4" DescriptionOverride="True" />
<Action OrderNumber="7" DictVariableOp="Set" TableVariableOp="Set" TableVariableName="tmp_data" TableVariableX="3" TableVariableY="1" ActionType="TableVariable" Asynchronous="False" />
<Action OrderNumber="8" DictVariableOp="Set" TableVariableOp="SlicesSetAll" TableVariableExpressionType="Numeric" TableVariableName="tmp_data" TableVariableExpression="roundir(${d:M4s_暮_h[${_row[1]}]} + (${_row[2]} ? π/2 : -π/2), 4)" TableVariableX="3" TableVariableY=":" ActionType="TableVariable" Asynchronous="False" />
<Action OrderNumber="9" ActionType="Placeholder" Asynchronous="False" Description="汇总每轮两个实体安全区的 dir4，得到每轮安全区的 dir-4" DescriptionOverride="True" />
<Action OrderNumber="10" DictVariableOp="Set" VariableOp="SetString" VariableName="M4s_暮_先_dir-4" VariableExpression="${?d: 01 = 0, 12 = 1, 23 = 2, 30 = 3, 10 = 0, 21 = 1, 32 = 2, 03 = 3 [${t:tmp_data.hjoin(&quot;&quot;, &quot;&quot;, &quot;3&quot;, &quot;1,2&quot;)}]}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="11" DictVariableOp="Set" VariableOp="SetString" VariableName="M4s_暮_后_dir-4" VariableExpression="${?d: 01 = 0, 12 = 1, 23 = 2, 30 = 3, 10 = 0, 21 = 1, 32 = 2, 03 = 3 [${t:tmp_data.hjoin(&quot;&quot;, &quot;&quot;, &quot;3&quot;, &quot;3,4&quot;)}]}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="12" DictVariableOp="Set" TableVariableName="tmp_data" ActionType="TableVariable" Asynchronous="False" />
<Action OrderNumber="13" ActionType="Placeholder" Asynchronous="False" DescriptionOverride="True" />
<Action OrderNumber="14" UseTTSTextExpression="中间集合，${f:pick(${v:M4s_暮_先_dir-4}): 左前, 左后, 右后, 右前}，然后${f:pick(${v:M4s_暮_后_dir-4}): 左前, 左后, 右后, 右前}" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_暮_先_dir-4}" ExpressionTypeL="String" ExpressionR="${v:M4s_暮_后_dir-4}" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="15" UseTTSTextExpression="中间集合，${f:pick(${v:M4s_暮_先_dir-4}): 左前, 左后, 右后, 右前}两次" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_暮_先_dir-4}" ExpressionTypeL="String" ExpressionR="${v:M4s_暮_后_dir-4}" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="16" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 165, 0&#13;&#10;scaleX: ${v:M4s_暮_先_dir-4} &gt;= 2 ? 1 : -1&#13;&#10;scaleY: (${v:M4s_暮_先_dir-4} = 1 || ${v:M4s_暮_先_dir-4} = 2) ? 1 : -1&#13;&#10;&#13;&#10;2: 3, 3&#13;&#10;3: 0, 0&#13;&#10;1: 1.1, 13&#13;&#10;4: 13, 1.1&#13;&#10;A: polar 13, (4.84 + 16.066 * 1)°&#13;&#10;B: polar 13, (4.84 + 16.066 * 2)°&#13;&#10;C: polar 13, (4.84 + 16.066 * 3)°&#13;&#10;D: polar 13, (4.84 + 16.066 * 4)°" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="17" ActionType="Placeholder" ExecutionDelayExpression="8300" Asynchronous="False" />
<Action OrderNumber="18" UseTTSTextExpression="${f:pick(${v:M4s_暮_后_dir-4}): 左前, 左后, 右后, 右前}" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_暮_先_dir-4}" ExpressionTypeL="String" ExpressionR="${v:M4s_暮_后_dir-4}" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
<Action OrderNumber="19" UseTTSTextExpression="原地" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_暮_先_dir-4}" ExpressionTypeL="String" ExpressionR="${v:M4s_暮_后_dir-4}" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="20" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 165, 0&#13;&#10;scaleX: ${v:M4s_暮_后_dir-4} &gt;= 2 ? 1 : -1&#13;&#10;scaleY: (${v:M4s_暮_后_dir-4} = 1 || ${v:M4s_暮_后_dir-4} = 2) ? 1 : -1&#13;&#10;&#13;&#10;2: 3, 3&#13;&#10;3: 0, 0&#13;&#10;1: 1.1, 13&#13;&#10;4: 13, 1.1&#13;&#10;A: polar 13, (4.84 + 16.066 * 1)°&#13;&#10;B: polar 13, (4.84 + 16.066 * 2)°&#13;&#10;C: polar 13, (4.84 + 16.066 * 3)°&#13;&#10;D: polar 13, (4.84 + 16.066 * 4)°" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_暮_先_dir-4}" ExpressionTypeL="String" ExpressionR="${v:M4s_暮_后_dir-4}" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="3. 火雷直条 Wicked Special" Id="a5f0e35e-e775-4ac2-8a18-99f237fcfc19" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:961(?&lt;type&gt;0|2):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="条件：是 Twilight" DescriptionOverride="True" />
<Action OrderNumber="2" UseTTSTextExpression="${?d: 0 = 外, 2 = 内 [${type}]}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 165, 0&#13;&#10;scaleX: ${v:M4s_暮_后_dir-4} &gt;= 2 ? 1 : -1&#13;&#10;scaleY: (${v:M4s_暮_后_dir-4} = 1 || ${v:M4s_暮_后_dir-4} = 2) ? 1 : -1&#13;&#10;&#13;&#10;A: 11.25, 7.85&#13;&#10;B: 12.47, 5.73&#13;&#10;C: 13.28, 3.44&#13;&#10;D: fakeclear&#13;&#10;1: 13.75, 1.1&#13;&#10;2: 11.1, 5.5&#13;&#10;3: 11.1, 3.3&#13;&#10;4: 11.1, 1.1" ActionType="NamedCallback" Asynchronous="False" Description="两侧" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${type}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 165, 0&#13;&#10;scaleX: ${v:M4s_暮_后_dir-4} &gt;= 2 ? 1 : -1&#13;&#10;scaleY: (${v:M4s_暮_后_dir-4} = 1 || ${v:M4s_暮_后_dir-4} = 2) ? 1 : -1&#13;&#10;&#13;&#10;1: 1.1, 1.1&#13;&#10;2: 1.1, 5.1&#13;&#10;3: 1.1, 9.1&#13;&#10;4: 1.1, 13.1&#13;&#10;A: 3.75, 1.1&#13;&#10;B: 3.75, 5.1&#13;&#10;C: 3.75, 9.1&#13;&#10;D: 3.75, 13.1" ActionType="NamedCallback" Asynchronous="False" Description="中间" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${type}" ExpressionTypeL="String" ExpressionR="2" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="6600" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="6" UseTTSTextExpression="八方站位" ActionType="UseTTS" ExecutionDelayExpression="5000" Asynchronous="False" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_phase}" ExpressionTypeL="String" ExpressionR="Twilight" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
</Triggers>
</Folder>
<Folder Id="b594ba55-0ce8-4a2e-ad8d-4774f4f96154" Name="J. 午夜 Midnight" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="0. 初始读条" Id="62c1a2df-c1f5-438f-813c-01151adff6b7" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9AB9:">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="M4s_phase" VariableExpression="Midnight" ActionType="Variable" />
<Action OrderNumber="2" VariableOp="UnsetRegexUniversal" VariableName="^M4s_夜" ActionType="Variable" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1.1 获取分身面向 * 2 =&gt; 2" Id="86b326b5-5b56-4d31-ac34-e341d4dd1aa6" RegularExpression="^.{15}\S+ AA:10F:(?&lt;id&gt;4.{7}):[^:]*:17323:[^:]+:[^:]+:[^:]+:(?&lt;h&gt;[12][^:]+)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="条件：phase" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" Asynchronous="False" Description="条件：右/右上" DescriptionOverride="True" />
<Action OrderNumber="3" VariableOp="SetString" VariableName="M4s_夜_id_${f:pick(${n: ${h} &gt; 2}):正, 斜}" VariableExpression="${id}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" ActionType="Placeholder" Asynchronous="False" Description="计数共 10 次 =&gt; 2" DescriptionOverride="True" />
<Action OrderNumber="5" VariableOp="Increment" VariableName="M4s_夜_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="6" LogMessageText="M4s_夜" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_夜_n}" ExpressionTypeL="String" ExpressionR="10" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_phase}" ExpressionTypeL="String" ExpressionR="Midnight" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="4. 分散分摊标点" Id="10df0e56-9b27-49bb-b483-7191d68f9b86" RegularExpression="^M4s_夜:is正:(?&lt;is正&gt;.):is散:(?&lt;is散&gt;.)">
<Actions>
<Action OrderNumber="1" VariableOp="SetString" VariableName="tmp_coord1" VariableExpression="${?d: 00 = 8.95, 01 = 0.85, 10 = 7.05, 11 = 3.37 [${is散}${is正}]}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="tmp_coord2" VariableExpression="${?d: 00 = 10.46, 01 = 13.75, 10 = 11.81, 11 = 13.34 [${is散}${is正}]}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 165, 0&#13;&#10;scaleX: ${v:tmp_coord1}&#13;&#10;scaleY: ${v:tmp_coord2}&#13;&#10;A: -1, -1&#13;&#10;B:  1, -1&#13;&#10;C: -1,  1&#13;&#10;D:  1,  1&#13;&#10;---&#13;&#10;action: place&#13;&#10;center: 100, 165, 0&#13;&#10;scaleX: ${v:tmp_coord2}&#13;&#10;scaleY: ${v:tmp_coord1}&#13;&#10;1: -1, -1&#13;&#10;2:  1, -1&#13;&#10;3: -1,  1&#13;&#10;4:  1,  1" ActionType="NamedCallback" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="4" VariableName="tmp_coord1" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="5" VariableName="tmp_coord2" ActionType="Variable" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="3. 分散分摊 =&gt; 4 * 2" Id="78e751ea-3c77-4743-a4d3-b336969aadb3" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:962(?&lt;type&gt;[BC]):">
<Actions>
<Action OrderNumber="1" UseTTSTextExpression="${?d: B = 分摊, C = 分散 [${type}]}，然后${f:pick(${v:M4s_夜_is正2}): 斜点, 正点}${?d: B = 分散, C = 分摊 [${type}]}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="M4s_夜:is正:${v:M4s_夜_is正1}:is散:${n: ${type} == C}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" DescBgColor="dff" />
<Action OrderNumber="3" UseTTSTextExpression="${f:pick(${v:M4s_夜_is正2}): 斜点, 正点}${?d: B = 分散, C = 分摊 [${type}]}" ActionType="UseTTS" ExecutionDelayExpression="7400" Asynchronous="False" />
<Action OrderNumber="4" LogMessageText="M4s_夜:is正:${v:M4s_夜_is正2}:is散:${n: ${type} == B}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" DescBgColor="dff" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1.2 获取分身技能 * 8 =&gt; 2" Id="3ddaadbd-5d60-4145-a3b2-672987ebac04" RegularExpression="^.{15}\S+ 111:(?&lt;id&gt;4.{7}):0197:11D(?&lt;type&gt;[1234]):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="先直线 11D1    后直线 11D2    先月环 11D3    后月环 11D4" DescriptionOverride="True" />
<Action OrderNumber="2" DictVariableOp="Set" DictVariableValueType="Numeric" DictVariableName="M4s_夜_is先" DictVariableKey="${id}" DictVariableValue="${type} % 2 = 1" ActionType="DictVariable" Asynchronous="False" />
<Action OrderNumber="3" DictVariableOp="Set" DictVariableValueType="Numeric" DictVariableName="M4s_夜_is月环" DictVariableKey="${id}" DictVariableValue="${type} &gt;= 3" ActionType="DictVariable" Asynchronous="False" />
<Action OrderNumber="4" ActionType="Placeholder" Asynchronous="False" Description="计数共 10 次 =&gt; 2" DescriptionOverride="True" />
<Action OrderNumber="5" VariableOp="Increment" VariableName="M4s_夜_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="6" LogMessageText="M4s_夜" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_夜_n}" ExpressionTypeL="String" ExpressionR="10" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 处理" Id="8eedef74-6b2f-4a17-858b-2858912c9af8" RegularExpression="^M4s_夜$">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="M4s_夜_is正${n: ${d:M4s_夜_is先[${v:M4s_夜_id_正}]} ? 1 : 2}" VariableExpression="${d:M4s_夜_is月环[${v:M4s_夜_id_正}]}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="M4s_夜_is正${n: ${d:M4s_夜_is先[${v:M4s_夜_id_斜}]} ? 1 : 2}" VariableExpression="!${d:M4s_夜_is月环[${v:M4s_夜_id_斜}]}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" UseTTSTextExpression="${f:pick(${v:M4s_夜_is正1}): 斜点, 正点}" ActionType="UseTTS" Asynchronous="False" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="ec17614f-a449-40df-bbe3-dc84a6cfe54e" Name="L. 黎明 Sunrise" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="0. 初始读条（离子簇2）" Id="484ad364-ddb0-4444-ab95-c63c4d30b198" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:9622:">
<Actions>
<Action OrderNumber="1" VariableOp="UnsetRegexUniversal" VariableName="^M4s_晓" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" VariableOp="SetString" VariableName="M4s_phase" VariableExpression="Sunrise" ActionType="Variable" Asynchronous="False" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="1. 正负 buff" Id="24d6b4e1-98e9-4c32-8d42-7b7bf2e32832" RegularExpression="^.{15}\S+ 1A:FA(?&lt;type&gt;[01]):[^:]+:(?&lt;t&gt;(23|38)[^:]*):.{8}:[^:]*:(?&lt;tid&gt;1.{7}):[^:]*:01:" PrevActions="Interrupt" PeriodRefire="Deny" RefirePeriodExpression="40000">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="条件：phase" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="M4s_晓_is黄" VariableExpression="${type} = 0" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="M4s_晓_is短" VariableExpression="${t} &lt; 30" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" UseTTSTextExpression="${if: ${v:M4s_晓_is短} ? 先引导${if:${v:M4s_晓_is黄}?蓝:黄}色炮，然后踩塔 : 先踩塔，然后引导${if:${v:M4s_晓_is黄}?蓝:黄}色炮}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="5" NamedCallbackName="command" NamedCallbackParam="/e [测试] 1&#13;&#10;type = ${type}, t = ${t}, id = ${tid}&#13;&#10;${if: ${v:M4s_晓_is短} ? 先引导${if:${v:M4s_晓_is黄}?蓝:黄}色炮，然后踩塔 : 先踩塔，然后引导${if:${v:M4s_晓_is黄}?蓝:黄}色炮}" Enabled="False" ActionType="NamedCallback" Asynchronous="False" DescBgColor="fdd" />
<Action OrderNumber="6" LogMessageText="M4s_cd5:18" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
<Action OrderNumber="7" LogMessageText="M4s_cd5:35" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False" />
</Actions>
<Condition Enabled="true" Grouping="And">
<ConditionSingle Enabled="true" ExpressionL="${tid}" ExpressionTypeL="String" ExpressionR="${_me.id}" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_phase}" ExpressionTypeL="String" ExpressionR="Sunrise" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="4. 黄蓝炮 * 4 =&gt; 5" Id="acca94e8-0f1b-412d-93de-54d14ff98a45" RegularExpression="^.{15}\S+ 1A:B9A:[^:]+:(?&lt;t&gt;[^:]+):.{8}:[^:]*:(?&lt;tid&gt;.{8}):[^:]*:(?&lt;type&gt;2F[45]):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="条件：phase" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="Increment" VariableName="M4s_晓_黄蓝_n" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="tmp_round" VariableExpression="ceiling(${v:M4s_晓_黄蓝_n} / 4)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" ListVariableOp="Push" ListVariableName="M4s_晓_${?d: 2F4 = 黄, 2F5 = 蓝 [${type}]}${v:tmp_round}dir-4" ListVariableExpression="${d:M4s_晓_id2Dir-4[${tid}]}" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="5" ActionType="Placeholder" Asynchronous="False" Description="4 / 8 次后，且轮到自己引导" DescriptionOverride="True" />
<Action OrderNumber="6" LogMessageText="M4s_晓:黄蓝:${v:tmp_round}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_晓_黄蓝_n}" ExpressionTypeL="Numeric" ExpressionR="${v:M4s_晓_is短} ? 4 : 8" ExpressionTypeR="Numeric" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="7" VariableName="tmp_round" ActionType="Variable" Asynchronous="False" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_phase}" ExpressionTypeL="String" ExpressionR="Sunrise" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="3.2 第二轮塔（塔判定）" Id="c6c40521-89ca-4b13-ad87-8d69b57a4cef" RegularExpression="^.{15}\S+ 108:(?&lt;id&gt;4.{7}):9628:.{8}:[^:]*:(?&lt;x&gt;[^:]+):(?&lt;y&gt;[^:]+):[^:]+:(?&lt;h&gt;[^:]+)" PrevActionsRefire="Deny" PeriodRefire="Deny" RefirePeriodExpression="1000">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="条件：phase  CD" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" Asynchronous="False" Description="这条日志的方向是错的，实际要几秒后通过 ActorMove 转向，所以直接读取实体了" DescriptionOverride="True" />
<Action OrderNumber="3" ActionType="Placeholder" ExecutionDelayExpression="5000" Asynchronous="False" />
<Action OrderNumber="4" VariableOp="SetNumeric" VariableName="M4s_晓_is塔2NS" VariableExpression="(round(${y}) = 165) = (roundir(${_entity[${id}].heading}, 8) % 2 = 1)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="5" NamedCallbackName="command" NamedCallbackParam="/e [测试] v6&#13;&#10;如果日出 TTS 有误，&#13;&#10;请截图反馈前后的所有默语信息&#13;&#10;且不要关闭 ACT&#13;&#10;  y = ${y}&#13;&#10;  heading = ${_entity[${id}].heading}&#13;&#10;  塔2NS = ${v:M4s_晓_is塔2NS}&#13;&#10;${_event}" Enabled="False" ActionType="NamedCallback" Asynchronous="False" DescBgColor="fdd" />
<Action OrderNumber="6" ActionType="Placeholder" Asynchronous="False" Description="自己引导：" DescriptionOverride="True" />
<Action OrderNumber="7" UseTTSTextExpression="${if: ${v:M4s_晓_is塔2NS} ? 向左右引导 : 向上下引导}" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_晓_is短}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="8" NamedCallbackName="command" NamedCallbackParam="/e [测试] &#13;&#10;${if: ${v:M4s_晓_is塔2NS} ? 向左右引导 : 向上下引导}" Enabled="False" ActionType="NamedCallback" Asynchronous="False" DescBgColor="fdd">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_晓_is短}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="9" ActionType="Placeholder" Asynchronous="False" Description="自己踩塔（等待直条判定之后再标点）：" DescriptionOverride="True" />
<Action OrderNumber="10" UseTTSTextExpression="${?l: 右东, 上北, 左西, 下南 [${n: ${_me.isTH} * 2 + ${v:M4s_晓_is塔2NS} + 1}]}踩塔" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_晓_is短}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="11" NamedCallbackName="command" NamedCallbackParam="/e [测试] &#13;&#10;${?l: 右东, 上北, 左西, 下南 [${n: ${_me.isTH} * 2 + ${v:M4s_晓_is塔2NS} + 1}]}踩塔" Enabled="False" ActionType="NamedCallback" Asynchronous="False" DescBgColor="fdd">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_晓_is短}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="12" ActionType="Placeholder" ExecutionDelayExpression="3000" Asynchronous="False" />
<Action OrderNumber="13" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 165, 0&#13;&#10;// θ 为自己要去的方向&#13;&#10;θ: (${_me.isTH} * 2 + ${v:M4s_晓_is塔2NS} - 3) * π/2&#13;&#10;&#13;&#10;1: 0, -5&#13;&#10;2: 0,  5&#13;&#10;3: 0, -13.2&#13;&#10;4: 0,  13.2&#13;&#10;A: -1.2, -13.7 &#13;&#10;C:  1.2, -13.7 &#13;&#10;B: -1.2,  13.7 &#13;&#10;D:  1.2,  13.7 " ActionType="NamedCallback" Asynchronous="False" Description="[同] [条] 踩塔位置" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_晓_is短}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_phase}" ExpressionTypeL="String" ExpressionR="Sunrise" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Sequential="True" Name="3.1 第一轮塔（正点分身）" Id="6ff6dc8d-f214-46a2-bd96-e33e76ec7b93" RegularExpression="^.{15}\S+ AA:10F:(?&lt;id&gt;4.{7}):[^:]*:17323:(?&lt;x&gt;[^:]+):(?&lt;y&gt;16[^:]+):[^:]+:(?&lt;h&gt;[^:]+)" PrevActionsRefire="Deny" PeriodRefire="Deny" RefirePeriodExpression="1000">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="条件：phase  CD" DescriptionOverride="True" />
<Action OrderNumber="2" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="SetNumeric" VariableName="M4s_晓_is塔1NS" VariableExpression="(round(${y}) = 165) = (roundir(${h}, 8) % 2 = 1)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" ActionType="Placeholder" Asynchronous="False" Description="自己踩塔：" DescriptionOverride="True" />
<Action OrderNumber="5" UseTTSTextExpression="${?l: 右东, 上北, 左西, 下南 [${n: ${_me.isTH} * 2 + ${v:M4s_晓_is塔1NS} + 1}]}踩塔" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_晓_is短}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 165, 0&#13;&#10;// θ 为自己要去的方向&#13;&#10;θ: (${_me.isTH} * 2 + ${v:M4s_晓_is塔1NS} - 3) * π/2&#13;&#10;1: 0, -5&#13;&#10;2: 0,  5&#13;&#10;3: 0, -13.2&#13;&#10;4: 0,  13.2&#13;&#10;A: -1.2, -13.7 &#13;&#10;C:  1.2, -13.7 &#13;&#10;B: -1.2,  13.7 &#13;&#10;D:  1.2,  13.7 " ActionType="NamedCallback" Asynchronous="False" Description="[同] [条] 踩塔位置" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_晓_is短}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="7" ActionType="Placeholder" Asynchronous="False" Description="自己引导：" DescriptionOverride="True" />
<Action OrderNumber="8" UseTTSTextExpression="${if: ${v:M4s_晓_is塔1NS} ? 向左右引导 : 向上下引导}" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_晓_is短}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="9" NamedCallbackName="command" NamedCallbackParam="/e [测试] 3&#13;&#10;塔1NS = ${v:M4s_晓_is塔1NS}" Enabled="False" ActionType="NamedCallback" Asynchronous="False" DescBgColor="fdd" />
<Action OrderNumber="10" NamedCallbackName="SetStatusLoopVfx" NamedCallbackParam="${_entity[${id}].address}, 391" ActionType="NamedCallback" ExecutionDelayExpression="1000" DescTextColor="26f" />
<Action OrderNumber="11" NamedCallbackName="ObjectScaling" NamedCallbackParam="${_entity[${id}].address}, 0.6" Enabled="False" ActionType="NamedCallback" DescTextColor="26f" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_phase}" ExpressionTypeL="String" ExpressionR="Sunrise" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="5. 播报引导" Id="b89ab35a-d6e3-4753-87d0-1b9ed09dce58" RegularExpression="^M4s_晓:黄蓝:(?&lt;round&gt;\d)$">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="根据自己的点名复制出对应的一组 dir-4，并根据职能排序" DescriptionOverride="True" />
<Action OrderNumber="2" ListVariableOp="Copy" ListVariableName="M4s_晓_${if: ${v:M4s_晓_is黄} ? 蓝 : 黄}${round}dir-4" ListVariableTarget="tmp_dir-4" ActionType="ListVariable" Asynchronous="False" />
<Action OrderNumber="3" ListVariableOp="SortNumericAsc" ListVariableName="tmp_dir-4" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_me.isTH}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="4" ListVariableOp="SortNumericDesc" ListVariableName="tmp_dir-4" ActionType="ListVariable" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_me.isTH}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
<Action OrderNumber="5" ActionType="Placeholder" Description="此时列表中含有两个 dir-4，第一个是自己要去的" DescriptionOverride="True" />
<Action OrderNumber="6" UseTTSTextExpression="去${?d: 0=左上, 1=左下, 2=右下, 3=右上 [${l:tmp_dir-4[1]}]}，朝${if: ${v:M4s_晓_is塔${round}NS} ? 左右 : 上下 }引导${if: ${v:M4s_晓_is黄} ? 蓝 : 黄 }色" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_me.jobEN3}" ExpressionTypeL="String" ExpressionR="BLU" ExpressionTypeR="String" ConditionType="StringNotEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="7" NamedCallbackName="command" NamedCallbackParam="/e [测试] 5&#13;&#10;round = ${round}&#13;&#10;去${?d: 0=左上, 1=左下, 2=右下, 3=右上 [${l:tmp_dir-4[1]}]}，朝${if: ${v:M4s_晓_is塔${round}NS} ? 左右 : 上下 }引导${if: ${v:M4s_晓_is黄} ? 蓝 : 黄 }色" Enabled="False" ActionType="NamedCallback" Asynchronous="False" DescBgColor="fdd" />
<Action OrderNumber="8" UseTTSTextExpression="去${?d: 0=左上, 1=左下, 2=右下, 3=右上 [${l:tmp_dir-4[1]}]}或${?d: 0=左上, 1=左下, 2=右下, 3=右上 [${l:tmp_dir-4[2]}]}，朝${if: ${v:M4s_晓_is塔${round}NS} ? 左右 : 上下 }引导${if: ${v:M4s_晓_is黄} ? 蓝 : 黄 }色" ActionType="UseTTS" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${_me.jobEN3}" ExpressionTypeL="String" ExpressionR="BLU" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="9" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 165, 0&#13;&#10;θ: (${l:tmp_dir-4[1]} - 1.5) * π/2&#13;&#10;// 自己要去的点：外侧用 3，内侧用 1A&#13;&#10;1: polar 10.47, -π&#13;&#10;A: polar 10.69, -π + (${l:tmp_dir-4[1]} % 2 = ${v:M4s_晓_is塔${round}NS} ? 1 : -1) * 11.7°&#13;&#10;3: polar 15.33, -π + (${l:tmp_dir-4[1]} % 2 = ${v:M4s_晓_is塔${round}NS} ? -1 : 1) * 14.3°&#13;&#10;---&#13;&#10;action: place&#13;&#10;center: 100, 165, 0&#13;&#10;θ: (${l:tmp_dir-4[2]} - 1.5) * π/2&#13;&#10;// 同组要去的点：外侧用 4，内侧用 2B&#13;&#10;2: polar 10.47, -π&#13;&#10;B: polar 10.69, -π + (${l:tmp_dir-4[2]} % 2 = ${v:M4s_晓_is塔${round}NS} ? 1 : -1) * 11.7°&#13;&#10;4: polar 15.33, -π + (${l:tmp_dir-4[2]} % 2 = ${v:M4s_晓_is塔${round}NS} ? -1 : 1) * 14.3°&#13;&#10;&#13;&#10;C: fakeclear&#13;&#10;D: fakeclear" ActionType="NamedCallback" Asynchronous="False" Description="[同] 引导位置" DescBgColor="dff" DescriptionOverride="True" />
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2. 获取斜点分身 * 4" Id="b5e645dc-36df-4bb4-9534-927a92b7f586" RegularExpression="^.{15}\S+ AA:10F:(?&lt;id&gt;4.{7}):[^:]*:17323:(?&lt;x&gt;[^:]+):(?&lt;y&gt;1[57][45][^:]+):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="条件：phase" DescriptionOverride="True" />
<Action OrderNumber="2" DictVariableOp="Set" DictVariableValueType="Numeric" DictVariableName="M4s_晓_id2Dir-4" DictVariableKey="${id}" DictVariableValue="roundvec(${x} - 100, ${y} - 165, -4)" ActionType="DictVariable" />
<Action OrderNumber="3" NamedCallbackName="ObjectScaling" NamedCallbackParam="${_entity[${id}].address}, 0.5" ActionType="NamedCallback" DescTextColor="26f" />
<Action OrderNumber="4" NamedCallbackName="ObjectScaling" NamedCallbackParam="${_entity[${id}].address}, 0.4" ActionType="NamedCallback" ExecutionDelayExpression="1000" DescTextColor="26f" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${v:M4s_phase}" ExpressionTypeL="String" ExpressionR="Sunrise" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Trigger>
</Triggers>
</Folder>
<Folder Id="625ebb85-3409-45d7-8cb3-2005794ed2d9" Name="M. 软狂暴" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="1. 读条" Id="e8cbe5b0-03d3-43bd-83e2-2b763ceea38e" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]*:95F(?&lt;type&gt;[9AB]):">
<Actions>
<Action OrderNumber="1" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 165, 0&#13;&#10;&#13;&#10;A: -15.42, 0&#13;&#10;1: -17.77, 0&#13;&#10;B:  15.42, 0&#13;&#10;2:  17.77, 0&#13;&#10;C:  -7.25, 12.08&#13;&#10;3:  -9.50, 13.45&#13;&#10;D:   7.25, 12.08&#13;&#10;4:   9.50, 13.45" ActionType="NamedCallback" Description="前" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${type}" ExpressionTypeL="String" ExpressionR="9" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="2" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 165, 0&#13;&#10;&#13;&#10;A:  -7.25, -12.08&#13;&#10;1:  -9.50, -13.45&#13;&#10;B:   7.25, -12.08&#13;&#10;2:   9.50, -13.45&#13;&#10;C:  -7.25,  12.08&#13;&#10;3:  -9.50,  13.45&#13;&#10;D:   7.25,  12.08&#13;&#10;4:   9.50,  13.45" ActionType="NamedCallback" Description="中" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${type}" ExpressionTypeL="String" ExpressionR="A" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="3" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 165, 0&#13;&#10;&#13;&#10;A:  -7.25, -12.08&#13;&#10;1:  -9.50, -13.45&#13;&#10;B:   7.25, -12.08&#13;&#10;2:   9.50, -13.45&#13;&#10;C: -15.42, 0&#13;&#10;3: -17.77, 0&#13;&#10;D:  15.42, 0&#13;&#10;4:  17.77, 0" ActionType="NamedCallback" Description="后" DescBgColor="dff" DescriptionOverride="True">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${type}" ExpressionTypeL="String" ExpressionR="B" ExpressionTypeR="String" ConditionType="StringEqualNocase" />
</Condition>
</Action>
<Action OrderNumber="4" UseTTSTextExpression="中间集合抬血，准备去${?d: 9 = 中或后, A = 前或后, B = 前或中 [${type}]}" ActionType="UseTTS" />
<Action OrderNumber="5" UseTTSTextExpression="去${?d: 9 = 中或后, A = 前或后, B = 前或中 [${type}]}" ActionType="UseTTS" ExecutionDelayExpression="8700" />
<Action OrderNumber="6" NamedCallbackName="AdvWm" NamedCallbackParam="action: place&#13;&#10;center: 100, 165, 0&#13;&#10;&#13;&#10;A:  -7.25, -12.08&#13;&#10;1:   7.25, -12.08&#13;&#10;B: -15.42,  0&#13;&#10;2:  15.42,  0&#13;&#10;C:  -7.25,  12.08&#13;&#10;3:   7.25,  12.08&#13;&#10;D: fakeclear&#13;&#10;4: fakeclear" ActionType="NamedCallback" ExecutionDelayExpression="5300" DescBgColor="dff" />
</Actions>
</Trigger>
</Triggers>
</Folder>
<Folder Id="d405cc4f-cd0a-4bd3-b6f8-64b4cbb9e327" Name="B. 钢铁月环 + 远近" Enabled="true" RawEnvironmentVariables="R1 = 3.5&#13;&#10;R2 = 6.375&#13;&#10;R3 = 8.75&#13;&#10;R4 = 11.25&#13;&#10;R5 = 13.75&#13;&#10;R6 = 15.25">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="1.1 远近 =&gt; 2" Id="1e7871c2-70d6-4dfc-8af5-e3d7e2831632" RegularExpression="^.{15}\S+ 1A:B9A:[^:]+:(?&lt;t&gt;[^:]+):.{8}:[^:]*:.{8}:[^:]*:(?&lt;type&gt;2F[67]):">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="M4s_远近_n = 1（五条线的机制有一次 这是第二次）              ${?d: 2F6 = 近, 2F7 = 远 [${type}]}" DescriptionOverride="True" />
<Action OrderNumber="2" VariableOp="SetNumeric" VariableName="M4s_钢月远近_is先远" VariableExpression="${type} == 2F7" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="3" LogMessageText="M4s_钢月远近:先月:${v:M4s_钢月远近_is先月}:先远:${v:M4s_钢月远近_is先远}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:M4s_钢月远近_is先远}${ev:M4s_钢月远近_is先月}" ExpressionTypeL="String" ExpressionR="11" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:M4s_钢月远近_is先远}" ExpressionTypeL="String" ExpressionR="0" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="1.2 钢月 =&gt; 2" Id="ef0b5e8d-1ac1-4eac-a743-9a9d81473e68" RegularExpression="^.{15}\S+ 14:4.{7}:[^:]+:95E(?&lt;type&gt;[01]):">
<Actions>
<Action OrderNumber="1" VariableOp="SetNumeric" VariableName="M4s_钢月远近_is先月" VariableExpression="${type} = 1" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="2" LogMessageText="M4s_钢月远近:先月:${v:M4s_钢月远近_is先月}:先远:${v:M4s_钢月远近_is先远}" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" Asynchronous="False">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${ev:M4s_钢月远近_is先远}${ev:M4s_钢月远近_is先月}" ExpressionTypeL="String" ExpressionR="11" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="3. 每轮" Id="6bf5f6a1-b3e3-4be7-aaa2-07c39bea2be6" RegularExpression="^M4s_钢月远近:R:(?&lt;T&gt;.)(?&lt;H&gt;.)(?&lt;M&gt;.)(?&lt;R&gt;.):round:(?&lt;round&gt;.):bait:(?&lt;bait&gt;..)">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Description="THMR 的距离索引（环境变量）；第几轮；第几个人引导" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" ExecutionDelayExpression="${?l: 0, 15100, 18600, 22100 [${round}]}" Asynchronous="False" />
<Action OrderNumber="3" VariableOp="SetString" VariableName="tmp_内外圈" VariableExpression="${if: ${T} &lt;= 3 ? 内圈 : 外圈 }" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="4" VariableOp="SetString" VariableName="tmp_r" VariableExpression="$${n: ceiling(${v:myIdx} / 2)}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="5" VariableOp="SetString" VariableName="tmp_靠近远离" VariableExpression="${if: &#13;&#10;    ${v:tmp_r} = 1 || &#13;&#10;    ${v:tmp_r} = 4 || &#13;&#10;   (${v:tmp_r} = 2 &amp;&amp; ${v:myIdx} % 4 % 3 = 0)&#13;&#10;? 靠近 : 远离 }" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="6" VariableOp="SetString" VariableName="tmp_引导" VariableExpression="${f:ifcontain(${v:myIdx}, &quot;引导&quot;, &quot;&quot;):${bait}}" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="7" UseTTSTextExpression="${v:tmp_内外圈}${v:tmp_靠近远离}${v:tmp_引导}" ActionType="UseTTS" Asynchronous="False" />
<Action OrderNumber="8" VariableOp="UnsetRegex" VariableName="^tmp_(内外圈|r|靠近远离|引导)" ActionType="Variable" Asynchronous="False" />
<Action OrderNumber="9" NamedCallbackName="AdvWm" NamedCallbackParam="O: 100, 100, 0&#13;&#10;// 顺序：MT - D4&#13;&#10;A: polar ${env:R${T}}, -180°&#13;&#10;C: polar ${env:R${T}},    0°&#13;&#10;4: polar ${env:R${H}},  -45°&#13;&#10;3: polar ${env:R${H}},   45°&#13;&#10;D: polar ${env:R${M}},  -90°&#13;&#10;B: polar ${env:R${M}},   90°&#13;&#10;1: polar ${env:R${R}}, -135°&#13;&#10;2: polar ${env:R${R}},  135°" ActionType="NamedCallback" DescBgColor="dff" />
<Action OrderNumber="10" SystemBeepLengthExpression="200">
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${round}" ExpressionTypeL="String" ExpressionR="1" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Action>
</Actions>
</Trigger>
<Trigger Enabled="true" Name="2a. 钢铁远 / 月环近 =&gt; 3" Id="e247bbd4-fb07-4b6d-8204-a717875d7aaa" RegularExpression="^M4s_钢月远近:先月:(?&lt;isIn&gt;.):先远:(?&lt;isFar&gt;.)">
<Actions>
<Action OrderNumber="1" LogMessageText="M4s_钢月远近:R:4644:round:${if: ${isFar} ? 1 : 2 }:bait:34" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="2" LogMessageText="M4s_钢月远近:R:1323:round:${if: ${isFar} ? 2 : 1 }:bait:12" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="3" LogMessageText="M4s_钢月远近:R:4446:round:${if: ${isFar} ? 3 : 4 }:bait:78" LogProcess="True" ActionType="LogMessage" />
<Action OrderNumber="4" LogMessageText="M4s_钢月远近:R:2313:round:${if: ${isFar} ? 4 : 3 }:bait:56" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="5" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="25600" DescBgColor="dff" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${isIn}" ExpressionTypeL="String" ExpressionR="${isFar}" ExpressionTypeR="String" ConditionType="StringNotEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="2b. 钢铁近 / 月环远 =&gt; 3" Id="6041159f-ac2e-462f-9fa3-b22297dfbdd5" RegularExpression="^M4s_钢月远近:先月:(?&lt;isIn&gt;.):先远:(?&lt;isFar&gt;.)">
<Actions>
<Action OrderNumber="1" LogMessageText="M4s_钢月远近:R:1312:round:${if: ${isFar} ? 1 : 2 }:bait:34" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="2" LogMessageText="M4s_钢月远近:R:4555:round:${if: ${isFar} ? 2 : 1 }:bait:12" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="3" LogMessageText="M4s_钢月远近:R:1213:round:${if: ${isFar} ? 3 : 4 }:bait:78" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="4" LogMessageText="M4s_钢月远近:R:5545:round:${if: ${isFar} ? 4 : 3 }:bait:56" LogProcess="True" LogProcessACT="True" ActionType="LogMessage" />
<Action OrderNumber="5" NamedCallbackName="place" NamedCallbackParam="load" ActionType="NamedCallback" ExecutionDelayExpression="25600" DescBgColor="dff" />
</Actions>
<Condition Enabled="true" Grouping="Or">
<ConditionSingle Enabled="true" ExpressionL="${isIn}" ExpressionTypeL="String" ExpressionR="${isFar}" ExpressionTypeR="String" ConditionType="StringEqualCase" />
</Condition>
</Trigger>
<Trigger Enabled="true" Name="0. 初始化 (叉形闪电)" Id="2301174b-7219-4c62-8f37-1cb9b97694b4" RegularExpression="^.{15}\S+ 1[56]:4.{7}:[^:]*:95E7:" PrevActions="Interrupt" PrevActionsRefire="Deny" PeriodRefire="Deny" RefirePeriodExpression="1000">
<Actions>
<Action OrderNumber="1" VariableOp="UnsetRegexUniversal" VariableName="^M4s_钢月远近" ActionType="Variable" />
</Actions>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers />
</Folder>
<Folder Id="db1d0b13-12a9-4433-9d6d-696866e13160" Name=".总体控制" Enabled="true">
<Folders />
<Triggers>
<Trigger Enabled="true" Name="导入提示" Id="7ce93ecb-65e3-48b5-877a-eb45636cec4b" RegularExpression="^." PrevActionsRefire="Deny" PeriodRefire="Deny" RefirePeriodExpression="30000">
<Actions>
<Action OrderNumber="1" MessageBoxIconType="Information" MessageBoxText="已添加 M1-4s 零式触发器。&#13;&#10;使用前请在远程触发器中查看说明。&#13;&#10;&#13;&#10;- 更新：&#13;&#10;&#13;&#10; · 四层已发布视频介绍，链接已复制到剪贴板。&#13;&#10;   你可以直接在浏览器粘贴查看，或在使用说明中查看。&#13;&#10;   如果对任何机制的标点有任何疑问，建议先看视频，&#13;&#10;   不要问我钢铁月环点歪了之类的问题。&#13;&#10; &#13;&#10;有任何问题请先尝试完整使用远程触发器中的自检。" ActionType="MessageBox" />
<Action OrderNumber="2" VariableOp="Clipboard" VariableExpression="${env:link}" ActionType="Variable" />
<Action OrderNumber="3" TriggerOp="DisableTrigger" TriggerId="7ce93ecb-65e3-48b5-877a-eb45636cec4b" ActionType="Trigger" />
</Actions>
</Trigger>
</Triggers>
</Folder>
</Folders>
<Triggers />
</Folder>
</Folders>
<Triggers>
<Trigger Enabled="false" Name="使用必读" Id="7391dd14-c612-4d18-a971-a8b80c1b18e8" RegularExpression="">
<Actions>
<Action OrderNumber="1" ActionType="Placeholder" Asynchronous="False" Description="你无需手动执行任何内部分组。" DescBgColor="f0f8ff" DescTextColor="822" DescriptionOverride="True" />
<Action OrderNumber="2" ActionType="Placeholder" Asynchronous="False" Description="遇到任何问题，先使用远程触发器的自检，自检从上到下均可通过则一般不会有问题。" DescBgColor="f0f8ff" DescTextColor="822" DescriptionOverride="True" />
<Action OrderNumber="3" ActionType="Placeholder" Asynchronous="False" Description="还有问题的话可能是插件的某些初始化过程失败导致的，尝试重启。" DescBgColor="f0f8ff" DescTextColor="822" DescriptionOverride="True" />
<Action OrderNumber="4" LaunchProcessPathExpression="${env:link}" ActionType="LaunchProcess" Asynchronous="False" Description="使用四层前先看视频说明（右键这行测试动作）" DescriptionOverride="True" />
</Actions>
</Trigger>
</Triggers>
</ExportedFolder>
</TriggernometryExport>